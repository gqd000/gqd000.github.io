<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Java笔记（四）</title>
      <link href="posts/4.html"/>
      <url>posts/4.html</url>
      
        <content type="html"><![CDATA[<h1 id="多线程基础"><a href="#多线程基础" class="headerlink" title="多线程基础"></a>多线程基础</h1><h2 id="一、线程相关概念"><a href="#一、线程相关概念" class="headerlink" title="一、线程相关概念"></a>一、线程相关概念</h2><ol><li>程序：是为完成特定任务、用某种语言编写的一组指令的集合。简单的说：就是我们写的代码。</li><li>进程：指运行中的程序<ul><li>比如我们使用QQ，就启动了一个进程，操作系统就会为该进程分配内存空间。当我们使用迅雷，又启动了一个进程，操作系统将为迅雷分配新的内存空间；</li><li>进程是程序的一次执行过程，或是正在运行的一个程序；</li><li>进程是动态过程：有它自身的产生、存在和消亡的过程。</li></ul></li><li>线程<ul><li>线程有进程创建，是进程的一个实体；</li><li>一个进程可以有多个线程。</li></ul></li><li>单线程：同一时刻，只允许执行一个线程。</li><li>多线程：同一个时刻，可以执行多个线程，比如：一个QQ进程，可以同时打开多个聊天窗口，一个迅雷进程，可以同时下载多个文件。</li><li>并发：同一时刻，多个任务交替执行，造成一种“貌似同时”的错觉，单核CPU的多任务就是并发。</li><li>并行：同一时刻，多个任务同时执行，多核CPU可以实现并行。</li></ol><h2 id="二、创建线程的两种方法"><a href="#二、创建线程的两种方法" class="headerlink" title="二、创建线程的两种方法"></a>二、创建线程的两种方法</h2><blockquote><p>在Java中，创建线程有两种方法：</p><ul><li>继承Thread类，重写run方法(Thread类也实现了Runnable接口)；</li><li>实现Runnable接口，重写run方法。</li></ul></blockquote><h3 id="继承Thread类"><a href="#继承Thread类" class="headerlink" title="继承Thread类"></a>继承Thread类</h3><ol><li>当一个类继承了 Thread 类，该类就可以当做线程使用；</li><li>我们会重写 run 方法，写上自己的业务代码；</li><li>Thread 类 实现了 Runnable 接口的 run 方法。</li><li>关于<code>run()</code>方法：<ul><li><code>run()</code>方法只是一个普通方法，没有真正的启动一个线程，真正启动线程的方法是<code>start()</code>方法；</li><li>当调用线程对象的<code>start()</code>方法后会启动线程，无需等待<code>run()</code>方法中的业务代码执行完毕，此时线程进入就绪态；</li><li>当CPU调度使当前线程为运行线程时，该线程就进入了运行态，此时开始执行<code>run()</code>方法中的语句；</li><li><code>start()</code>方法会调用<code>start0()</code>方法，<code>start0() </code>是本地方法，是 JVM 调用, 底层是 c/c++实现。</li></ul></li></ol><h3 id="实现Runnable接口"><a href="#实现Runnable接口" class="headerlink" title="实现Runnable接口"></a>实现Runnable接口</h3><ol><li>Java是单继承的，在某些情况下一个类可能已经继承了某个父类，这时在用继承Thread类方法来创建线程显然不可能了；</li><li>java设计者们提供了另外一个方式创建线程，就是通过实现Runnable接口来创建线程；</li><li>实现<code>Runnable</code>接口的线程对象不能直接调用<code>start()</code>方法，需要创建Thread对象，把线程对象(实现 Runnable),放入Thread才可以调用线程相关方法。</li></ol><p>代码演示：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Thread</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//继承Thread类启动线程</span>        <span class="token class-name">Cat</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cat<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//实现Runnable接口启动线程</span>        <span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//dog.start(); 这里不能调用 start</span>        <span class="token comment">//创建了Thread对象，把dog对象(实现 Runnable),放入Thread</span>        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>cnt <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"猫咪叫~~"</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>cnt<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">"线程名："</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>cnt <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"小狗叫~~"</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>cnt<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">"线程名："</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="两种方法的区别"><a href="#两种方法的区别" class="headerlink" title="两种方法的区别"></a>两种方法的区别</h3><ol><li>从Java的设计来看，通过继承Thread或者实现Runnable接口来创建线程本质上没有区别，从JDK帮助文档中我们可以看到Thread类本身就实现了Runnable接口；</li><li>实现Runnable接口方式更加适合多个线程共享一个资源的情况，并且避免了单继承的限制，建议使用Runnable。</li></ol><h3 id="线程终止"><a href="#线程终止" class="headerlink" title="线程终止"></a>线程终止</h3><blockquote><p>可以通过为线程对象<strong>设置变量</strong>来通知线程终止。</p></blockquote><p>如下代码演示：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Thread</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>        <span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"线程等待2秒后退出..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dog<span class="token punctuation">.</span><span class="token function">setLoop</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置变量通知线程退出</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> loop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>loop<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"小狗叫~~"</span><span class="token operator">+</span><span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">"线程名："</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLoop</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> loop<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>loop <span class="token operator">=</span> loop<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="三、线程常用方法"><a href="#三、线程常用方法" class="headerlink" title="三、线程常用方法"></a>三、线程常用方法</h2><h3 id="第一组"><a href="#第一组" class="headerlink" title="第一组"></a>第一组</h3><ol><li><p><code>setName</code>：设置线程名称，使之与参数name相同</p></li><li><p><code>getName</code>：返回该线程的名称</p></li><li><p><code>start</code>：使该线程开始执行，Java虚拟机底层调用该线程的<code>start0()</code>方法</p></li><li><p><code>run</code>：调用线程对象run方法；</p></li><li><p><code>setPriority</code>：更改线程的优先级</p></li><li><p><code>getPriority</code>：获取线程的优先级</p></li><li><p><code>sleep</code>：线程的静态方法，在指定的毫秒数内让当前正在执行的线程休眠（暂停执行）</p></li><li><p><code>interrupt</code>：中断线程，但并没有真正的结束线程，所以一般用于中断正在休眠线程</p></li><li><p><code>getState()</code>：获取线程的状态</p></li></ol><h3 id="第二组"><a href="#第二组" class="headerlink" title="第二组"></a>第二组</h3><ol><li><code>yield</code>：线程的礼让。让出CPU，让其他线程执行，但礼让的时间不确定，所以也不一定礼让成功</li><li><code>join</code>：线程的插队。插队的线程一旦插队成功，则肯定先执行完插入的线程所有的任务</li></ol><h3 id="用户线程和守护线程"><a href="#用户线程和守护线程" class="headerlink" title="用户线程和守护线程"></a>用户线程和守护线程</h3><ol><li>用户线程：也叫工作线程，当线程的任务执行完或通知方式结束；</li><li>守护线程：一般是为工作线程服务的，当所有的用户线程结束，守护线程自动结束，常见的守护线程：垃圾回收机制。</li><li>将线程设置为守护线程：用<code>setDaemon(true)</code>设置。</li><li>代码演示：</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Thread</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>        <span class="token class-name">Dog</span> dog1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//dog.start(); 这里不能调用 start</span>        <span class="token comment">//创建了Thread对象，把dog对象(实现 Runnable),放入Thread</span>        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>dog1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//将thread1设置为守护线程，当main线程结束时，守护线程自动结束</span>        thread1<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"main线程运行中..."</span><span class="token operator">+</span> <span class="token string">" 线程名："</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"守护线程运行中..."</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>cnt<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">"线程名："</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="四、线程的状态"><a href="#四、线程的状态" class="headerlink" title="四、线程的状态"></a>四、线程的状态</h2><ol><li><p>JDK 中用<code>Thread.State</code>枚举了表示线程的几种状态</p><ul><li><code>NEW</code>：尚未启动的线程处于此状态。</li><li><code>RUNNABLE</code>在Java虚拟机中执行的线程处于此状态。</li><li><code>BLOCKED</code>被阻塞等待监视器锁定的线程处于此状态。</li><li><code>WAITING</code>正在等待另一个线程执行特定动作的线程处于此状态。</li><li><code>TIMED_WAITING</code>正在等待另一个线程执行动作达到指定等待时间的线程处于此状态。</li><li><code>TERMINATED</code>已退出的线程处于此状态。</li></ul></li><li><p>用<code>getState()</code>来获取当前线程的状态。</p></li><li><p>线程状态转化图</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204151313582.png" alt="image-20220413185506304"></p></li></ol><h2 id="五、线程同步机制"><a href="#五、线程同步机制" class="headerlink" title="五、线程同步机制"></a>五、线程同步机制</h2><h3 id="Synchronized"><a href="#Synchronized" class="headerlink" title="Synchronized"></a>Synchronized</h3><ol><li><p>线程同步</p><ul><li>在多线程编程，一些敏感数据不允许被多个线程同时访问，此时就使用同步访问技术，保证数据在任何同一时刻，最多有一个线程访问，以保证数据的完整性。</li><li>也可以这里理解：线程同步，即当有一个线程在对内存进行操作时，其他线程都不可以对这个内存地址进行操作，直到该线程完成操作，其他线程才能对该内存地址进行操作。</li></ul></li><li><p>具体同步方法：<code>Synchronized</code></p><ul><li><p>同步代码块：得到对象的锁才能操作同步代码</p><p><code>synchronized(对象){</code></p><p>​    <code>// 需要被同步的代码</code></p><p><code>}</code></p></li><li><p>同步方法</p><p><code>public synchronized void m(String name){</code></p><p>​    <code>// 需要被同步的代码</code></p><p><code>}</code></p></li></ul></li></ol><h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><ol><li><p>基本介绍</p><ul><li>Java语言中，引入了对象互斥锁的概念，来保证共享数据操作的完整性；</li><li>每个对象都对应于一个可称为“互斥锁”的标记，这个标记用来保证在任一时刻，只能有一个线程访问该对象；</li><li>关键字<code>synchronized</code>与对象的互斥锁联系。当某个对象用<code>synchronized</code>修饰时，表明该对象在任一时刻只能由一个线程访问；</li><li>同步的局限性：导致程序的执行效率要降低；</li><li>同步方法(非静态的)的锁可以是this(当前类对象)，也可以是其他对象(要求是同一个对象)；</li><li>同步方法(静态的)的锁为当前类本身，因为静态类加载时可能无对象。</li></ul></li><li><p>注意事项</p><ul><li>当修饰静态方法时，锁定的是当前<strong>类</strong>的<code> Class 对象</code>(类锁)</li><li>当修饰非静态方法时，锁定的是当前<strong>实例对象</strong>的 <code>this</code>(实例锁)</li></ul></li><li><p>实现的步骤</p><ul><li>先分析上锁的代码；</li><li>选择同步代码块或同步方法；</li><li>要求多个线程的锁的对象为<strong>同一个</strong>即可。</li></ul></li></ol><h4 id="互斥锁的几种实现方法"><a href="#互斥锁的几种实现方法" class="headerlink" title="互斥锁的几种实现方法"></a>互斥锁的几种实现方法</h4><p>主函数</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>        tickets1 tickets1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">tickets1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets1<span class="token punctuation">,</span> <span class="token string">"火车票窗口A"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets1<span class="token punctuation">,</span> <span class="token string">"火车票窗口B"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets1<span class="token punctuation">,</span> <span class="token string">"火车票窗口C"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//第二种票</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tickets2 tickets2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">tickets2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets2<span class="token punctuation">,</span> <span class="token string">"飞机票窗口A"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets2<span class="token punctuation">,</span> <span class="token string">"飞机票窗口B"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets2<span class="token punctuation">,</span> <span class="token string">"飞机票窗口C"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//第三种票</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tickets3 tickets3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">tickets3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets3<span class="token punctuation">,</span> <span class="token string">"高铁票窗口A"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets3<span class="token punctuation">,</span> <span class="token string">"高铁票窗口B"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>tickets3<span class="token punctuation">,</span> <span class="token string">"高铁票窗口C"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>同步方法</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> tickets1 <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> nums <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">//同步方法，只能保证一个对象的线程同步，若有多个对象，则不能保证同步</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"火车票已卖完！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 售出火车一张票，"</span> <span class="token operator">+</span> <span class="token string">" 剩余票数="</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">--</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>实例锁</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> tickets2 <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> nums <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">//当只有一个对象的线程时，可以使用synchronized(o/this)实现线程同步，o可以不为static</span>            <span class="token comment">//若有多个对象时，应对同一个对象加锁，static Object o = new Object();synchronized(o)</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token comment">/*o*/</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"飞机票已卖完！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 售出一飞机张票，"</span> <span class="token operator">+</span> <span class="token string">" 剩余票数="</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">--</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>类锁</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> tickets3 <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> nums <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">//对静态方法同步时，用类锁，即tickets3.class(类对象)</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>tickets3<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>nums <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"高铁票已卖完！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 售出一高铁张票，"</span> <span class="token operator">+</span> <span class="token string">" 剩余票数="</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">--</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><blockquote><p><strong>死锁是指两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程。</strong></p></blockquote><ol><li>产生的必要条件<ul><li>互斥使用，即当资源被一个线程占用时，别的线程不能使用；</li><li>不可抢占，资源请求者不能强制从资源占有者手中抢夺资源，资源只能由占有者主动释放；</li><li>请求和保持，当资源请求者在请求其他资源的同时保持对原因资源的占有；</li><li>循环等待，多个线程存在环路的锁依赖关系而永远等待下去，例如T1占有T2的资源，T2占有T3的资源，T3占有T1的资源，这种情况可能会形成一个等待环路。</li></ul></li><li>代码模拟死锁</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Thread</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DeadLock</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DeadLock</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"线程A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"线程B"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">DeadLock</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> flag<span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token class-name">Object</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token class-name">Object</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">DeadLock</span><span class="token punctuation">(</span><span class="token keyword">int</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o1<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"进入1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o2<span class="token punctuation">)</span> <span class="token comment">//获取o2的监视权</span>                <span class="token punctuation">{</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"进入2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o2<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"进入3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o1<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"进入4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="释放锁"><a href="#释放锁" class="headerlink" title="释放锁"></a>释放锁</h3><ol><li>下面操作会释放锁<ul><li>当前线程的同步方法、同步代码块执行结束；</li><li>当前线程在同步代码块、同步方法中遇到break、return；</li><li>当前线程在同步代码块、同步方法中出现了未处理的Error或Exception，导致异常结束；</li><li>当前线程在同步代码块、同步方法中执行了线程对象的wait（）方法，当前线程暂停，并释<br>放锁。</li></ul></li><li>下面操作不会释放锁<ul><li>线程执行同步代码块或同步方法时，程序调用<code>Thread.sleep()</code>、<code>Thread.yield()</code>方法暂停当前线程的执行，不会释放锁；</li><li>线程执行同步代码块时，其他线程调用了该线程的suspend（）方法将该线程挂起，该线程不会释放锁。提示：应尽量避免使用suspend（）和resume（）来控制线程，方法不再推荐使用。</li></ul></li></ol><h3 id="Lock"><a href="#Lock" class="headerlink" title="Lock"></a>Lock</h3><ol><li>基本介绍<ul><li>从JDK 5.0开始，Java提供了更强大的线程同步机制–通过显式定义同步锁对象来实现同步。同步锁使用Lock对象充当。</li><li><code>java.util.concurrent.locks.Lock</code>接口是控制多个线程对共享资源进行访问的工具。锁提供了对共享资源的独占访问，每次只能有一个线程对Lock对象加锁，线程开始访问共享资源之前应先获得Lock对象。</li><li><code>ReentrantLock</code>类实现了Lock，它拥有与<code>synchronized</code>相同的并发性和内存语义，在实现线程安全的控制中，比较常用的是<code>ReentrantLock</code>，可以显式加锁、释放锁，</li><li>注意：如果同步代码有异常，要将unlock()写入<strong>finally</strong>语句块</li></ul></li><li>使用方法</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReenTrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> viod <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span><span class="token punctuation">{</span>            <span class="token comment">//保证线程安全的代码</span>        <span class="token punctuation">}</span>        <span class="token keyword">finally</span><span class="token punctuation">{</span>            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>与<code>synchronized</code>比较<ul><li>Lock是<strong>显式锁</strong>(手动开启和关闭锁，别忘记关闭锁)，synchronized是<strong>隐式锁</strong>，出了作用域自动释放；</li><li>Lock只有代码块锁，<code>synchronized</code>有代码块锁和方法锁</li><li>使用Lock锁，JVM将花费较少的时间来调度线程，性能更好。并且具有更好的扩展性(提供更多的子类)。</li></ul></li></ol><h1 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h1><p>IO流体系图</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204141624066.png" alt="IO流体系图"></p><h2 id="一、File类"><a href="#一、File类" class="headerlink" title="一、File类"></a>一、File类</h2><ol><li>获取文件的相关信息<ul><li><code>file.getName()</code>：文件名字</li><li><code>file.getAbsolutePath()</code>：文件绝对路径</li><li><code>file.getParent()</code>：文件父级目录</li><li><code>file.length()</code>：文件大小(字节)</li><li><code>file.exists()</code>：文件是否存在</li><li><code>file.isFile()</code>：判断是不是一个文件</li><li><code>file.isDirectory()</code>：判断是不是一个目录</li></ul></li><li>新建和删除文件<ul><li><code>public boolean createNewFile()</code>：创建文件。若文件存在，则不创建，返回false</li><li><code> public boolean mkdir()</code>：创建一级目录</li><li><code>public boolean mkdirs()</code>：创建多级目录</li><li><code> public boolean delete()</code>：删除空目录或文件(Java中的删除不走回收站)</li></ul></li></ol><h2 id="二、IO流"><a href="#二、IO流" class="headerlink" title="二、IO流"></a>二、IO流</h2><h3 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h3><ol><li><p>按操作数据单位不同分为：字节流（8 bit）二进制文件，字符流（按字符）文本文件</p></li><li><p>按数据流的流向不同分为：输入流，输出流</p></li><li><p>按流的角色的不同分为：节点流，处理流/包装流</p></li><li><p>字节流和字符流</p><table><thead><tr><th>(抽象基类)</th><th>字节流</th><th>字符流</th></tr></thead><tbody><tr><td>输入流</td><td>InputStream</td><td>Reader</td></tr><tr><td>输出流</td><td>OutputStream</td><td>Writer</td></tr></tbody></table><ul><li>Java的IO流共涉及40多个类，实际上非常规则，都是从如上4个抽象基类派生的。</li><li>由这四个类派生出来的子类名称都是以其父类名作为子类名后缀。</li></ul></li></ol><h3 id="IO流的原理即流的分类"><a href="#IO流的原理即流的分类" class="headerlink" title="IO流的原理即流的分类"></a>IO流的原理即流的分类</h3><h4 id="InputStream-amp-Reader"><a href="#InputStream-amp-Reader" class="headerlink" title="InputStream &amp; Reader"></a>InputStream &amp; Reader</h4><blockquote><ul><li><p>InputStream 和 Reader 是所有<strong>输入流</strong>的基类。</p></li><li><p>程序中打开的文件 IO 资源不属于内存里的资源，垃圾回收机制无法回收该资源，所以应该<strong>显式关闭文件IO资源</strong></p></li></ul></blockquote><ol><li>InputStream<ul><li><code>int read()</code>：从输入流中读取数据的下一个字节。返回 0 到 255 范围内的 int 字节值。如果因<br>为已经到达流末尾而没有可用的字节，则返回值 -1。</li><li><code>int read(byte[] b)</code>：从此输入流中将最多 <code>b.length</code> 个字节的数据读入一个 byte 数组中。如果因为已经到达流末尾而没有可用的字节，则返回值 -1。否则以整数形式返回实际读取的字节数。</li><li><code>int read(byte[] b, int off,int len)</code>：将输入流中最多<code>len</code>个数据字节读入 byte 数组。尝试读取<code>len</code>个字节，但读取的字节也可能小于该值。以整数形式返回实际读取的字节数。如果因为流位于文件末尾而没有可用的字节，则返回值 -1。</li><li><code>public void close() throws IOException</code>：关闭此输入流并释放与该流关联的所有系统资源。</li></ul></li><li>Reader<ul><li><code>int read()</code>：读取单个字符。作为整数读取的字符，范围在 0 到 65535 之间 (0x00-0xffff)（2个字节的Unicode码），如果已到达流的末尾，则返回 -1</li><li><code>int read(char[] cbuf)</code>：将字符读入数组。如果已到达流的末尾，则返回 -1。否则返回本次读取的字符数。</li><li><code>int read(char[] cbuf,int off,int len)</code>：将字符读入数组的某一部分。存到数组cbuf中，从off处开始存储，最多读len个字符。如果已到达流的末尾，则返回 -1。否则返回本次读取的字符数。</li><li><code>public void close() throws IOException</code>：关闭此输入流并释放与该流关联的所有系统资源。</li></ul></li></ol><h4 id="OutputStream-amp-Writer"><a href="#OutputStream-amp-Writer" class="headerlink" title="OutputStream &amp; Writer"></a>OutputStream &amp; Writer</h4><blockquote><ul><li>OutputStream 和 Writer 是所有<strong>输出流</strong>的基类。</li></ul></blockquote><ol><li>OutputStream<ul><li><code>void write(int b)</code>：将指定的字节写入此输出流。write 的常规协定是：向输出流写入一个字节。要写入的字节是参数 b 的八个低位。b 的 24 个高位将被忽略。 即写入0~255范围的。</li><li><code>void write(byte[] b)</code>：将 <code>b.length</code> 个字节从指定的 byte 数组写入此输出流。write(b) 的常规协定是：应该与调用 <code>write(b, 0, b.length)</code> 的效果完全相同。</li><li><code>void write(byte[] b,int off,int len)</code>：将指定 byte 数组中从偏移量 off 开始的 len 个字节写入此输出流。</li><li><code>public void flush()throws IOException</code>：刷新此输出流并强制写出所有缓冲的输出字节，调用此方法指示应将这些字节立即写入它们预期的目标。</li><li><code>public void close() throws IOException</code>：关闭此输出流并释放与该流关联的所有系统资源。</li></ul></li><li>Writer<ul><li><code>void write(int c)</code>：写入单个字符。要写入的字符包含在给定整数值的 16 个低位中，16 高位被忽略。 即写入0 到 65535 之间的Unicode码。</li><li><code>void write(char[] cbuf)</code>：写入字符数组。</li><li><code>void write(char[] cbuf,int off,int len)</code>：写入字符数组的某一部分。从off开始，写入len个字符</li><li><code>void write(String str)</code>：写入字符串。</li><li><code>void write(String str,int off,int len)</code>：写入字符串的某一部分。</li><li><code>void flush()</code>：刷新该流的缓冲，则立即将它们写入预期目标。</li><li><code>public void close() throws IOException</code>：关闭此输出流并释放与该流关联的所有系统资源。</li></ul></li></ol><h3 id="节点流-文件流"><a href="#节点流-文件流" class="headerlink" title="节点流(文件流)"></a>节点流(文件流)</h3><ol><li>读取文件<ul><li>创建一个对象流，将已存在的文件加载进流：<code> FileReader fr = new FileReader(new File(“Test.txt”));</code></li><li>创建一个临时存放数据的数组：<code> char[] ch = new char[1024];</code></li><li>调用流对象的读取方法将流中的数据读入到数组中：<code> fr.read(ch);</code></li><li>关闭资源：<code> fr.close();</code></li><li>代码演示：</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">{</span>    fr<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"c:\\test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span>buf<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> len<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"read-Exception :"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>fr<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">try</span><span class="token punctuation">{</span>            fr<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"close-Exception :"</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>写入文件<ul><li>创建流对象，建立数据存放文件：<code>FileWriter fw = new FileWriter(new File(“Test.txt”));</code></li><li>调用流对象的写入方法，将数据写入流：<code>fw.write("HelloWorld!");</code></li><li>关闭流资源，并将流中的数据清空到文件中：<code>fw.close();</code></li><li>代码演示</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">{</span>    fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"Test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"atguigu-songhongkang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fw <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            fw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>注意事项<ul><li>定义文件路径时，可以用”<code>/</code>“或者”<code>\\</code>“。</li><li>在写入一个文件时，如果使用构造器<code>FileOutputStream(file)</code>，则目录下有同名文件将被覆盖。</li><li>如果使用构造器<code>FileOutputStream(file，true)</code>，则目录下的同名文件不会被覆盖，在文件内容末尾追加内容。</li><li>在读取文件时，必须保证该文件已存在，否则报异常。</li><li>字节流操作字节，比如：<code>.mp3， .avi， .rmvb， mp4， .jpg， .doc， .ppt</code></li><li>字符流操作字符，只能操作普通文本文件。最常见的文本文件：<code>.txt， .java， .c，.cpp</code>等语言的源代码。尤其注意.doc，excel，ppt这些<strong>不是</strong>文本文件。</li></ul></li></ol><h3 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h3><ol><li><p>基本介绍</p><ul><li><p>为了提高数据读写的速度，Java API提供了带缓冲功能的流类，在使用这些流类<br>时，会创建一个内部缓冲区数组，缺省使用**8192个字节(8Kb)**的缓冲区。</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204151313958.png" alt="缓冲流底层"></p></li><li><p>缓冲流要“套接”在相应的节点流之上，根据数据操作单位可以把缓冲流分为：</p><ul><li><code>BufferedInputStream</code> 和 <code>BufferedOutputStream</code></li><li><code>BufferedReader </code>和 <code>BufferedWriter</code></li></ul></li></ul></li><li><p>注意事项</p><ul><li><strong>当读取数据时</strong>，数据按块读入缓冲区，其后的读操作则直接访问缓冲区；</li><li>当使用<code>BufferedInputStream</code>读取字节文件时，<code>BufferedInputStream</code>会一次性从文件中读取8192个（8Kb），存在缓冲区中，直到缓冲区用完了，才重新从文件中读取下一个8192个字节数组；</li><li><strong>向流中写入字节时</strong>，不会直接写到文件，先写到缓冲区中直到缓冲区写满，<code>BufferedOutputStream</code>才会把缓冲区中的数据一次性写到文件里。使用方法<code>flush()</code>可以强制将缓冲区的内容全部写入输出流；</li><li>关闭流的顺序和打开流的顺序相反。只要关闭最外层流即可，关闭最外层流也会相应关闭内层节点流；</li><li><code>flush()</code>方法的使用：手动将buffer中内容写入文件；</li><li>如果是带缓冲区的流对象的<code>close()</code>方法，不但会关闭流，还会在关闭流之前刷新缓冲区，关闭后不能再写出。</li></ul></li><li><p>代码演示</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment">// 创建缓冲流对象：它是处理流，是对节点流的包装</span>    br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"d:\\IOTest\\source.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"d:\\IOTest\\dest.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> str<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>str <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 一次读取字符文本文件的一行字符</span>        bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一次写入一行字符串</span>        bw<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 写入行分隔符</span>    <span class="token punctuation">}</span>    bw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 刷新缓冲区</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>    <span class="token comment">// 关闭IO流对象</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>bw <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭过滤流时,会自动关闭它所包装的底层节点流</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>br <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h3><blockquote><ul><li>转换流提供了在字节流和字符流之间的转换</li><li>Java API提供了两个转换流：<ul><li><code>InputStreamReader</code>:(Reader的子类)InputStream转换为Reader</li><li><code>OutputStreamWriter</code>:(Writer的子类)OutputStream转换为Writer</li></ul></li><li>字节流中的数据都是字符时，转成字符流操作更高效。</li><li>很多时候我们使用转换流来处理文件乱码问题，实现编码和解码的功能。</li></ul></blockquote><ol><li><p>InputStreamReader</p><ul><li><p>实现将<strong>字节</strong>的输入流按指定字符集转换为<strong>字符</strong>的输入流，若不指定则默认。</p></li><li><p>需要和InputStream“套接”。</p></li><li><p>构造器：</p><ul><li><p><code> public InputStreamReader(InputStream in)</code></p></li><li><p><code>public InputSreamReader(InputStream in,String charsetName)</code></p><p>如：<code>Reader isr = new InputStreamReader(System.in,"gbk");</code></p></li></ul></li></ul></li><li><p>OutputStreamWriter</p><ul><li>实现将字符的输出流按指定字符集转换为字节的输出流。</li><li>需要和OutputStream“套接”。</li><li>构造器<ul><li><code>public OutputStreamWriter(OutputStream out)</code></li><li><code> public OutputSreamWriter(OutputStream out,String charsetName)</code></li></ul></li></ul></li><li><p>代码演示</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> testMyInput <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>    <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">InputStreamReader</span> isr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>fis<span class="token punctuation">,</span> <span class="token string">"GBK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">OutputStreamWriter</span> osw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>fos<span class="token punctuation">,</span> <span class="token string">"GBK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>isr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>osw<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>str <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>        bw<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        bw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="对象流"><a href="#对象流" class="headerlink" title="对象流"></a>对象流</h3><blockquote><p>引入：</p><p>有如下需求：</p><ol><li><p>将int num= 100 这个int数据保存到文件中，注意不是100数字，而是int 100，并且，能够从文件中直接恢复int 100。</p></li><li><p>将Dog dog = new Dog（”小黄”，3） 这个 dog对象 保存到 文件中，并且能够从文件恢复。</p><p><strong>上面的要求，就是能够将 基本数据类型或者对象进行序列化和反序列化操作</strong></p></li></ol></blockquote><ol><li>序列化与反序列化示意图</li></ol><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204151313750.png" alt="序列化与反序列化示意图"></p><ol start="2"><li>基本介绍<ul><li>功能：提供了对基本类型或对象类型的序列化和反序列化的方法</li><li><code>ObjectOutputStream</code>提供序列化功能</li><li><code>ObjectInputStream</code>提供反序列化功能</li></ul></li><li>使用细节<ul><li>读写顺序要一致；</li><li>要求序列化或反序列化对象，需要实现<code>Serializable</code>；</li><li>序列化的类中建议添加<code>SerialVersionUID</code>，为了提高版本的兼容性；</li><li>序列化对象时，默认将里面所有属性都进行序列化，但除了static或transient修饰的成员；</li><li>序列化对象时，要求里面属性的类型也需要实现序列化接口；</li><li>序列化具备可继承性，也就是如果某类已经实现了序列化，则它的所有子类也已经默认实现了序列化。</li></ul></li><li>序列化代码演示</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*需求：使用ObjectOutputStream 序列化 基本数据类型和一个 Dog对象（name，age），并保存到data.dat文件中*/</span><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//序列化后，保存的文件格式，不是存文本，而是按照他的格式来保存</span>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"src\\data.dat"</span><span class="token punctuation">;</span>        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//序列化数据到 e:\data.dat</span>        oos<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// int -&gt; Integer (实现了 Serializable)</span>        oos<span class="token punctuation">.</span><span class="token function">writeBoolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// boolean -&gt; Boolean (实现了 Serializable)</span>        oos<span class="token punctuation">.</span><span class="token function">writeChar</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// char -&gt; Character (实现了 Serializable)</span>        oos<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">9.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// double -&gt; Double (实现了 Serializable)</span>        oos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">"你好世界！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//String</span>        <span class="token comment">//保存一个 dog 对象</span>        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"POP"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"日本"</span><span class="token punctuation">,</span> <span class="token string">"白色"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"数据保存完毕(序列化形式)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token class-name">String</span> country<span class="token punctuation">;</span>    <span class="token class-name">String</span> colour<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> country<span class="token punctuation">,</span> <span class="token class-name">String</span> colour<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>country <span class="token operator">=</span> country<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>colour <span class="token operator">=</span> colour<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>反序列化代码演示</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*需求：使用ObjectlnputStream 读取 data.dat 并反序列化恢复数据*/</span><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// 1.创建流对象</span>        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\data.dat"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2.读取， 注意顺序</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token function">readBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token function">readChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 3.关闭</span>        ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"以反序列化的方式读取(恢复)ok~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token class-name">String</span> country<span class="token punctuation">;</span>    <span class="token class-name">String</span> colour<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> country<span class="token punctuation">,</span> <span class="token class-name">String</span> colour<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>country <span class="token operator">=</span> country<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>colour <span class="token operator">=</span> colour<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：100truea9.5你好世界！demo.Dog@54a097cc以反序列化的方式读取(恢复)ok~*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="标准输入输出流"><a href="#标准输入输出流" class="headerlink" title="*标准输入输出流"></a>*标准输入输出流</h3><ol><li><code>System.in</code>和<code>System.out</code>分别代表了系统标准的输入和输出设备</li><li>默认输入设备是：键盘，输出设备是：显示器</li><li>System.in的类型是InputStream</li><li>System.out的类型是PrintStream，其是FilterOutputStream 和OutputStream的子类</li><li>重定向：通过System类的setIn，setOut方法对默认设备进行改变。<ul><li><code>public static void setIn(InputStream in)</code></li><li><code>public static void setOut(PrintStream out)</code></li></ul></li></ol><h1 id="Properties类"><a href="#Properties类" class="headerlink" title="Properties类"></a>Properties类</h1><blockquote><p>引入：</p><p>有如下配置文件<code>mysql.properties</code>，内容为：</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">ip</span><span class="token punctuation">=</span><span class="token attr-value">192.168.0.13</span><span class="token attr-name">user</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">pwd</span><span class="token punctuation">=</span><span class="token attr-value">12345</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>设计程序读取相关值。</p></blockquote><ol><li>基本介绍<ul><li>专门用于读写配置文件的集合类；</li><li>配置文件的格式： <code>键=值</code></li><li>键值对无空格，值不需要用引号一起来，默认类型是String</li></ul></li><li>常见方法<ul><li><code>load</code>：加载配置文件的键值对到Properties对象</li><li><code>list</code>：将数据显示到指定设备</li><li><code>getProperty(key)</code>：根据键获取值</li><li><code>setProperty(key，value)</code>：设置键值对到Properties对象</li><li><code>store</code>：将Properties中的键值对存储到配置文件，在idea中，保存信息到配置文件，如果含有中文，会存储为unicode码</li></ul></li><li>配置文件读取代码</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//1. 创建 Properties 对象</span>        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2. 加载指定配置文件</span>        properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3. 把 k-v 显示控制台</span>        properties<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//4. 根据 key 获取对应的值</span>        <span class="token class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> pwd <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"用户名="</span> <span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"密码是="</span> <span class="token operator">+</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>配置文件设置代码</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//创建</span>        <span class="token comment">//1.如果该文件没有 key 就是创建</span>        <span class="token comment">//2.如果该文件有 key ,就是修改</span>        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"charset"</span><span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"李华"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注意保存时，是中文的 unicode 码值</span>        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"Jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注意保存时，英文正常保存</span>        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">,</span> <span class="token string">"888888"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//将 k-v 存储文件中即可</span>        properties<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql2.properties"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"保存配置文件成功~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Java笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多线程基础 </tag>
            
            <tag> IO流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java笔记（三）</title>
      <link href="posts/3.html"/>
      <url>posts/3.html</url>
      
        <content type="html"><![CDATA[<h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><ol><li><p>集合框架体系</p><ul><li><p>Collection接口特点方法</p></li><li><p>Collection接口的子接口：</p><ul><li><p>List实现类：<code>ArrayList、LinkedList、Vector</code></p></li><li><p>Set实现类：<code>HashSet、LinkedHashSet</code></p></li></ul></li><li><p>Map接口、特点方法、遍历方式</p></li><li><p>Map接口的实现类：<code>HashMap、Hashtable</code>等</p></li><li><p>Collections工具类的使用</p></li></ul></li><li><p>集合与数组</p><ul><li>数组：<ul><li>长度开始时必须指定，而且一旦指定，不能更改</li><li>保存的必须为同一类型的元素</li><li>使用数组进行增加元素的示意代码-比较麻烦</li></ul></li><li>集合<ul><li>可以动态保存任意多个对象，使用比较方便</li><li>提供了一系列方便的操作对象的方法：<code>add、remove、set、get</code>等</li><li>使用集合添加，删除新元素的代码简洁</li></ul></li></ul></li><li><p>集合体系图</p><ul><li><p><code>Collection</code>体系图(单列集合:<code>Collection</code>重要子接口<code>List和Set</code>，实现子类都是单列集合)</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204131523759.png" alt="image-20220405212347087"></p></li><li><p><code>Map</code>体系图(双列集合:<code>Map</code>接口的实现子类是双列集合，存放的 K-V)</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204052129438.png" alt="image-20220405212935368"></p></li></ul></li></ol><h2 id="二、Collection接口"><a href="#二、Collection接口" class="headerlink" title="二、Collection接口"></a>二、Collection接口</h2><h3 id="Collection接口实现类的特点"><a href="#Collection接口实现类的特点" class="headerlink" title="Collection接口实现类的特点"></a>Collection接口实现类的特点</h3><ol><li><code>Collection</code>实现子类可以存放多个元素，每个元素可以是<code>Object</code>；</li><li>有些<code>Collection</code>的实现类，可以存放重复的元素，有些不可以;</li><li>有些<code>Collection</code>的实现类，有些是有序的(<code>List</code>)，有些不是有序(<code>Set</code>);</li><li><code>Collection</code>接口没有直接的实现子类，是通过它的子接口Set和List来<br>实现的</li></ol><h3 id="Collection接口的常用方法"><a href="#Collection接口的常用方法" class="headerlink" title="Collection接口的常用方法"></a>Collection接口的常用方法</h3><p><strong>以实现子类<code>ArrayList</code>为例(Collection接口不能直接实例化)</strong></p><ol><li><code>add</code>：添加单个元素,<code>list.add("Jack");</code></li><li><code>remove</code>：删除指定元素,<code>list.remove(0);</code>或者<code>list.remove("Jack");</code></li><li><code>contains</code>：查找元素是否存在,<code>list.contains("Jack");</code></li><li><code>size</code>：获取元素个数</li><li><code>isEmpty</code>：判断是否为空</li><li><code>clear</code>：清空</li><li><code>addAll</code>：添加多个元素，创建新的<code>list2</code>,然后<code>list.addAll(list2);</code></li><li><code>containsAll</code>：查找多个元素是否都存在,创建新的<code>list2</code>,然后<code>list.containsAll(list2);</code></li><li><code>removeAll</code>：删除多个元素,创建新的<code>list2</code>,然后<code>list.removeAll(list2);</code></li></ol><h3 id="Collection接口遍历元素的方式"><a href="#Collection接口遍历元素的方式" class="headerlink" title="Collection接口遍历元素的方式"></a>Collection接口遍历元素的方式</h3><h4 id="使用Iterator迭代器"><a href="#使用Iterator迭代器" class="headerlink" title="使用Iterator迭代器"></a>使用<code>Iterator</code>迭代器</h4><ol><li><p>基本介绍</p><ul><li><code>Iterator</code>对象称为迭代器，主要用于遍历<code>Collection</code>集合中的元素；</li><li>所有实现了<code>Collection</code>接口的集合类都有一个<code>iterator()</code>方法，用以返回一个实现了<code>Iterator</code>接口的对象，即可以返回一个迭代器；</li><li><code>Iterator</code>的结构:有<code>while(iterator.hasNext())</code>判断，为<code>true</code>时，指针下移；</li><li><code>Iterator </code>仅用于遍历集合，<code>Iterator</code>本身并不存放对象。</li></ul></li><li><p>代码演示</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Collection</span> collection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"西游记"</span><span class="token punctuation">,</span><span class="token string">"吴承恩"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"红楼梦"</span><span class="token punctuation">,</span><span class="token string">"曹雪芹"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"三国演义"</span><span class="token punctuation">,</span><span class="token string">"罗贯中"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"水浒传"</span><span class="token punctuation">,</span><span class="token string">"施耐庵"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：[Book{name='西游记', author='吴承恩'}, Book{name='红楼梦', author='曹雪芹'}, Book{name='三国演义', author='罗贯中'}, Book{name='水浒传', author='施耐庵'}]</span><span class="token comment">//1. 用迭代器 Iterator 遍历collection集合</span><span class="token comment">//先得到collection的迭代器</span><span class="token class-name">Iterator</span> iterator <span class="token operator">=</span> collection<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用while遍历，快捷键 itit (ctrl+J:所有快捷键)</span><span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Object</span> book <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"书本："</span><span class="token operator">+</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：</span><span class="token comment">//书本：Book{name='西游记', author='吴承恩'}</span><span class="token comment">//书本：Book{name='红楼梦', author='曹雪芹'}</span><span class="token comment">//书本：Book{name='三国演义', author='罗贯中'}</span><span class="token comment">//书本：Book{name='水浒传', author='施耐庵'}</span><span class="token punctuation">}</span><span class="token comment">//2. 当while结束后，此时迭代器指向最后一个元素，若再次下移，则抛出异常</span><span class="token comment">//iterator.next();//NoSuchElementException</span><span class="token comment">//3. 如果需要再次遍历，则需要重置迭代器</span>iterator <span class="token operator">=</span> collection<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第二遍遍历</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"第二遍遍历"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Object</span> book <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"书本："</span><span class="token operator">+</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Book</span><span class="token punctuation">{</span><span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token class-name">String</span> author<span class="token punctuation">;</span><span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">String</span> author<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"Book{"</span> <span class="token operator">+</span><span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">", author='"</span> <span class="token operator">+</span> author <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">'}'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="增强for循环"><a href="#增强for循环" class="headerlink" title="增强for循环"></a>增强for循环</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collection</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Collection</span> collection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"西游记"</span><span class="token punctuation">,</span><span class="token string">"吴承恩"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"红楼梦"</span><span class="token punctuation">,</span><span class="token string">"曹雪芹"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"三国演义"</span><span class="token punctuation">,</span><span class="token string">"罗贯中"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>collection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"水浒传"</span><span class="token punctuation">,</span><span class="token string">"施耐庵"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：[Book{name='西游记', author='吴承恩'}, Book{name='红楼梦', author='曹雪芹'}, Book{name='三国演义', author='罗贯中'}, Book{name='水浒传', author='施耐庵'}]</span><span class="token comment">//1.增强for循环遍历列表(底层仍然是迭代器，可以理解为简化版迭代器)</span>        <span class="token comment">//快捷键 I</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> book <span class="token operator">:</span> collection<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"书本："</span><span class="token operator">+</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出</span><span class="token comment">//书本：Book{name='西游记', author='吴承恩'}</span><span class="token comment">//书本：Book{name='红楼梦', author='曹雪芹'}</span><span class="token comment">//书本：Book{name='三国演义', author='罗贯中'}</span><span class="token comment">//书本：Book{name='水浒传', author='施耐庵'}</span><span class="token punctuation">}</span><span class="token comment">//2. 增强for循环也可使用在数组遍历中</span><span class="token keyword">int</span> nums<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> nums<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Book</span><span class="token punctuation">{</span><span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token class-name">String</span> author<span class="token punctuation">;</span><span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">String</span> author<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"Book{"</span> <span class="token operator">+</span><span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">", author='"</span> <span class="token operator">+</span> author <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">'}'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="三、List"><a href="#三、List" class="headerlink" title="三、List"></a>三、List</h2><ol><li><p>List接口基本介绍</p><ul><li>List接口是Collection接口的子接口；</li><li>List集合类中<strong>元素有序</strong>(添加顺序和取出顺序一致)，且可一致；</li><li>List集合中的每个元素都有其对应的顺序索引，即支持索引；</li><li>List容器中的元素都对应一个整数型的序号记载其在容器中的位置，可根据序号存取容器中的元素；</li><li>JDK API中List接口实现的类有：<code>ArrayList、LinkedList和Vector</code>等。</li></ul></li><li><p>List常用方法</p><ul><li><code>void add(int index,Object ele)</code>：在index位置插入ele元素;</li><li><code>boolean addAll(int index， Collection eles)</code>：在index位置开始将eles中的所有元素添加进来;</li><li><code>Object get(int index)</code>：获取指定index位置的元素;</li><li><code>int indexOf(Object obj)</code>：返回obj在集合中<strong>首次</strong>出现的位置;</li><li><code>int lastIndexOf(Object obj)</code>：返回obj在当前集合中<strong>末次</strong>出现的位置;</li><li><code>Object remove(int index)</code>：移除指定index位置的元素，并返回此元素;</li><li><code>Object set(int index， Object ele)</code>：设置指定index位置的元素为ele，相当于是替换(要替换的元素必须存在);</li><li><code>List subList(int fromlndex， int tolndex)</code>：返回fromlndex到tolndex位置的子集合，<strong>左闭右开</strong>。</li></ul></li><li><p>三种遍历方式</p><ul><li>方式一：使用<code>iterator</code>(itit);</li><li>方式二：普通for循环；</li><li>方式三：增强for循环。</li></ul></li><li><p>对集合的冒泡排序</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//根据书的价格从小到大排序</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"西游记"</span><span class="token punctuation">,</span><span class="token number">89.1</span><span class="token punctuation">,</span><span class="token string">"吴承恩"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"红楼梦"</span><span class="token punctuation">,</span><span class="token number">59.3</span><span class="token punctuation">,</span><span class="token string">"曹雪芹"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"水浒传"</span><span class="token punctuation">,</span><span class="token number">90.3</span><span class="token punctuation">,</span><span class="token string">"施耐庵"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"三国"</span><span class="token punctuation">,</span><span class="token number">46.0</span><span class="token punctuation">,</span><span class="token string">"罗贯中"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> book <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//对集合进行冒泡排序</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======排序后======"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> book <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">List</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> n <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j  <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//取出对象</span><span class="token class-name">Book</span> b1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">)</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Book</span> b2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">)</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>price <span class="token operator">&gt;</span> b2<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span>b2<span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>b1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Book</span><span class="token punctuation">{</span><span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token class-name">String</span> author<span class="token punctuation">;</span><span class="token keyword">double</span> price<span class="token punctuation">;</span><span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">double</span> price<span class="token punctuation">,</span><span class="token class-name">String</span> author<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"书名："</span><span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"\t\t价格："</span><span class="token operator">+</span>price<span class="token operator">+</span><span class="token string">"\t\t作者："</span><span class="token operator">+</span>author<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//输出：</span><span class="token comment">//书名：西游记价格：89.1作者：吴承恩</span><span class="token comment">//书名：红楼梦价格：59.3作者：曹雪芹</span><span class="token comment">//书名：水浒传价格：90.3作者：施耐庵</span><span class="token comment">//书名：三国价格：46.0作者：罗贯中</span><span class="token comment">//======排序后======</span><span class="token comment">//书名：三国价格：46.0作者：罗贯中</span><span class="token comment">//书名：红楼梦价格：59.3作者：曹雪芹</span><span class="token comment">//书名：西游记价格：89.1作者：吴承恩</span><span class="token comment">//书名：水浒传价格：90.3作者：施耐庵</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><ol><li>ArrayList的注意事项</li></ol><ul><li><code>ArrayList</code>可以加入多个、任何元素，包括<strong>null</strong>；</li><li><code>ArrayList</code>是由数组来实现<strong>数据</strong>存储的;</li><li><code>ArrayList</code>基本等同于Vector，除了ArrayList是<strong>线程不安全</strong>(执行效率高),由源码值并无<code>synchronized</code>，在多线程情况下，不建议使用ArrayList。</li></ul><ol start="2"><li>ArrayList扩容机制(使用IDEA的Debug功能看源码)</li></ol><ul><li><p>ArrayList中维护了一个<strong>Object</strong>类型的数组elementData;<code>transient Object[] elementData；</code>//transient 表示短暂的，表示该属性不会被序列化</p></li><li><p>当创建ArrayList对象时，如果使用的是无参构造器<code>ArrayList()</code>，则初始elementData容量为0，第1次添加，则扩容elementData为<strong>10</strong>，如需要再次扩容，则扩容elementData为1.5倍；<a href="https://gitee.com/gqd000/blogimage/raw/master/img/202204061715922.svg">ArrayLis()无参构造器扩容源码分析图</a></p></li><li><p>ArrayLis()无参构造器扩容源码分析图</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204131537245.jpeg" alt="ArrayLis()无参构造器扩容源码分析图"></p></li><li><p>如果使用的是指定大小的构造器<code>ArrayList(int n)</code>，则初始elementData容量为指定大小，如果需要扩容，则直接扩容elementData为1.5倍。</p></li></ul><h3 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h3><ol><li><p>Veactor的注意事项</p><ul><li>Vector底层也是一个对象数组：<code>protect Object[] elementDate;</code></li><li>Vector是线程安全的，Vector类的操作方法带有<code>synchronized</code>;</li><li>在开发中，需要线程安全是，考虑用Vector。</li></ul></li><li><p>Vector和ArrayList的比较</p><table><thead><tr><th></th><th>底层结构</th><th>版本</th><th>线程安全及效率</th><th>扩容参数</th></tr></thead><tbody><tr><td>ArrayList</td><td>可变数组</td><td>JDK1.2</td><td>不安全，效率高</td><td>有参构造：1.5<br>无参构造：先10，满后1.5倍</td></tr><tr><td>Vector</td><td>可变数组</td><td>JDK1.0</td><td>安全，效率低</td><td>有参构造：2<br>无参构造：先10，满后2倍</td></tr></tbody></table></li></ol><h3 id="LinkList"><a href="#LinkList" class="headerlink" title="LinkList"></a>LinkList</h3><ol><li>基本情况<ul><li>LinkList底层实现了双向链表和双端队列特点；</li><li>可以添加任意元素(可重复),包括null；</li><li>线程不安全，没有实现同步。</li></ul></li><li>底层结构<ul><li>LinkedList底层维护了一个双向链表；</li><li>LinkedList中维护了两个属性first和last分别指向首节点和尾节点；</li><li>每个节点（Node对象）里面又维护了<code>prev，next，item</code>三个属性，其中通过prev指向前一个，通过next指向后一个节点。最终实现双向链表；</li><li>所以LinkedList的元素的添加和删除，不是通过数组完成的，相对来说效率较高。</li></ul></li></ol><h3 id="ArrayList和LinkList"><a href="#ArrayList和LinkList" class="headerlink" title="ArrayList和LinkList"></a>ArrayList和LinkList</h3><ol><li><p>ArrayList和LinkList的比较</p><table><thead><tr><th></th><th>底层结构</th><th>增删效率</th><th>改查效率</th></tr></thead><tbody><tr><td>ArrayList</td><td>可变数组</td><td>较低(数组扩容)</td><td>较高</td></tr><tr><td>LinkList</td><td>双向链表</td><td>较高(链表加节点)</td><td>较低</td></tr></tbody></table></li><li><p>如何选取ArrayList和LinkList</p><ul><li>如果我们改查的操作多，选择ArrayList；</li><li>如果我们增删的操作多，选择LinkedList；</li><li>一般来说，在程序中，80%-90%都是查询，因此大部分情况下会选择ArrayList；</li><li>在一个项目中，根据业务灵活选择，也可能这样，一个模块使用的是ArrayList，另外一个模块是LinkedList，也就是说，要根据业务来进行选择。</li></ul></li></ol><h2 id="四、Set"><a href="#四、Set" class="headerlink" title="四、Set"></a>四、Set</h2><ol><li>基本介绍<ul><li>无序(添加和取出的顺序比一至)，没有索引；</li><li>不允许出现重复元素，所以最多包含一个null；</li><li><code>JDK API</code>中Set接口实现的类由<code>HashSet、TreeSet</code>等。</li></ul></li><li>常用方法<ul><li>和List接口一样，Set接口也是Collection的子接口，因此常用方法和Collection接口一样。</li></ul></li><li>遍历方式<ul><li>迭代器；</li><li>增强for循环；</li><li><strong>不能使用索引</strong>。</li></ul></li></ol><h3 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h3><ol><li><p>基本介绍</p><ul><li>HashSet实现了Set接口；</li><li>HashSet实际上是<code>HashMap</code>；</li><li>可以存放null值，但是只能有一个null；</li><li>HashSet不保证元素是有序的，取决于hash后，再确定索引的结果（即，不保证存放元素的顺序和取出顺序一致）；</li><li>不能有<strong>重复</strong>元素或对象。</li></ul></li><li><p>底层原理</p><ul><li>HashSet 底层 HashMap；</li><li>添加一个元素时，先得到hash值(<strong>算法</strong>：<code>(h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)</code>,不是简单的<code>hashCode()得出的。</code>)，再会转成索引值i(<code>i = (n - 1) &amp; hash</code>)；</li><li><code>HashSet</code>中，元素储存的位置与<strong>元素的hash值</strong>和<strong>当前集合容器的个数</strong>有关(<code>tab[(n-1)&amp;hash]</code>)；</li><li>找到存储数据表table，看这个索引位置是否已经存放的有元素：<ul><li>如果没有，直接加入；</li><li>如果有，调用equals比较，如果相同，就放弃添加，如果不相同，则添加到最后；</li></ul></li></ul></li><li><p>扩容机制</p><ul><li>HashSet底层是HashMap，第一次添加时，table数组扩容到16，临界值(<code>threshold</code>)是16,加载因子(<code>loadFactor</code>)是0.75，故第二次扩容临界值为12；</li><li>如果table数组使用到了临界值12，就会扩容到<code>16*2=32</code>，新的临界值就是<code>32 * 0.75 = 24</code>，依次类推；</li><li>在Java8中，如果一条链表的元素个数到达<code>TREEIFY THRESHOLD</code>(默认是8)，并且table的大小<code>&gt;=MIN TREEIFY CAPACITY</code>（默认64），就会进行树化(红黑树)，否则依然采用数组扩容机制。</li></ul></li></ol><h3 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h3><ol><li>基本说明<ul><li>LinkedHashSet 是HashSet 子类；</li><li>LinkedHashSet 底层是一个 <code>LinkedHashMap</code>，底层维护了一个<strong>数组+双向链表</strong>；</li><li>LinkedHashSet 根据元素的hashCode值来决定元素的存储位置，同时使用链表维护元素的次序，这使得元素看起来是以插入顺序保存的；</li><li>LinkedHashSet 不允许添重复元素。</li></ul></li><li>底层原理<ul><li>在LinkedHastSet中维护了一个hash表和<strong>双向链表</strong>(LinkedHashSet有<code>head</code>和<code>tail</code>属性);</li><li>每个节点由<code>befor</code>和<code>after</code>，属性，这样就构成了双向链表；</li><li>在添加一个元素时，先求hash值，再求索引，确定该元素在table的位置，然后将添加的元素加入到双向链表(如果已经存在，不添加[原则和hashset一样]);</li><li>这样的话，我们遍历LinkedHashSet也能确保插入顺序和遍历顺序一致(有序性)。</li></ul></li></ol><h2 id="五、Map"><a href="#五、Map" class="headerlink" title="五、Map"></a>五、Map</h2><ol><li><p>Map接口实现类的特点(使用实现类 HashMap)</p><ul><li>Map 与 Collection 并列存在。用于保存具有映射关系的数据:Key-Value(双列元素);</li><li>Map 中的 key 和 value 可以是任何引用类型的数据，会封装到 <code>HashMap$Node</code> 对象中;</li><li>Map 中的 key 不允许重复，原因和 HashSet 一样，若key重复，value不重复，则相当于替换，即用新的value替换原来的value；</li><li>Map 中的 value 可以重复；</li><li>Map 的 key 可以为 null, value 也可以为 null，注意：key 只能有一个 null，value 可以有多个为 null；</li><li><strong>常用</strong> String 类作为 Map 的 key，但key可以用Object类；</li><li>key 和 value 之间存在单向一对一关系，即通过指定的 key 总能找到对应的 value。</li></ul></li><li><p>Map中<code>key-value</code>存放位置解读</p><ul><li><p>一对k-v是放在一个HashMap$Node中的，<code>HashMap$Node node = newNode(hash,key, value,null)</code>；</p></li><li><p>为了方便程序员的遍历，还会创建EntrySet集合，该集合存放的元素的类型Entry，而一个Entry对象有K和V，存放的位置如下：<code>transient Set&lt;Map.Entry&lt;K，V&gt;&gt; entrySet</code>，但<code>enytrySet</code>中的K-V只是<strong>引用</strong>了<code>HashMap$Node</code>中的K-V；</p></li><li><p>entrySet中，定义的类型是Map.Entry，但是实际上存放的还是<code>HashMap$Node</code>这是因为实现接口:<br><code>static class Node&lt;K,V&gt; impLements Map.Entry&lt;K,V&gt;</code>；</p></li><li><p>当把HashMap$Node对象存放到entrySet就方使我们的遍历，因为Map.Entry提供了重要方法<br><code>K：getKey()； V：getValue()；</code>。</p></li><li><p>图示：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204131523894.png" alt="image-20220409103953808"></p></li><li><p>代码调试：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204091111781.png" alt="image-20220409111119668"></p></li></ul></li><li><p>Map常用方法</p><ul><li><code>remove</code>:根据键删除映射关系,<code>map.remove(null);</code></li><li><code>get</code>：根据键获取值,<code>Object val = map.get("1");</code></li><li><code>size</code>:获取元素个数,<code>System.out.println("k-v=" + map.size());</code></li><li><code>isEmpty</code>:判断个数是否为0,<code>System.out.println(map.isEmpty());</code></li><li><code>clear</code>:清除 k-v,<code>map.clear();</code></li><li><code>containsKey</code>:查找键是否存在,<code>System.out.println("结果=" + map.containsKey("1"));</code></li></ul></li><li><p>Map的六种遍历方式</p><ul><li>第一组：先取出所有的Key(<code>map.keySet()</code>), 通过 Key 取出对应的 Value<ul><li>增强<code>for</code>循环：遍历<code>keySet</code>中的所有key，根据key取出value(<code>map.get(key)</code>)；</li><li>迭代器：用<code>Iterator</code>遍历<code>keySet</code>中的所有key，根据key取出value(<code>map.get(key)</code>)。</li></ul></li><li>第二组：直接把所有的values(<code>map.values()</code>)取出，再遍历<ul><li>增强<code>for</code>循环：遍历<code>value</code>中的所有value；</li><li>迭代器：用<code>Iterator</code>遍历<code>value</code>中的所有value。</li></ul></li><li>第三组：通过EntrySet(<code>map.entrySet()</code>)来获取 k-v(向下转型：<code>Map.Entry m = (Map.Entry) entry;</code>)<ul><li>增强<code>for</code>循环：遍历<code>entrySet</code>中的所有对象，根据<code>m.getKey()</code>取出key，根据<code>m.getValue()</code>取出value；</li><li>迭代器：用<code>Iterator</code>遍历<code>entrySet</code>中的所有对象，根据<code>m.getKey()</code>取出key，根据<code>m.getValue()</code>取出value。</li></ul></li><li>代码演示：</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">,</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">,</span><span class="token string">"你好"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"4"</span><span class="token punctuation">,</span><span class="token string">"世界"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token string">"！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：{1=hello, 2=world, 3=你好, 4=世界, 5=！}</span><span class="token comment">//第一组：先取出所有的Key(`map.keySet()`), 通过 Key 取出对应的 Value</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=====第一组====="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Set</span> keySet <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1. 增强for循环</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"增强for循环："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> keySet<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//2. 迭代器</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"迭代器："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Iterator</span> iterator1 <span class="token operator">=</span> keySet<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>iterator1<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Object</span> next <span class="token operator">=</span>  iterator1<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//第二组：直接把所有的values(`map.values()`)取出，再遍历</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=====第二组====="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Collection</span> values <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1. 增强for循环</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"增强for循环："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> values<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//2. 迭代器</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"迭代器："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Iterator</span> iterator2 <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Object</span> next <span class="token operator">=</span>  iterator2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//第三组：通过EntrySet(`map.entrySet()`)来获取 k-v(向下转型：`Map.Entry m = (Map.Entry) entry;`)</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=====第三组====="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Set</span> entrySet <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//EntrySet&lt;Map.Entry&lt;K,V&gt;&gt;</span><span class="token comment">//1. 增强for循环</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"增强for循环："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> entry <span class="token operator">:</span> entrySet<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//将 entry 转成 Map.Entry</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">)</span> entry<span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"key: "</span><span class="token operator">+</span>m<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"；value: "</span><span class="token operator">+</span>m<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//2. 迭代器</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"迭代器："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Iterator</span> iterator3 <span class="token operator">=</span> entrySet<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>iterator3<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Object</span> next <span class="token operator">=</span>  iterator3<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//向下转型成 Map.Entry</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">)</span> next<span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"key: "</span><span class="token operator">+</span>m<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"；value: "</span><span class="token operator">+</span>m<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：{1=hello, 2=world, 3=你好, 4=世界, 5=！}=====第一组=====增强for循环：helloworld你好世界！迭代器：helloworld你好世界！=====第二组=====增强for循环：helloworld你好世界！迭代器：helloworld你好世界！=====第三组=====增强for循环：key: 1；value: hellokey: 2；value: worldkey: 3；value: 你好key: 4；value: 世界key: 5；value: ！迭代器：key: 1；value: hellokey: 2；value: worldkey: 3；value: 你好key: 4；value: 世界key: 5；value: ！ */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h4><ol><li><p>基本说明</p><ul><li>Map接口的常用实现类：<code>HashMap</code>，<code>Hashtable</code>和<code>Properties</code>；</li><li>HashMap是Map接口使用频率最高的实现类；</li><li>HashMap 以key-val 对的方式来存储数据(HashMap$Node类型)；</li><li>key不能重复，但是值可以重复，允许使用null键和null值；</li><li>如果添加相同的key，则会覆盖原来的<code>key-val</code>，等同于修改，(key不会替换， val会替换)与HashSet一样，不保证映射的顺序，因为底层是以hash表的方式来存储的（JDK8的hashMap底层数组+链表+红黑树）；</li><li>HashMap没有实现同步，因此是线程不安全的，方法没有做同步互斥的操作，没有<code>synchronized</code>。</li></ul></li><li><p>HashMap底层机制</p><ul><li>HashMap底层维护了Node类型的数组table，默认为<code>null</code></li><li>当创建对象时，将加载因子(<code>loadfactor</code>)初始化为<strong>0.75</strong>；</li><li>当添加key-val时，通过key的哈希值得到在table的索引。然后判断该索引处是否有元素，如果没有元素直接添加。如果该索引处有元素，继续判断该元素的key和准备加入的key是否相等，如果相等，则直接替换val；如果不相等需要判断是树结构还是链表结构，做出相应处理。如果添加时发现容量不够，则需要扩容；</li><li>第1次添加，则需要扩容table容量为16，临界值(threshold)为12(16*0.75)以后再扩容，则需要扩容table容量为原来的2倍(32)，临界值为原来的2倍，即24，依次类推；</li><li>在Java8中，如果一条链表的元素个数超过TREEIFY_THRESHOLD(默认是8)，并且<code>table.size()&gt;= MIN TREEIFY CAPACITY(默认64)</code>，就会进行树化(红黑树)。</li></ul></li><li><p>HashMap扩容树化</p><blockquote><p>如果table长度小于常量<code>MIN_TREEIFY_CAPACITY</code>时，不会变为红黑树，而是调用<code>resize()</code>方法进行扩容。<code>MIN_TREEIFY_CAPACITY</code>的默认值是<strong>64</strong>。显然HashMap认为，虽然链表长度超过了<strong>8</strong>，但是table长度太短，只需要扩容然后<strong>重新散列</strong>一下就可以。当同时满足链表长度超过8，table长度超过64才会树化。</p></blockquote></li></ol><h4 id="HashTable"><a href="#HashTable" class="headerlink" title="HashTable"></a>HashTable</h4><ol><li><p>基本介绍</p><ul><li>存放的元素是键值对：即K-V；</li><li>hashtable的键和值都不能为null，否则会抛出<code>NullPointerException</code>；</li><li>hashTable 使用方法基本上和HashMap一样；</li><li>hashTable 是线程安全的(<code>synchronized</code>),hashMap是线程不安全的。</li></ul></li><li><p>底层机制</p><ul><li>底层有数组 Hashtable$Entry[]，初始化大小为11；</li><li>临界值：<code>table.size()*0.75</code>;</li><li>扩容：<code>int newCapacity = (oldCapacity &lt;&lt; 1) + 1;</code>即原来容量大小的2倍加1。</li></ul></li><li><p>HashTable和HashMap的比较</p><table><thead><tr><th></th><th>版本</th><th>线程安全</th><th>效率</th><th>是否允许null</th></tr></thead><tbody><tr><td>HashMap</td><td>1.2</td><td>不安全</td><td>高</td><td>允许</td></tr><tr><td>HashTable</td><td>1.0</td><td>安全</td><td>较低</td><td>不允许</td></tr></tbody></table></li></ol><h4 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h4><ol><li>基本介绍<ul><li><code>Properties</code>类继承自<code>Hashtable</code>类并且实现了Map接口，也是使用一种键值对的形式来保存数据；</li><li>使用特点和<code>Hashtable</code>类似；</li><li>Properties继承了<code>Hashtable</code>，可任意通过k-v存放数据，key和value都不能为<code>null</code>。</li><li>Properties 还可以用于从<code>xxx.properties</code>文件中，加载数据到Properties类对象，并进行读取和修改；</li><li>说明：<code>xxx.properties</code>文件通常作为<strong>配置文件</strong>，IO流中详细说明；</li></ul></li></ol><h2 id="六、TreeSet和TreeMap"><a href="#六、TreeSet和TreeMap" class="headerlink" title="六、TreeSet和TreeMap"></a>六、TreeSet和TreeMap</h2><ol><li>TreeSet(单列)<ul><li>当我们使用无参构造器，创建 TreeSet 时，仍然是无序的；</li><li>使用 TreeSet 提供的一个构造器，可以传入一个比较器(匿名内部类)并指定排序规则；</li><li>自定义排序代码如下：</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//用实现 Comparator 接口的匿名内部类实现比较器</span><span class="token class-name">TreeSet</span> treeSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//按照字符串首字母的大小进行排序</span><span class="token comment">//return ((String)o1).compareTo((String) o2);//升序</span><span class="token comment">//[aq, befee, c, def]</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>o2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//降序</span><span class="token comment">//[def, c, befee, aq]</span><span class="token comment">//按照字符串的长度进行排序</span><span class="token comment">//return ((String) o1).length() - ((String) o2).length();//升序</span><span class="token comment">//[c, aq, def, befee]</span><span class="token comment">//return ((String) o2).length() - ((String) o1).length();//降序</span><span class="token comment">//[befee, def, aq, c]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"aq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"def"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"befee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>treeSet<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>TreeMap(双列)<ul><li>使用默认的构造器，创建 TreeMap, 是无序的(也没有排序)；</li><li>使用 TreeMap 提供的一个构造器，可以传入一个比较器(匿名内部类)并指定排序规则，此处为键(Key)排序；</li><li>排序代码：</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">TreeMap</span> treeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//按照字符串首字母的大小进行排序</span><span class="token comment">//return ((String)o1).compareTo((String) o2);//升序</span><span class="token comment">//{aq=1, befee=3, c=4, def=2}</span><span class="token comment">//return ((String)o2).compareTo((String) o1);//降序</span><span class="token comment">//{def=2, c=4, befee=3, aq=1}</span><span class="token comment">//按照字符串的长度进行排序</span><span class="token comment">//return ((String) o1).length() - ((String) o2).length();//升序</span><span class="token comment">//{c=4, aq=1, def=2, befee=3}</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//降序</span><span class="token comment">//{befee=3, def=2, aq=1, c=4}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"aq"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"def"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"befee"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>treeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>treeMap<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="七、集合的选择"><a href="#七、集合的选择" class="headerlink" title="七、集合的选择"></a>七、集合的选择</h2><blockquote><p>判断储存的类型(一组对象(单列)或一组键值对(双列))</p></blockquote><ol><li>一组对象(单列)：Collection接口<ul><li>允许重复：List<ul><li>增删多：LinkList(底层维护了一个双向链表)</li><li>改查多：ArrayList(底层维护了一个Object类的可变数组)</li></ul></li><li>不允许重复：Set<ul><li>无序：HashSet(底层是HashMap，维护了一个哈希表，即数组+链表+红黑树)</li><li>排序：TreeSet</li><li>插入和取出顺序一致：LinkedHashSet，维护数组+双向链表</li></ul></li></ul></li><li>一组键值对(双列)：Map<ul><li>键无序：HashMap(底层是哈希表，JDK7：数组+链表；JDK8：数组+链表+红黑树)</li><li>键排序：TreeMap</li><li>键插入和取出顺序一致：LinkedHashMap</li><li>读取文件：Properties</li></ul></li></ol><h2 id="八、Collection工具类"><a href="#八、Collection工具类" class="headerlink" title="八、Collection工具类"></a>八、Collection工具类</h2><blockquote><ul><li>Collections 是一个操作 Set， List 和Map等集合的工具类；</li><li>Collections中提供了一系列静态的方法对集合元素进行排序、查询和修改等操作。</li></ul></blockquote><ol><li><p>排序(均为静态方法)</p><ul><li><code>reverse(List)</code>：反转List 中元素的顺序；</li><li><code>shuffle(List)</code>：对List集合元素进行随机排序；</li><li><code>sort(List)</code>：根据元素的自然顺序对指定List集合元素按升序排序；</li><li><code>sort(List，Comparator)</code>：根据指定的Comparator产生的顺序对List集合元素进行排序；</li><li><code>swap(List， int， int)</code>：将指定list集合中的i处元素和j处元素进行交换。</li></ul></li><li><p>查找和替换</p><ul><li><code>Object max(Collection)</code>：根据元素的自然顺序，返回给定集合中的最大元素；</li><li><code>Object max(Collection， Comparator)</code>：根据 Comparator指定的顺序，返回给定集合中的最大元素；</li><li><code>Object min(Collection)</code>：根据元素的自然顺序，返回给定集合中的最小元素；</li><li><code>Object min(Collection， Comparator)</code>：根据 Comparator指定的顺序，返回给定集合中的最小元素；</li><li><code>int frequency(Collection， Object)</code>：返回指定集合中指定元素的出现次数；</li><li><code>void copy(List dest，List src)</code>：将src中的内容复制到dest中；</li><li><code>boolean replaceAll(List list,Object oldVal,Object newVal)</code>：使用新值替换List对象的所有旧值。</li></ul></li></ol><h1 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h1><h2 id="一、泛型的介绍："><a href="#一、泛型的介绍：" class="headerlink" title="一、泛型的介绍："></a>一、泛型的介绍：</h2><ol><li><p>泛型的引入</p><blockquote><p> 有如下需求：在一个ArrayList中创建添加n个指定类的对象(如Dog)，并遍历输出。</p></blockquote><ul><li><p>传统方法：<code>ArrayList arrayList = newArrayList();</code></p><ul><li><p>遍历过程：<code>Dog-加入-&gt; Object-取出-&gt; Dog</code></p><p>//放入到ArrayList 会先转成 Object，在取出时，还需要转换成Dog</p></li><li><p>缺点：不能对加入到集合ArrayList中的数据类型进行约束(不安全),遍历的时候，需要进行类型转换，如果集合中的数据量较大，对效率有影响。</p></li></ul></li><li><p>使用泛型：<code>ArrayList&lt;Dog&gt; arrayList = newArrayList&lt;Dog&gt;();</code></p><ul><li><p>遍历过程：<code>Dog-&gt; Dog-&gt; Dog</code></p><p>//放入时，和取出时，不需要类型转换，提高效率</p></li><li><p>优点：编译时，检查添加元素的类型，提高了安全性减少了类型转换的次数，提高效率。</p></li></ul></li></ul></li><li><p>泛型的基本介绍</p><ul><li>泛（广泛）型（类型） =&gt; <code>Integer，String，Dog</code>；</li><li>泛型又称参数化类型，是Jdk5.0出现的新特性，解决数据类型的安全性问题；</li><li>在类声明或实例化时只要指定好需要的具体的类型即可；</li><li>Java泛型可以保证如果程序在编译时没有发出警告，运行时就不会产生ClassCastException异常。同时，代码更加简洁、健壮；</li><li>泛型的作用是：可以在类声明时通过一个标识表示类中某个属性的<strong>类型</strong>，或者是某个方法的返回值的类型，或者是参数类型。</li></ul><p>代码举例：</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span><span class="token function">getNums</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span><span class="token function">getNums</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//输出：false</span>        <span class="token comment">//person1.getNums():Integer类型</span>        <span class="token comment">//person2.getNums():String类型</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token class-name">E</span> nums<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">E</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>nums <span class="token operator">=</span> nums<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getNums</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> nums<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="二、泛型的语法"><a href="#二、泛型的语法" class="headerlink" title="二、泛型的语法"></a>二、泛型的语法</h2><ol><li><p>泛型的声明</p><p><code>interface接口&lt;T&gt;{}</code>和<code>class类&lt;K，V&gt;{}</code></p><ul><li>其中，T，K，V不代表值，而是表示类型；</li><li>任意字母都可以。常用T表示，是Type的缩写。</li></ul></li><li><p>泛型的实例化</p><ul><li>要在类名后面指定类型参数的值(类型)。如：<ul><li><code>List&lt;String&gt; strList = new ArrayList&lt;String&gt;()</code></li><li><code>List&lt;String&gt; strList = new ArrayList&lt;&gt;()</code></li><li><code>Iterator&lt;Customer&gt; iterator = customers.iterator()</code></li><li><code>Map Hashmap&lt;String,Dog&gt; map = new Map&lt;&gt;();</code></li></ul></li></ul></li><li><p>泛型使用的注意事项和细节</p><ul><li>在声明时，<code>&lt; &gt;</code>中的T、K、E等只能是引用类型，不能是基本数据类型<code>int、double</code>等；</li><li>在给泛型指定具体类型后，可以传入该类型或者其<strong>子类类型</strong>；</li><li>如果我们这样写<code>List list3 = new ArrayList();</code>默认给它的泛型是<code>&lt;E&gt;</code>，E就是<code>Object</code>。</li></ul></li></ol><h2 id="三、自定义泛型"><a href="#三、自定义泛型" class="headerlink" title="三、自定义泛型"></a>三、自定义泛型</h2><ol><li>自定义泛型类<ul><li>基本语法：<code>class 类名 &lt;T/R...&gt;{}</code>//表示可以有多个泛型</li><li>使用细节<ul><li>普通成员可以使用泛型(属性、方法)；</li><li>使用泛型的数组，不能初始化，因为数组在<code>new</code>时不能确定T的类型，就无法在内存开空间，只能   是先声明：<code>T []ts</code>；</li><li>静态方法中不能使用类的泛型，因为静态是和类相关的,二泛型是在对象创建的时候才明确，在类加载时，对象还没有创建，所以，如果静态方法和静态属性使用了泛型，JVM就无法完成初始化；</li><li>泛型类的类型，是在创建对象时确定的(因为创建对象时，需要指定确定类型)；</li><li>如果在创建对象时，没有指定类型，默认Object；</li></ul></li></ul></li><li>自定义泛型接口<ul><li>基本语法：<code>interface 接口名 &lt;T/R...&gt;{}</code>//表示可以有多个泛型</li><li>使用细节<ul><li>接口中，静态成员也不能使用泛型(接口中所有成员都是静态的)；</li><li>泛型接口的类型，在继承接口或者实现接口时确定；</li><li>没有指定类型，默认为<code>Object</code>。</li></ul></li></ul></li><li>自定义泛型方法<ul><li>基本语法：<code>修饰符 &lt;T，R..&gt; 返回类型 方法名(参数列表){}</code>；</li><li>使用细节<ul><li>泛型方法，可以定义在普通类中，也可以定义在泛型类中；</li><li>当泛型方法被<strong>调用时</strong>，类型会确定；</li><li><code>public void eat(E e){}</code>，修饰符后没有&lt;T，R..&gt;，eat方法不是泛型方法，而是使用了泛型。</li></ul></li></ul></li></ol><h2 id="四、泛型的继承和通配符"><a href="#四、泛型的继承和通配符" class="headerlink" title="四、泛型的继承和通配符"></a>四、泛型的继承和通配符</h2><ol><li>说明<ul><li>泛型不具备继承性，<del><code>List&lt;Object&gt; list = newArrayList&lt;String&gt;();</code></del>错误；</li><li><code>&lt;?&gt;</code>：支持任意泛型类型；</li><li><code>&lt;? extend A&gt;</code>：支持A类及A类的子类，规定了泛型的上限；</li><li><code>&lt;? super A&gt;</code>：支持A类及A类的父类，不限于直接父类，只规定了泛型的下限。</li></ul></li></ol><h2 id="五、JUnit"><a href="#五、JUnit" class="headerlink" title="五、JUnit"></a>五、JUnit</h2><blockquote><p>JUnit是一个Java语言的单元测试框架，多数Java的开发环境都已经集成了JUnit作为单元测试的工具。使用方法：<code>new 类名.f1();</code></p><p>代码演示：</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"all"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">new</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"方法一被调用！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"方法二被调用！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"方法三被调用！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：方法一被调用！方法二被调用！方法三被调用！*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><blockquote><p>引入：</p><p>有如下需求：根据配置文件re.properties指定信息，创建Cat对象并调用方法<code>hi</code>；</p><p>配置文件<code>re.properties</code>内容为下：</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">classfullpath</span><span class="token punctuation">=</span><span class="token attr-value">reflection.Cat</span><span class="token attr-name">method</span><span class="token punctuation">=</span><span class="token attr-value">hi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p> 这样的需求在框架中特别多，即通过外部文件配置，在不修改源码情况下来控制程序，也符合设计模式的<strong>ocp</strong>原则（开闭原则：不修改源码，扩容功能）</p></blockquote><p>传统方法需要new处对象后通过对象调用方法，但在配置文件中不能使用，需要用到反射，下面用代码演示。</p></blockquote><h2 id="反射机制"><a href="#反射机制" class="headerlink" title="反射机制"></a>反射机制</h2><ol><li><p>基本介绍</p><ul><li>反射机制允许程序在执行期借助于Reflection API取得任何类的内部信息(比如成员变量，构造器，成员方法等等)，并能操作对象的属性及方法。反射在设计模式和框架底层都会用到；</li><li>加载完类之后，在堆中就产生了一个Class类型的对象(<strong>一个类只有一个Class对象</strong>)，这个对象包含了类的完整结构信息,通过这个对象得到类的结构。这个Class对象就像一面镜子，透过这个镜子看到类的结构，所以，形象的称之为：反射。</li></ul></li><li><p>Java反射机制原理示意图</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204121641524.png" alt="image-20220412164128154"></p></li><li><p>反射的功能</p><ul><li>在运行时判断任意一个对象所属的类；</li><li>在运行时构造任意一个类的对象，使用构造器；</li><li>在运行时得到任意一个类所具有的成员变量和方法；</li><li>在运行时调用任意一个对象的成员变量和方法；</li><li>生成动态代理。</li></ul></li><li><p>反射相关的主要类</p><ul><li><code>java.lang.Class</code>：代表一个类，Class对象表示某个类加载后在堆中的对象；</li><li><code>java.lang.reflect.Method</code>：代表类的方法，Method对象表示某个类的方法；</li><li><code>java.lang.reflect.Field</code>：代表类的成员变量，Field对象表示某个类的成员变量(<code>getField</code> 不能得到私有的属性)；</li><li><code>java.lang.reflect.Constructor</code>：代表类的构造方法，Constructor对象表示构造器。</li></ul></li><li><p>代码演示</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">reflection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token comment">//读取配置文件，访问类的信息</span>        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"src//reflection//re.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> classfullpath <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"classfullpath"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> methodName <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>classfullpath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//reflection.Cat</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hi</span>        <span class="token comment">//使用反射</span>        <span class="token comment">//(1) 加载类, 返回 Class 类型的对象 cls</span>        <span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>classfullpath<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//(2) 通过 cls 得到你加载的类 com.reflection.Cat 的对象实例</span>        <span class="token comment">//此时o就相当于Cat类的一个实例化对象</span>        <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//getDeclaredConstructor()方法会根据他的参数对该类的构造函数进行搜索并返回对应的构造函数，没有参数就返回该类的无参构造函数，然后再通过newInstance进行实例化。</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"o的运行类型："</span><span class="token operator">+</span> o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出：o的运行类型：class reflection.Cat</span>        <span class="token comment">//(3) 通过 cls 得到你加载的类 com.reflection.Cat 的 methodName"hi" 的方法对象,即方法可以看作对象</span>        <span class="token class-name">Method</span> method1 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//(4) 通过 method1 调用方法: 即通过方法对象来实现调用方法</span>        method1<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传统写法 对象.方法() , 反射机制 方法.invoke(对象)</span>        <span class="token comment">//输出：Cat say hi!</span>        <span class="token comment">//(5)java.lang.reflect.Field: 代表类的成员变量, Field 对象表示某个类的成员变量</span>        <span class="token comment">//得到类中的属性</span>        <span class="token comment">//Field field = cls.getField("name");//getField不能得到私有的属性</span>        <span class="token class-name">Field</span> field <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传统写法:对象.成员变量,反射:成员变量对象.get(对象)</span>        <span class="token comment">//输出：0</span>        <span class="token comment">//(6)//java.lang.reflect.Constructor: 代表类的构造方法, Constructor 对象表示构造器</span>        <span class="token class-name">Constructor</span> constructor1 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//有参构造器</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出：public reflection.Cat(java.lang.String,int)</span>        <span class="token class-name">Constructor</span> constructor2 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//无参构造器</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出：public reflection.Cat()</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Cat say hi!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>反射的优缺点<ul><li>优点：可以动态的创建和使用对象(也是框架底层核心)，使用灵活，没有反射机制，框架技术就失去底层支撑；</li><li>缺点：使用反射基本是解释执行，对执行速度有影响。</li></ul></li><li>反射调用优化<ul><li>Method和Field，Constructor对象都有<code>setAccessible()</code>方法；</li><li>setAccessible作用是启动和禁用访问安全检查的开关;</li><li>参数值为<strong>true</strong>表示反射的对象在使用时<strong>取消访问检查</strong>，<strong>提高</strong>反射的效率；</li><li>参数值为<strong>false</strong>则表示反射的对象<strong>执行</strong>访问检查。</li><li>代码演示：</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">reflection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token comment">//三种方式访问hi方法效率的比较</span>        <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出：</span>        <span class="token comment">//传统方法调用耗时：16</span>        <span class="token comment">//用反射调用耗时：78</span>        <span class="token comment">//反射优化调用耗时：31</span>    <span class="token punctuation">}</span>    <span class="token comment">//传统调用hi方法</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">Cat</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">900000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            cat<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"传统方法调用耗时："</span><span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//反射调用hi方法</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>    <span class="token punctuation">{</span>        <span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"reflection.Cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Method</span> method <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">900000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"使用反射调用耗时："</span><span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//反射调用优化 + 关闭访问检查</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>    <span class="token punctuation">{</span>        <span class="token class-name">Class</span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"reflection.Cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Method</span> method <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        method<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在反射调用方法时，取消访问检查</span>        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">900000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"反射优化调用耗时："</span><span class="token operator">+</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        age<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Class类"><a href="#Class类" class="headerlink" title="Class类"></a>Class类</h2><ol><li><p>Class基本介绍</p><ul><li>Class也是类，因此也继承Object类；</li><li>Class类对象不是new出来的，而是系统创建的；</li><li>对于某个类的Class类对象，在内存中只有一份，因为类只加载一次；</li><li>每个类的实例都会记得自己是由哪个Class实例所生成；</li><li>通过Class对象可以完整地得到一个类的完整结构，通过一系列API Class对象是存放在堆的类的字节码二进制数据，是放在方法区的，有的地方称为类的元数据（包括方法代码，变量名，方法名，访问权限等等）。</li></ul></li><li><p>Class类的常用方法</p><table><thead><tr><th align="left">方法名</th><th align="left">功能说明</th></tr></thead><tbody><tr><td align="left">static Class forName(String name)<br>(&lt;?&gt; 表示不确定的 Java 类型)</td><td align="left">返回指定类名name的Class对象</td></tr><tr><td align="left">Object getDeclaredConstructor().newInstance()</td><td align="left">根据它的参数对该类的构造函数进行搜索并返回对应的构造函数，没有参数就返回该类的无参构造函数，然后再通过newInstance进行实例化。</td></tr><tr><td align="left">getName()</td><td align="left">返回此Class对象所表示的实体(类、接口、数组类、基本类型等)名称</td></tr><tr><td align="left">Class [] getlnterfaces()</td><td align="left">获取当前Class对象的接口</td></tr><tr><td align="left">ClassLoader getClassLoader()</td><td align="left">返回该类的类加载器</td></tr><tr><td align="left">Class getSuperclass()</td><td align="left">返回表示此Class所表示的实体的超类的Class</td></tr><tr><td align="left">Constructor[] getConstructors()</td><td align="left">返回一个包含某些Constructor对象的数组</td></tr><tr><td align="left">Field[] getDeclaredFields()</td><td align="left">返回Field对象的一个数组,包含本类中所有属性</td></tr><tr><td align="left">Method getMethod（String name.Class … paramTvpes）</td><td align="left">返回一个Method对象，此对象的形参类型为paramType</td></tr></tbody></table><p>对于：<code>String classAllPath = "com.reflection.Car";</code>，有；</p><ul><li> 获取到Car类对应的Class对象：<code>Class&lt;?&gt; cls = Class.forName(classAllPath);</code>(&lt;?&gt; 表示不确定的 Java 类型)</li><li> 得到包名:<code>System.out.println(cls.getPackage().getName());</code></li><li> 得到全类名:<code>System.out.println(cls.getName());</code></li><li> 通过 cls 创建对象实例:<code>Car car = (Car) cls.getDeclaredConstructor().newInstance();</code></li><li> 通过反射获取属性 brand:<code>Field brand = cls.getField("brand");</code></li><li> 通过反射给属性赋值:<code>brand.set(car, "奔驰");</code></li><li> 得到所有的属性(字段):<code>Field[] fields = cls.getFields();</code></li><li> 遍历<code>Field[] field</code>数组：<code>for (Field f : fields) {System.out.println(f.getName());}</code></li></ul></li><li><p>获取Class类对象的6种方式</p><ul><li><code>Class.forName</code>：应用于通过配置文件获取时；</li><li><code>类名.class</code>：应用场景: 用于参数传递；</li><li><code>对象.getClass()</code>；应用场景，有对象实例；</li><li>通过类加载器来获取到类的 Class 对象：<ul><li>先得到类加载器 car：<code>ClassLoader classLoader = car.getClass().getClassLoader();</code></li><li>通过类加载器得到 Class 对象:<code>Class cls4 = classLoader.loadClass(classAllPath);</code></li></ul></li><li>基本数据(<code>int, char,boolean,float,double,byte,long,short</code>) 按如下方式得到 Class 类对象:<ul><li><code>Class&lt;Integer&gt; integerClass = int.class;</code></li><li><code>Class&lt;Character&gt; characterClass = char.class;</code></li><li><code>Class&lt;Boolean&gt; booleanClass = boolean.class;</code></li></ul></li><li>基本数据类型对应的包装类，可以通过<code>.TYPE</code>得到 Class 类对象:<ul><li><code>Class&lt;Integer&gt; type1 = Integer.TYPE;</code></li><li><code>Class&lt;Character&gt; type2 = Character.TYPE;</code></li></ul></li></ul></li><li><p>具有Class对象的类型</p><ul><li>外部类、成员内部类、静态内部类、局部内部类、匿名内部类</li><li>interfacr：接口；</li><li>一维数组、二维数组；</li><li>enum：枚举</li><li>annotation：注解；</li><li>基本数据类型</li><li>void</li></ul></li></ol><h2 id="类加载"><a href="#类加载" class="headerlink" title="类加载"></a>类加载</h2><ol><li><p>基本说明</p><ul><li>反射机制是java实现动态语言的关键，也就是通过反射实现类动态加载；</li><li>静态加载：<strong>编译时</strong>加载相关的类，如果没有则<strong>报错</strong>，依赖性太强；</li><li>动态加载：<strong>运行时</strong>加载需要的类，如果运行时<strong>不使用</strong>该类，即使<strong>不存在</strong>该类，也<strong>不报错</strong>，降低了依赖性。</li></ul></li><li><p>类加载时机</p><ul><li><p>静态加载</p><ul><li>当创建对象时(<code>new</code>)</li><li>当子类被加载时，父类也加载</li><li>调用类中的静态成员时</li></ul></li><li><p>动态加载：通过反射<code>Class.forname("reflection.Cat")</code></p></li></ul></li><li><p>类加载过程图</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204121953887.png" alt="image-20220412195354450"></p></li><li><p>类加载各阶段完成的任务</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204131523400.png" alt="image-20220412195520140"></p><ul><li><p>加载：JVM 在该阶段的主要目的是将字节码从不同的数据源(可能是class文件、也可能是jar包，甚至网络)转化为二进制字节流加载到内存中，并生成一个代表该类的java.lang.Class 对象。</p></li><li><p>连接</p><ul><li>验证:<ul><li>目的是为了确保Class文件的字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身的安全；</li><li>包括：文件格式验证（是否以魔数oxcafebabe开头）、元数据验证、字节码验证和符号引用验证；</li><li>可以考虑使用<code>-Xverify:none</code>参数来关闭大部分的类验证措施，缩短虚拟机类加载的时间。</li></ul></li><li>准备：JVM会在该阶段对静态变量分配内存并<strong>默认初始化</strong>(对应数据类型的默认初始值，如<code>0、0L，null，false</code>等)，这些变量所使用的内存都将在方法区中进行分配。</li><li>解析：虚拟机将常量池内的符号引用替换为直接引用的过程。</li></ul></li><li><p>初始化</p><ul><li><p>到初始化阶段，才真正开始执行类中定义的Java程序代码，此阶段是执行<code>clinit()</code>方法的过程；</p></li><li><p><code>clinit()</code>方法是由编译器按语句在源文件中出现的顺序，依次自动收集类中的所有静态变量的赋值动作和静态代码块中的语句，并进行合并；</p><p>代码演示：</p></li><li><p>虚拟机会保证一个类的<code>clinit()</code>方法在多线程环境中被正确地加锁、同步，如果多个线程同时去初始化一个类，那么只会有一个线程去执行这个类的<code>clinit()</code>方法，其他线程都需要阻塞等待，直到活动线程执行<code>clinit()</code>方法完毕。</p></li></ul><p>代码演示：</p></li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>    <span class="token comment">//1. 加载 B 类，并生成 B 的 class 对象</span>    <span class="token comment">//2. 链接 num = 0</span>    <span class="token comment">//3. 初始化阶段</span>    <span class="token comment">// 依次自动收集类中的所有静态变量的赋值动作和静态代码块中的语句,并合并</span>    <span class="token comment">/*        clinit() {        System.out.println("B 静态代码块被执行");            //num = 300;            num = 100;        }        合并: num = 100    */</span>    <span class="token comment">//new B();//类加载</span>    <span class="token comment">//System.out.println(B.num);//100, 如果直接使用类的静态属性，也会导致类的加载</span>    <span class="token comment">//看看加载类的时候，是有同步机制控制</span>    <span class="token comment">/*        protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException            {            //正因为有这个机制，才能保证某个类在内存中, 只有一份 Class 对象            synchronized (getClassLoadingLock(name)) {            //....            }        }    */</span>        <span class="token class-name">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B 静态代码块被执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        num <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">static</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//构造器</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B() 构造器被执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="通过反射获取类的结构信息"><a href="#通过反射获取类的结构信息" class="headerlink" title="通过反射获取类的结构信息"></a>通过反射获取类的结构信息</h2><ol><li>第一组：<code>java.lang.Class</code> 类<ul><li><code>getName</code>：获取全类名</li><li><code>getSimpleName</code>：获取简单类名</li><li><code>getFields</code>：获取所有<strong>public</strong>修饰的属性，包含本类以及父类的</li><li><code>getDeclaredFields</code>：获取本类中<strong>所有</strong>属性</li><li><code>getMethods</code>：获取所有public修饰的方法，包含本类以及父类的</li><li><code>getDeclaredMethods</code>：获取本类中所有方法</li><li><code>getConstructors</code>：获取本类所有<strong>public</strong>修饰的构造器</li><li><code>getDeclaredConstructors</code>：获取本类中所有构造器</li><li><code>getPackage</code>：以Package形式返回包信息</li><li><code>getSuperClass</code>：以Class形式返回父类信息</li><li><code>getInterfaces</code>：以Class[]形式返回接口信息</li><li><code>getAnnotations</code>：以Annotation[] 形式返回注解信息</li></ul></li><li>第二组：<code>java.lang.reflect.Field</code>类<ul><li><code>getModifiers</code>：以int形式返回修饰符<br>[说明：默认修饰符是0，public是1，private是2，protected是4，static是8，final是16]</li><li><code>getType</code>：以Class形式返回类型</li><li><code>getName</code>：返回属性名</li></ul></li><li>第三组：<code>java.lang.reflect.Method</code> 类<ul><li><code>getModifiers</code>：以int式返回修饰符<br>[说明：默认修饰符是0，public是1，private是2，protected是4，static 是8，final是16]</li><li><code>getReturnType</code>：以Class形式获取 返回类型</li><li><code>getName</code>：返回方法名</li><li><code>getParameterTypes</code>：以Class[]返回参数类型数组</li></ul></li><li>第四组：<code>java.lang.reflect.Constructor</code> 类<ul><li><code>getModifiers</code>：以int形式返回修饰符</li><li><code>getName</code>：返回构造器名（全类名）</li><li><code>getParameterTypes</code>：以Class[]返回参数类型数组</li></ul></li></ol><h2 id="通过反射创建对象"><a href="#通过反射创建对象" class="headerlink" title="通过反射创建对象"></a>通过反射创建对象</h2><ol><li><p>通过public的无参构造器创建实例：<code>getDeclaredConstructor().newInstance();</code></p></li><li><p>通过public的有参构造器创建实例：</p><ul><li>先得到对应的构造器：<code>Constructor&lt;?&gt; constructor = cls.getConstructor(String.class);</code></li><li>再创建实例并传入参数：<code>Object o2 = constructor.newInstance("Jack");</code></li></ul></li><li><p>通过<strong>非</strong>public的有参构造器创建实例:</p><ul><li>先得到 private 的构造器对象：<code>Constructor&lt;?&gt; constructor2 = cls.getDeclaredConstructor(String.class,int.class);</code></li><li>再取消访问检查：<code>constructor2.setAccessible(true);</code></li><li>最后创建对象：<code>Object o3 = constructor2.newInstance("rose",18);</code></li></ul></li></ol><p>代码演示：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">reflection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token comment">//先获取Cat类的Class对象</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> cls <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"reflection.Cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//1.通过public的无参构造器创建实例</span>        <span class="token class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出：Cat [age=0, name=null]</span>        <span class="token comment">//2.通过public的有参构造器创建实例</span>        <span class="token comment">//得到对应构造器</span>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> constructor <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//创建实例并传入参数</span>        <span class="token class-name">Object</span> o2 <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出：Cat [age=0, name=Jack]</span>        <span class="token comment">//3.通过非 public 的有参构造器创建实例</span>        <span class="token comment">// 得到 private 的构造器对象</span>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> constructor2 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//创建实例</span>        <span class="token comment">//暴破【暴力破解】,使用反射可以访问 private 构造器/方法/属性</span>        constructor2<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> o3 <span class="token operator">=</span> constructor2<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"rose"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出：Cat [age=18, name=rose]</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        age<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Cat [age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">", name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="通过反射访问类中的成员"><a href="#通过反射访问类中的成员" class="headerlink" title="通过反射访问类中的成员"></a>通过反射访问类中的成员</h2><ol><li>访问属性<ul><li>根据属性名获取Field对象<code>Field f = clazz对象.getDeclaredField(属性名)；</code></li><li>爆破：<code>f.setAccessible(true);</code>(f 是Field)</li><li>访问：<ul><li><code>f.set(o,值)</code>：o表示对象</li><li><code>System.out.println(f.get(o));</code>：o表示对象</li></ul></li><li>注意：如果是静态属性，则set和get中的参数o，可以写成null</li></ul></li><li>访问方法<ul><li>根据方法名和参数列表获取Method方法对象：<code>Method m =clazz.getDeclaredMethod(方法名,XX.class);</code> //得到本类的所有方法</li><li>获取对象：<code>Object o=clazz.newlnstance();</code></li><li>暴破：<code>m.setAccessible(true);</code></li><li>访问：<code>Object returnValue = m.invoke(o,实参列表);</code>//o就是对象</li><li>注意：如果是静态方法，则invoke的参数o，可以写成null</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 集合 </tag>
            
            <tag> 泛型 </tag>
            
            <tag> 反射 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java笔记（二）</title>
      <link href="posts/2.html"/>
      <url>posts/2.html</url>
      
        <content type="html"><![CDATA[<h1 id="枚举-Enumeration-和注解-Annotation"><a href="#枚举-Enumeration-和注解-Annotation" class="headerlink" title="枚举(Enumeration)和注解(Annotation)"></a>枚举(Enumeration)和注解(Annotation)</h1><p>[toc]</p><h2 id="一、枚举"><a href="#一、枚举" class="headerlink" title="一、枚举"></a>一、枚举</h2><blockquote><p>引出枚举类：</p><p>需求：创建Season类，包含季节的值，且季节的值是有限的4个（春夏秋冬），此类只读，不需要修改。</p></blockquote><h3 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h3><h4 id="自定义枚举类"><a href="#自定义枚举类" class="headerlink" title="自定义枚举类"></a>自定义枚举类</h4><ul><li><p>规范</p><ul><li>不提供<code>set()</code>方法，枚举类通常只读；</li><li>对枚举对象/属性使用<code>final static</code>共同修饰，实现底层优化；</li><li>枚举对象名通常使用全部大写，常量的命名规范；</li><li>枚举对象根据需要可以有多个属性。</li></ul></li><li><p>特点</p><ul><li>构造器私有化；</li><li>本类内部创建一组对象；</li><li>对外暴露对象(通过为对象添加<code>public final static</code>修饰符)</li><li>可以提供<code>get()</code>方法，但不提供<code>set()</code>方法。</li></ul></li><li><p>代码演示</p></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//访问对象实例</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>AUTUMN<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>SUMMER<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Season</span><span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span><span class="token comment">//定义四个对象</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> SPRING <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"春天"</span><span class="token punctuation">,</span><span class="token string">"温暖"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> SUMMER <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"夏天"</span><span class="token punctuation">,</span><span class="token string">"炎热"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> AUTUMN <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"秋天"</span><span class="token punctuation">,</span><span class="token string">"凉爽"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Season</span> WINTER <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token string">"冬天"</span><span class="token punctuation">,</span><span class="token string">"寒冷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.将构造器私有化，防止直接new处对象</span><span class="token comment">//2.去掉set()方法，防止属性被修改</span><span class="token comment">//3.在Season内部直接创建固定(数量)的对象</span><span class="token comment">//4.可以加final修饰符优化</span><span class="token keyword">private</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> name<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> desc<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"Season{"</span> <span class="token operator">+</span><span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">", desc='"</span> <span class="token operator">+</span> desc <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">'}'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：Season{name='秋天', desc='凉爽'}Season{name='夏天', desc='炎热'} */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="enum枚举类"><a href="#enum枚举类" class="headerlink" title="enum枚举类"></a>enum枚举类</h4><ul><li>代码演示</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//访问对象实例</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>AUTUMN<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>SUMMER<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//使用enum关键字实现枚举类</span><span class="token keyword">enum</span> <span class="token class-name">Season</span><span class="token punctuation">{</span><span class="token comment">//1.使用enum替代class</span><span class="token comment">//2.public final static Season SPRING = new Season("春天","温暖");直接用</span><span class="token comment">//  SPRING("春天","温暖")代替，常量名(实参列表)</span><span class="token comment">//3.若有多个常量(对象)，则用逗号间隔即可</span><span class="token comment">//4.若使用enum实现枚举类，要求将定义常量对象写在最前面</span>    <span class="token comment">//5.若使用无参构造器创建对象，则可以省略括号和实参列表</span><span class="token function">SPRING</span><span class="token punctuation">(</span><span class="token string">"春天"</span><span class="token punctuation">,</span><span class="token string">"温暖"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">SUMMER</span><span class="token punctuation">(</span><span class="token string">"夏天"</span><span class="token punctuation">,</span><span class="token string">"炎热"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">AUTUMN</span><span class="token punctuation">(</span><span class="token string">"秋天"</span><span class="token punctuation">,</span><span class="token string">"凉爽"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">WINTER</span><span class="token punctuation">(</span><span class="token string">"冬天"</span><span class="token punctuation">,</span><span class="token string">"寒冷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Season</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> name<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> desc<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"Season{"</span> <span class="token operator">+</span><span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">", desc='"</span> <span class="token operator">+</span> desc <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span><span class="token string">'}'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：Season{name='秋天', desc='凉爽'}Season{name='夏天', desc='炎热'} */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>注意事项</p><ul><li>当使用<code>enum</code>关键字实现枚举类时，默认继承<code>Enum</code>类，而且是一个<code>final</code>类；</li><li><code>public final static Season SPRING = new Season("春天","温暖");</code>用<code>SPRING("春天","温暖")</code>代替，根据其对应参数(的个数)确定使用的构造器；</li><li>若使用无参构造器创建对象，则可以省略括号和实参列表；</li><li>当有多个枚举对象时，使用 <code>,</code>间隔，最后用<code>;</code>结尾；</li><li>枚举对象必须放在枚举类的首行。</li></ul></li><li><p><code>enum</code>实现接口</p><ul><li>使用<code>enum</code>关键字后，就不能再继承其他类了，因为<code>enum</code>会隐式继承<code>Enum</code>类，而Java是单继承机制；</li><li>枚举类和普通来一样可以实现接口，形式：<code>enum 类名 implements 接口1，接口2{}</code></li></ul></li></ul><h4 id="Enum成员方法"><a href="#Enum成员方法" class="headerlink" title="Enum成员方法"></a><code>Enum</code>成员方法</h4><ol><li><code>toString()</code>：<code>Enum</code>类默认的<code>toString()</code>直接返回对象名，但可以重写；</li><li><code>name()</code>：返回对象名称；</li><li><code>value()</code>：返回Season[],遍历取出定义的所有对象；</li><li><code>valueOf()</code>：将字符串转换成枚举对象，要求字符串必须为已有变量名，否则报异常；</li><li><code>compareTo()</code>：比较两个枚举常量，比较的是编号(前面对象的编号-后面对象的编号)。</li></ol><p><strong>代码演示：</strong>(Season类见上节)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Season</span> autumn <span class="token operator">=</span> <span class="token class-name">Season</span><span class="token punctuation">.</span>AUTUMN<span class="token punctuation">;</span><span class="token comment">//1.name():返回对象名称</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>autumn<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//AUTUMN</span><span class="token comment">//2.ordinal():返回声明次序/序号(从0开始)</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>autumn<span class="token punctuation">.</span><span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span><span class="token comment">//3.value():返回Season[],遍历取出定义的所有对象</span><span class="token class-name">Season</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> <span class="token class-name">Season</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Season</span> season <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token comment">//增强for循环</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>season<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/*Season{name='春天', desc='温暖'}Season{name='夏天', desc='炎热'}Season{name='秋天', desc='凉爽'}Season{name='冬天', desc='寒冷'} */</span><span class="token comment">//4.valueOf():将字符串转换成枚举对象，要求字符串必须为已有变量名，否则报异常</span><span class="token class-name">Season</span> autumn1 <span class="token operator">=</span> <span class="token class-name">Season</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">"AUTUMN"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"autumn1="</span><span class="token operator">+</span>autumn1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//autumn1=Season{name='秋天', desc='凉爽'}</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>autumn <span class="token operator">==</span> autumn1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span><span class="token comment">//5.compareTo():比较两个枚举常量，比较的是编号(前面对象的编号-后面对象的编号)</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>SUMMER<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>AUTUMN<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//-1 (1-2)</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>AUTUMN<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Season</span><span class="token punctuation">.</span>SUMMER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 (2-1)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="二、注解"><a href="#二、注解" class="headerlink" title="二、注解"></a>二、注解</h2><blockquote><ul><li><p>注解：也被称为元数据(Metadata)，用于修饰解释包、类、方法、属性、 构造器、局部变量等数据信息。</p></li><li><p>和注释一样，注解不影响程序逻辑，但注解可以被编译或运行，相当于嵌入在代码中的补充信息。</p></li><li><p>在<code>JavaSE</code>中，注解的使用目的比较简单，例如标记过时的功能，忽略警告等。在<code>JavaEE</code>中注解占据 了更重要的角色，例如用来配置应用程序的任何切面，代替java EE旧版中所遗留的繁冗代码和XML配置等。</p></li></ul></blockquote><p><strong>基本的注解介绍：</strong></p><blockquote><p>使用Annotation时要在其前面增加@符号，并把该Annotation当成一个修饰符使用。用于修饰它支持的程序元素。</p><p>➢三个基本的Annotation:</p><ul><li><code>@Override</code>：限定某个方法，是重写父类方法，该注解只能用于方法；</li><li><code>@Deprecated</code>：用于表示某个程序元素(类，方法等)已过时；</li><li><code>@SuppressWarnings</code>：抑制编译器警告。</li></ul></blockquote><h3 id="Override"><a href="#Override" class="headerlink" title="Override"></a><code>Override</code></h3><ol><li><code>@Override</code>只能修饰方法，不能修饰属性、类、包等；</li><li>如果写了<code>@Override</code>注解，编译器就会去检查该方法是否真的重写了父类的方法，若重写，则编译通过，否则不通过；</li><li><code>@interface</code>表示一个注解类。</li></ol><h3 id="Deprecated"><a href="#Deprecated" class="headerlink" title="Deprecated"></a><code>Deprecated</code></h3><ol><li><code>@Deprecated</code>修饰某个元素，表示元素已过时；</li><li>即使不推荐使用，但人可以使用；</li><li>可以修饰方法、类、字段、包、参数、等；</li><li><code>@Deprecated</code>可以做版本升级过渡使用。</li></ol><h3 id="SuppressWarnings"><a href="#SuppressWarnings" class="headerlink" title="SuppressWarnings"></a><code>SuppressWarnings</code></h3><ol><li>编写代码时，如果不希望看到警告，可以用<code>@SuppressWarnings</code>；</li><li><code>@SuppressWarnings({"all"})</code>，在<code>{""}</code>中写入不想看到的警告，<code>all</code>表示全部警告不显示；</li><li><code>@SuppressWarnings</code>的作用范围与放置位置有关；</li></ol><h3 id="元注解"><a href="#元注解" class="headerlink" title="元注解*"></a>元注解*</h3><ol><li>JDK的元Annotation用于修饰其他Annotation；</li><li>元注解的种类(使用不多，了解，不用深入研究)<ul><li><code>Retention</code> //指定注解的作用范围，三种<code>SOURCE,CLASS,RUNTIME</code></li><li><code>Target</code> //指定注解可以在哪些地方使用</li><li><code>Documented </code>//指定该注解是否会在<code>javadoc</code>体现</li><li><code>Inherited</code> //子类会继承父类注解</li></ul></li></ol><h1 id="异常-Exception"><a href="#异常-Exception" class="headerlink" title="异常(Exception)"></a>异常(Exception)</h1><h2 id="一、基本介绍"><a href="#一、基本介绍" class="headerlink" title="一、基本介绍"></a>一、基本介绍</h2><ol><li>基本概念</li></ol><ul><li>Java语言中，将程序执行中发生的不正常情况称为“异常”。（开发过程中的语法错误和逻辑错误不是异常）</li></ul><ol start="2"><li><p>执行过程中所发生的异常事件可分为两大类</p><ul><li><p><code>Error</code>（错误）：Java虚拟机无法解决的严重问题。如：JVM系统内部错误、资源耗尽等严重情况。比如：StackOverflowError[栈溢出]和OOM（out of memory），Error 是严重错误，程序会崩溃。</p></li><li><p><code>Exception</code>：其它因编程错误或偶然的外在因素导致的一般性问题，可以使用针对性的代码进行处理。例如空指针访问，试图读取不存在的文件，网络连接中断等等，Exception分为两大类：<code>运行时异常</code>[程序运行时，发生的异常]和<code>编译时异常</code>[编程时，编译器检查出的异常]。</p></li></ul></li></ol><h2 id="二、异常体系图"><a href="#二、异常体系图" class="headerlink" title="二、异常体系图"></a>二、异常体系图</h2><ol><li><p>异常体系图</p><ul><li>异常体系图体现了继承和实现的关系；</li><li>虚线代表实现接口，实线代表继承。</li></ul><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204051613127.png"></p></li><li><p>小结</p><ul><li>异常分为两大类，运行时异常和编译时异常；</li><li>运行时异常，编译器不要求强制处置的异常，编译器检查不出来。一般是指编程时的逻辑错误，是程序员应该避免其出现的异常。<code>java.lang.RuntimeException</code>类及它的子类都是运行时异常，对于运行时异常，可以不作处理，因为这类异常很普遍，若全处理可能会对程序的可读性和运行效率产生影响；</li><li>编译时异常，是编译器要求必须处置的异常。</li></ul></li></ol><h2 id="三、五大运行时异常"><a href="#三、五大运行时异常" class="headerlink" title="三、五大运行时异常"></a>三、五大运行时异常</h2><ol><li><p><code>NullPointerException</code>：空指针异常</p><ul><li>当应用程序试图在需要对象的地方使用<code>null</code>时，抛出该异常，如下：</li></ul><p><code>String name = null; System.out.println(name.length());</code></p></li><li><p><code>ArithmeticException</code>：数学运算异常</p><ul><li>当出现异常的运算条件时，抛出此异常，如除0等。</li></ul></li><li><p><code>ArraylndexOutOfBoundsException</code>：数组下标越界异常</p><ul><li>用非法索引访问数组时抛出的异常。如果索引为负或大于等于数组大小，则该索引为非法索引。</li></ul></li><li><p><code>ClassCastException</code>：类型转换异常</p><ul><li><p>当试图将对象强制转换为不是实例的子类时，抛出该异常。</p></li><li><p>代码示例：</p></li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">A</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//向上转型，可以运行</span>        <span class="token class-name">B</span> b2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">)</span>b<span class="token punctuation">;</span> <span class="token comment">//向下转型，可以运行</span>        <span class="token class-name">C</span> b2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">C</span><span class="token punctuation">)</span>b<span class="token punctuation">;</span> <span class="token comment">//抛出类型转换异常</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> extend <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">C</span> extend <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li><p><code>NumberFormatException</code>：数字格式不正确异常</p><ul><li><p>当应用程序试图将字符串转换成一种数值类型，但该字符串不能转换为适当格式时，抛出该异常==&gt;使用该异常我们可以确保输入是满足条件数字。</p></li><li><p>代码示例：</p></li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">"1234"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">"抛出异常！"</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> num1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>name1<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//正常运行输出int 类型的1234</span>        <span class="token keyword">int</span> num2 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>name2<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//抛出异常</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="四、编译异常"><a href="#四、编译异常" class="headerlink" title="四、编译异常"></a>四、编译异常</h2><blockquote><p>编译异常是指在编译期间，就必须处理的异常，否则代码不能通过编译。</p></blockquote><ol><li>常见的编译异常<ul><li><code>SQLException</code>：操作数据库时，查询表可能发生异常；</li><li><code>IOException</code>：操作文件时，发生的异常；</li><li><code>FileNotFoundException</code>：当操作一个不存在的文件时，发生异常；</li><li><code>ClassNotFoundException</code>：加载类，而该类不存在时，异常；</li><li><code>EOFException</code>：操作文件，到文件末尾，发生异常；</li><li><code>IllegalArguementException</code>：参数异常。</li></ul></li></ol><h2 id="五、异常处理"><a href="#五、异常处理" class="headerlink" title="五、异常处理"></a>五、异常处理</h2><h3 id="try-catch方式"><a href="#try-catch方式" class="headerlink" title="try-catch方式"></a><code>try-catch</code>方式</h3><ol><li><p><code>try-catch-finally</code>：程序员在异常中捕获发生的异常，自行处理。</p><ul><li>处理机制：</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment">//代码(可能有异常)</span><span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//捕获到异常</span>    <span class="token comment">//1.当异常发生时，系统将异常封装成Exception对象e，传递给catch</span>    <span class="token comment">//2.得到异常对象后，程序员自己处理</span><span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token comment">//(可以不写)</span><span class="token punctuation">{</span>    <span class="token comment">//不论代码块有无异常，始终要执行finally中的代码</span>    <span class="token comment">//通常将释放资源的代码放在此</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>使用细节<ul><li>如果异常发生了，则异常发生后面的代码不会执行，直接进入到<code>catch</code>块；</li><li>如果异常没有发生，则顺序执行<code>try</code>的代码块，不会进入到<code>catch</code>；</li><li>如果希望不管是否发生异常，都执行某段代码（比如关闭连接，释放资源等）则使用如下代码<code>finally</code>；</li><li>可以有多个<code>catch</code>语句，捕获不同的异常（进行不同的业务处理），要求父类异常在后，子类异常在前，比如（<code>Exception</code> 在后，<code>NullPointerException</code>在前），如果发生异常，只会匹配一个<code>catch</code>。</li><li>可以进行<code>try-fianll</code>配合使用，这种用法相当于没有捕获异常因此程序会直接崩溃/退出。应用场景：执行一段代码，无论是否发生异常，都必须执行某个业务逻辑。</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>person <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//NullPointerException</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token operator">/</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ArithmeticException</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NullPointerException</span> nullPointerException<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//子类catch写在父类catch前面</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"空指针异常："</span><span class="token operator">+</span>nullPointerException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> arithmeticException<span class="token punctuation">)</span> <span class="token comment">//子类catch写在父类catch前面</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"算术异常："</span><span class="token operator">+</span>arithmeticException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"异常："</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"Jack"</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> name<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="throws方式"><a href="#throws方式" class="headerlink" title="throws方式"></a><code>throws</code>方式</h3><ol><li><p><code>throws</code>：将发生的异常抛出，交给调用者(方法)来处理，最顶级的处理者就是JVM。</p><ul><li><p>处理机制：(如果没有任何处理代码，则默认<code>throws</code>)</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204051613733.png" alt="image-20220405161355511"></p></li></ul></li><li><p>使用案例</p><ul><li><code>throws</code>后面的异常类型可以是方法中产生的异常类型，也可以是它的父类，如<code>Exception</code>；</li><li><code>throws</code>关键字后也可以是异常列表，即可以抛出多个异制。</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span><span class="token punctuation">,</span><span class="token class-name">NullPointerException</span> <span class="token punctuation">{</span><span class="token comment">//创建了一个文件流对象</span><span class="token comment">//1.这里的异常是一个FiLeNotFoundException编译异常</span><span class="token comment">//2.可以使用try-catch-finally</span><span class="token comment">//3.也可以使用throws，抛出异常，让调用f2方法的调用者（方法）处理</span><span class="token comment">//4.throws后面的异常类型可以是方法中产生的异常类型，也可以是它的父类，如Exception</span><span class="token comment">//5.throws关键字后也可以是异常列表，即可以抛出多个异制</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d://aa.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>使用细节<ul><li>对于编译异常，程序中必须处理，比如<code>try-catch </code>或者<code>throws</code>；</li><li>对于运行时异常，程序中如果没有处理，默认就是<code>throws</code>的方式处理，出现异常的地方将异常抛给调用它的类或对象，类或对象再向上抛，直至抛给<code>JVM</code>虚拟机，<code>JVM</code>虚拟机接受的异常后输出异常、结束程序；</li><li>子类重写父类的方法时，对抛出异常的规定：子类重写的方法，所抛出的异常类型要么和父类抛出的异常一致，要么为父类抛出的异常的类型的子类型；</li><li>在<code>throws</code>过程中，如果有方法<code>try-catch</code>，就相当于处理异常，就可以不必<code>throws</code>。</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ArithmeticException</span> <span class="token punctuation">{</span> <span class="token comment">//ArithmeticException为RuntimeException的子类</span><span class="token punctuation">}</span><span class="token comment">//或者</span><span class="token comment">//public void method() throws RuntimeException {</span><span class="token comment">//}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="六、自定义异常"><a href="#六、自定义异常" class="headerlink" title="六、自定义异常"></a>六、自定义异常</h2><ol><li>一般情况下，用运行异常<code>RuntimeException</code>，好处是我们可以使用默认的处理机制。</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token operator">&amp;&amp;</span> age <span class="token operator">&lt;=</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AgeException</span><span class="token punctuation">(</span><span class="token string">"输入的年龄有误！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入的年龄正确！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//自定义异常</span><span class="token keyword">class</span> <span class="token class-name">AgeException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token class-name">AgeException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="七、throw和throws的区别"><a href="#七、throw和throws的区别" class="headerlink" title="七、throw和throws的区别"></a>七、throw和throws的区别</h2><table><thead><tr><th></th><th>意义</th><th>位置</th><th>后面跟的</th></tr></thead><tbody><tr><td>throws</td><td>异常处理的一种方式</td><td>方法声明处</td><td>异常类型</td></tr><tr><td>throw</td><td>手动生成异常对象的关键字</td><td>方法体中</td><td>异常对象</td></tr></tbody></table><h1 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h1><h2 id="一、包装类"><a href="#一、包装类" class="headerlink" title="一、包装类"></a>一、包装类</h2><ol><li><p>包装类(<code>Wrapper</code>)的分类</p><ul><li>针对八种基本数据类型相应的引用类型-包装类；</li><li>有了类的特点，就可以调用类中的方法。</li></ul><table><thead><tr><th>基本数据类型</th><th>包装类</th></tr></thead><tbody><tr><td>boolean</td><td>Boolean</td></tr><tr><td>char</td><td>Character</td></tr><tr><td>byte</td><td>Byte</td></tr><tr><td>short</td><td>Short</td></tr><tr><td>int</td><td>Interger</td></tr><tr><td>long</td><td>Long</td></tr><tr><td>float</td><td>Float</td></tr><tr><td>double</td><td>Double</td></tr></tbody></table></li><li><p>装箱和拆箱</p><p><strong>以<code>Integer &lt;--&gt; int</code>为例：</strong></p><ul><li>jdk5前的手动装箱和拆箱方式，装箱：基本类型-&gt;包装类型，反之，拆箱；</li><li>jdk5以后（含jdk5）的自动装箱和拆箱方式；</li><li>自动装箱底层调用的是<code>valueOf</code>方法，比如<code>Integer.valueOf()</code>；</li><li>其他类型的一样。</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//演示 Integer &lt;--&gt; int</span><span class="token comment">//手动装箱：int --&gt; Integer</span><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">;</span><span class="token class-name">Integer</span> integer1 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//手动拆箱：Integer --&gt; int</span><span class="token keyword">int</span> i <span class="token operator">=</span> integer1<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//自动装箱：int --&gt; Integer</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token class-name">Integer</span> integer2 <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">//底层任然使用 Integer.valueOf()</span><span class="token comment">//手动拆箱：Integer --&gt; int</span><span class="token keyword">int</span> j <span class="token operator">=</span> integer2<span class="token punctuation">;</span> <span class="token comment">//底层仍然使用intValue()</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li><p>包装类型和<code>String</code>类型的相互转换</p><p><strong>以<code>Integer</code>和<code>String</code>为例：</strong></p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//演示 包装类（Integer）--&gt; String</span><span class="token class-name">Integer</span> i <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token comment">//自动装箱</span><span class="token comment">//方式1</span><span class="token class-name">String</span> str1 <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span> <span class="token comment">//此时str为String类型，原来的i没变</span><span class="token comment">//方式2</span><span class="token class-name">String</span> str2 <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//方式3</span><span class="token class-name">String</span> str3 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//String --&gt; 包装类（Integer）</span><span class="token class-name">String</span> str4 <span class="token operator">=</span> <span class="token string">"1234"</span><span class="token punctuation">;</span><span class="token comment">//方式1</span><span class="token class-name">Integer</span> j <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//使用到自动装箱</span><span class="token comment">//方式2</span><span class="token class-name">Integer</span> integer <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>常用的包装类方法</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Integer</span> integer <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回最小值</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回最大值</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">isDigit</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//判断是不是数字</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">isLetter</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//判断是不是字母</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">isUpperCase</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//判断是不是大写</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">isLowerCase</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">///判断是不是小写</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">isWhitespace</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//判断是不是空格</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//转成大写</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//转成小写</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li><p><code>Integer</code>创建机制</p><ul><li>经典面试题1<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Integer</span> i <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Integer</span> j <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">==</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//False (两个新对象，用 == 比较为False)</span><span class="token comment">//所以，这里主要是看范围-128~127就是直接返回</span><span class="token class-name">Integer</span> m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//底层Integer.valueOf（1）；-&gt;阅读源码,valueOf(n)根据n的范围确定返回的对象是否为新创建的</span><span class="token class-name">Integer</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//底层 Integer.valueOf（1）；</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m <span class="token operator">==</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//True （返回2个1，同一个对象）</span><span class="token comment">//所以，这里主要是看范围-128~127就是直接返回，否则，就new Integer（xx）；返回新对象</span><span class="token class-name">Integer</span> x <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span><span class="token comment">//底层Integer.valueOf（1）；</span><span class="token class-name">Integer</span> y <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span><span class="token comment">//底层Integer.valueOf（1）；</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//False （返回两个新创建的对象）</span><span class="token comment">/*valueOf()底层代码：当传入 i &gt;= -128 &amp;&amp; i &lt;= 127 时直接从数组返回，否则就 new Integer(i)public static Integer valueOf(int i) {if (i &gt;= Integer.IntegerCache.low &amp;&amp; i &lt;= Integer.IntegerCache.high)return Integer.IntegerCache.cache[i + (-Integer.IntegerCache.low)];//cache[]数组在类加载的时候就创建好了，缓存了-128~127之间的数，用的时候调用return new Integer(i);} */</span>        <span class="token class-name">Integer</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//新建对象</span><span class="token class-name">Integer</span> b <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span> <span class="token comment">//cache数组中取出</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//False</span><span class="token comment">//只要有基本数据类型，只判断值是否相等</span><span class="token class-name">Integer</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c <span class="token operator">==</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//True</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="二、String类"><a href="#二、String类" class="headerlink" title="二、String类"></a>二、String类</h2></li></ul></li></ol><h3 id="String类结构剖析"><a href="#String类结构剖析" class="headerlink" title="String类结构剖析"></a>String类结构剖析</h3><ol><li><p>String类的理解</p><ul><li>String对象用于保存字符串，也就是一组字符序列；</li><li>字符串常量对象是用双引号括起的字符序列。例如：“你好”、“12.97”、”boy“等；</li><li>字符串的字符使用Unicode字符编码，一个字符（不区分字母还是汉字）占<strong>两个字节</strong>；</li><li>String类较常用构造器（其它看手册）：<ul><li><code>String s1=new String();</code></li><li><code>String s2=new String(String original);</code></li><li><code>String s3=new String(char[] a);</code></li><li><code>String s4=new String(chartl a，int startlndex，int count);</code></li></ul></li><li>String是<code>final</code>类，不可被继承；</li><li>String有属性<code>private final char value[]</code>，用于存放字符串内容，<code>value</code>是<code>final</code>修饰的，不可修改(指不可修改<strong>地址指向</strong>，但单个字符内容可以改变)；</li><li></li></ul></li><li><p>String结构图</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204051614899.png" alt="image-20220405161411709"></p></li><li><p>两种创建String对象的方法</p><ul><li>方式一：直接赋值<code>String s="hello";</code><ul><li>先从常量池查看是否有”hello”数据空间，如果有，直接指向；如果没有则重新创建，然后指向。s最终指向的是<strong>常量池</strong>的空间地址;</li></ul></li><li>方式二：调用构造器 <code>String s2=new String("hello");</code><ul><li>先在堆中创建空间，里面维护了<code>value</code>属性，指向常量池的hsp空间。如果常量池没有”hello”，重新创建，如果有，直接通过value指向。最终指向的是<strong>堆</strong>中的空间地址。</li></ul></li></ul></li></ol><h3 id="String对象特性"><a href="#String对象特性" class="headerlink" title="String对象特性"></a>String对象特性</h3><ol><li>字符串的特性<ul><li><p>String是一个<code>final</code>类，代表不可变的字符序列；</p></li><li><p>字符串是不可变的，一个字符对象一旦被分配，其内容是不可变的。</p></li><li><p><code>string s="a";</code>创建了一个字符串<code>s+="b"</code>,实际上原来的<code>"a"</code>字符串对象已经丢弃了，现在又产生了一个字符串<code>s+"b"</code>(也就是<code>"ab"</code>)。如果多次执行这些改变串内容的操作，会导致大量副本字符串对象存留在内存中，降低效率。如果这样的操作放到循环中，会极大影响程序的性能。</p><p>=&gt;结论：如果我们对字符串做大量修改，不要使用String。</p></li></ul></li><li>相关例题<ul><li>如<code>String s1 = "hell0"; s1 = "haha";</code>共创建了<strong>2个对象</strong>(s1重新指向常量池中的”haha”,不会销毁”hello”)。</li><li>如<code>String a = "hello"+"abc";</code>共创建了<strong>1个对象</strong>，编译器底层会优化，自动拼接再创建对象，相当于<code>String a = "helloabc";</code>。</li><li>如下：</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">;</span><span class="token class-name">String</span> b <span class="token operator">=</span> <span class="token string">"456"</span><span class="token punctuation">;</span><span class="token comment">//分析:根据源码可得</span><span class="token comment">//1.先创建一个对象 StingBuilder sb = new StringBuild();</span><span class="token comment">//2.执行 sb.append("123");</span><span class="token comment">//3.执行 sb.append("456");</span><span class="token comment">//4.String ab = sb.toString();</span><span class="token comment">//最后ab指向堆中的对象(String)value[] -&gt; 常量池中 "123456"</span><span class="token class-name">String</span> ab <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ab<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>重要规则<ul><li><code>String c1 = "ab"+"cd";</code>常量相加，看<strong>常量池</strong>；</li><li><code>String c = a + b;</code>变量相加，看<strong>堆</strong>。</li></ul></li></ol><h3 id="String类的常见方法"><a href="#String类的常见方法" class="headerlink" title="String类的常见方法"></a>String类的常见方法</h3><ol><li><code>format()</code></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"Jack"</span><span class="token punctuation">;</span><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token keyword">double</span> score <span class="token operator">=</span> <span class="token number">95.555</span><span class="token punctuation">;</span><span class="token keyword">char</span> gender <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">;</span><span class="token comment">// %s %d %.2f %c 都为占位符</span>        <span class="token comment">// %s:表示字符串占位</span><span class="token comment">// %d:表示整数占位</span><span class="token comment">// %.2f:表示小数占位，保留2位小数(四舍五入)</span><span class="token comment">// %c:表示字符占位</span><span class="token class-name">String</span> formatString <span class="token operator">=</span> <span class="token string">"姓名：%s，年龄：%d，成绩：%.2f；性别：%c"</span><span class="token punctuation">;</span><span class="token class-name">String</span> info1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>formatString<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>score<span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> info2 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"姓名：%s，年龄：%d，成绩：%.2f；性别：%c"</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>score<span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>info1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//姓名：Jack，年龄：20，成绩：95.56；性别：男</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>info2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//姓名：Jack，年龄：20，成绩：95.56；性别：男</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>其它见<code>Java API</code></li></ol><h2 id="三、StringBuffer类"><a href="#三、StringBuffer类" class="headerlink" title="三、StringBuffer类"></a>三、StringBuffer类</h2><h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><ol><li><p><code>java.lang.StringBuffer</code>代表可变的字符序列，可以对字符串序列进行增删；</p></li><li><p>很多方法与<code>String</code>相同，但<code>StringBuffer</code>是可变长度的；</p></li><li><p><code>StringBuffer</code>是一个容器。</p></li><li><p><code>StringBuffer</code>的直接父类是<code>AbstractstringBuilder</code>；</p></li><li><p><code>StringBuffer</code>实现了<code>Serializable</code>，即<code>StringBuffer</code>的对象可以串行化(可以进行网络传输，可以保存到文件)；</p></li><li><p>字符序列存放在在父类中<code>AbstractstringBuilder</code>属性 <code>char[] value</code>，不是<code>final</code>；该<code>value</code>数组存放字符串内容，因此存放在<strong>堆</strong>中；</p></li><li><p><code>StringBuffer</code>是一个<code>final</code>类，不能被继承。</p></li></ol><h3 id="StringBuffer对象的创建"><a href="#StringBuffer对象的创建" class="headerlink" title="StringBuffer对象的创建"></a>StringBuffer对象的创建</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.创建一个大小为 16 的char[]，用于存放字符内容</span><span class="token class-name">StringBuffer</span> stringBuffer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.创建一个大小为 100 的char[]，用于存放字符内容</span><span class="token class-name">StringBuffer</span> stringBuffer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.通过给定一个String来创建StringBuffer，char[]的大小就是str.length()</span><span class="token class-name">StringBuffer</span> stringBuffer3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="String-VS-StringBuffer"><a href="#String-VS-StringBuffer" class="headerlink" title="String VS. StringBuffer"></a>String VS. StringBuffer</h3><ol><li>String保存的是<strong>字符串常量</strong>，里面的值不能更改，每次String类的更新实际上就是更改地址，效率较低原因：<code>private final char []value</code>；</li><li>StringBuffer保存的是<strong>字符串变量</strong>，里面的值可以更改，每次StringBuffer的更新实际上可以更新内容，不用每次更新地址，效率较高；</li><li>因为StringBuffer字符内容是存在<code>char[]value</code>，有扩容机制，所以在变化（增加／删除）时不用每次都更换地址（即不是每次创建新对象），所以效率高于String(<code>char []value</code>放在堆中)；</li><li><code>String--&gt;value[]--&gt;常量池</code>；<code>StringBuffer--&gt;value[]--&gt;堆</code>。</li></ol><h3 id="String和StringBuffer相互转换"><a href="#String和StringBuffer相互转换" class="headerlink" title="String和StringBuffer相互转换"></a>String和StringBuffer相互转换</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.String --&gt; StringBuffer</span><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span><span class="token comment">//方式1：使用构造器</span><span class="token comment">//*注意：堆str没有影响，返回的stringBuffer1才是StringBuffer对象</span><span class="token class-name">StringBuffer</span> stringBuffer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//方式2：使用append()方法</span><span class="token class-name">StringBuffer</span> stringBuffer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>stringBuffer2 <span class="token operator">=</span> stringBuffer2<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.StringBuffer --&gt; String</span><span class="token comment">//方式1：使用StringBuffer提供的toString()方法</span><span class="token class-name">StringBuffer</span> stringBuffer3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> str1 <span class="token operator">=</span> stringBuffer3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//方式2：使用构造器</span><span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>stringBuffer3<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="StringBuffer常用方法"><a href="#StringBuffer常用方法" class="headerlink" title="StringBuffer常用方法"></a>StringBuffer常用方法</h3><ul><li>增：<code>append()</code>；</li><li>删：<code>delete(start,end)</code>；</li><li>改：<code>replace(start,end,string)</code>；//将<code>strat~end</code>间的内容替换掉，不含end</li><li>查：<code>indexOf()</code> //查找子串在字符串第一次出现的索引，若找不到返回-1</li><li>插：<code>insert</code></li><li>获取长度：<code>length()</code></li></ul><h3 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">StringBuffer</span> stringBuffer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>stringBuffer1<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//根据源码，底层调用的是 AbstractStringBuilder 的 appendNull</span><span class="token comment">//此时stringBuffer1的内容为 "null"</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringBuffer1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringBuffer1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//null</span><span class="token comment">//super(str.length() + 16); str = null 时，会出现空指针异常</span><span class="token class-name">StringBuffer</span> stringBuffer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//NullPointerException</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="四、StringBuilder类"><a href="#四、StringBuilder类" class="headerlink" title="四、StringBuilder类"></a>四、StringBuilder类</h2><h3 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h3><ol><li>一个可变的字符序列。此类提供一个与StringBuffer兼容的API，但不保证同步（StringBuilder<strong>不是线程安全</strong>）。该类被设计用作 StringBuffer的一个简易替换，<strong>用在字符串缓冲区被单个线程使用的时候</strong>。如果可能，建议优先采用该类，因为在大多数实现中，它比StringBuffer要快；</li><li>在StringBuilder上的主要操作是append和insert方法，可重载这些方法，以接受任意类型的数据。</li><li><code>StringBuilder</code>的直接父类是<code>AbstractstringBuilder</code>；</li><li><code>StringBuilder</code>实现了<code>Serializable</code>，即<code>StringBuiler</code>的对象可以串行化(可以进行网络传输，可以保存到文件)；</li><li><code>StringBuilder</code>对象字符序列仍然是放在其父类<code>AbstractstringBuilder</code>的<code>char []value</code>中，因此字符序列在堆中；</li><li><code>StringBuilder</code>的方法，没有做<code>互斥</code>的处理(即无<code>synchronization</code>修饰)，因此在单线程下使用。</li></ol><h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><ul><li>与<code>StringBuffer</code>一样。</li></ul><h2 id="五、String、StringBuffer、StringBuilder"><a href="#五、String、StringBuffer、StringBuilder" class="headerlink" title="五、String、StringBuffer、StringBuilder"></a>五、String、StringBuffer、StringBuilder</h2><h3 id="三者的比较"><a href="#三者的比较" class="headerlink" title="三者的比较"></a>三者的比较</h3><ol><li><p>StringBuffer和StringBuilder非常类似，均可代表字符序列，而且方法也一样；</p></li><li><p>执行效率：<code>StringBuilder &gt; StringBuffer &gt; String</code>；</p></li><li><p><code>String</code>：<strong>不可变</strong>字符序列，效率低，但复用性高；</p></li><li><p><code>StringBuffer</code>：<strong>可变</strong>字符序列，效率高(增删)，线程安全；</p></li><li><p><code>StringBuilder</code>：<strong>可变</strong>字符序列，效率最高，线程不安全；</p></li><li><p>如果要对字符串进行大量修改，不要使用String，使用<code>StringBuffer(多线程)</code>或<code>StringBuilder(单线程)</code>。</p></li></ol><h3 id="三者的使用场景"><a href="#三者的使用场景" class="headerlink" title="三者的使用场景"></a>三者的使用场景</h3><ol><li>如果字符串存在<strong>大量的修改操作</strong>，一般使用<code>StringBuffer</code>或<code>StringBuilder</code>；</li><li>如果字符串存在<strong>大量的修改操作</strong>，并在<strong>单线程</strong>的情况，使用<code>StringBuilder</code>；</li><li>如果字符串存在<strong>大量的修改操作</strong>，并在<strong>多线程</strong>的情况，使用<code>StringBuffer</code>;</li><li>如果我们字符串<strong>很少修改</strong>，被多个对象引用，使用<code>String</code>，比如配置信息等。</li></ol><h2 id="六、Math类"><a href="#六、Math类" class="headerlink" title="六、Math类"></a>六、Math类</h2><blockquote><p>Math类主要使用其方法。</p><p>Math类中的方法都为静态(<code>static</code>)，可直接通过<code>Math.方法名()</code>调用。</p></blockquote><ol><li>常用方法<ul><li><code>abs()</code>：绝对值</li><li><code>pow()</code>：求幂</li><li><code>ceil()</code>：向上取整</li><li><code>floor()</code>：向下取整</li><li><code>round()</code>：四舍五入</li><li><code>sqrt()</code>：求开方</li><li><code>random()</code>：求随机数(返回0~1之间的一个随机小数)<ul><li><code>x=(int)(2+Math.random()*6)</code>返回整数x(2&lt;= x &lt;= 7)</li><li><code>x=Math.random()*6</code>返回小数x(0&lt;= x &lt; 6)</li><li><code>x=2+Math.random()*6</code>返回小数x(2&lt;= x &lt; 8)</li></ul></li><li><code>max()</code>：求两数最大值</li><li><code>min()</code>：求两数最小值</li></ul></li></ol><h2 id="七、Arrays类"><a href="#七、Arrays类" class="headerlink" title="七、Arrays类"></a>七、Arrays类</h2><h3 id="常用方法-1"><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h3><blockquote><p>Arrays包含了一系列静态方法，用于管理和操作数组(如排序和搜索)。</p></blockquote><ol><li><p><code>toString()</code>:返回数组的字符串形式；</p></li><li><p><code>sort()</code>:排序自然排序和定制排序；</p></li><li><p><code>binarySearch()</code>:通过二分法查找，要求排好序，如<code>int index=Arrays.binarySearch(arr,3);</code>；</p></li><li><p><code>copyOf()</code>:数组元素的复制(<code>Integer[] newArr=Arrays.copyOf(arr,arr.length);</code>)；</p></li><li><p><code>fill()</code>：数组元素的填充(<code>Integer[] num=new Integer[]{9,3,2};</code>)；</p></li><li><p><code>equals()</code>：比较两数组元素<strong>内容</strong>是否一致(<code>boolean equals=Arrays.equals(arr,arr2);</code>)；</p></li><li><p><code>asList()</code>：将一组值转换成List(<code>List&lt;Integer&gt; asList=Arrays.asList(2,3,4,5,6,1);</code>)；</p></li></ol><h3 id="sort排序的解读"><a href="#sort排序的解读" class="headerlink" title="sort排序的解读"></a>sort排序的解读</h3><ol><li>自然排序和定制排序</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//使用sort方法排序</span><span class="token class-name">Integer</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//1. 数组是引用类型，所以通过sort排序后会直接影响到实参 arr</span><span class="token comment">//2. sort重载的，也可以通过传入一个接口 Comparator 实现定制排序</span><span class="token comment">//3. 调用定制排序时，传入了2个参数：排序的数组arr和实现了Comparator接口的匿名内部类</span><span class="token comment">//  要求我们实现的compare()方法，由compare()方法返回值决定排序方式</span><span class="token comment">//默认排序</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"排序后："</span><span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//排序后：[-1, 0, 1, 7, 55]</span><span class="token comment">//定制排序</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//return o1 - o1; //从小到大</span><span class="token keyword">return</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">;</span> <span class="token comment">//从大到小</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"定制排序后"</span><span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//定制排序后[55, 7, 1, 0, -1]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>定制排序实现冒泡排序</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">bubble_1</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"普通冒泡排序："</span><span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//普通冒泡排序：[1, 2, 5, 6, 7, 9, 29, 45]</span><span class="token function">bubble_2</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> o2<span class="token operator">-</span>o1<span class="token punctuation">;</span> <span class="token comment">//从大到小</span><span class="token comment">//return o1-o2; //从小到大</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"定制的冒泡排序:"</span><span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//定制的冒泡排序:[45, 29, 9, 7, 6, 5, 2, 1]</span><span class="token punctuation">}</span><span class="token comment">//普通冒泡排序</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">bubble_1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>arr<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> tmp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//从小到大</span> <span class="token comment">// if(arr[j] &lt; arr[j+1]) //从大到小</span><span class="token punctuation">{</span>tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//定制的冒泡排序</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">bubble_2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>arr<span class="token punctuation">,</span><span class="token class-name">Comparator</span> comparator<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">int</span> tmp <span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//compare()返回值的大小决定排序方式</span><span class="token keyword">if</span><span class="token punctuation">(</span>comparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="八、System类"><a href="#八、System类" class="headerlink" title="八、System类"></a>八、System类</h2><h3 id="常用方法-2"><a href="#常用方法-2" class="headerlink" title="常用方法"></a>常用方法</h3><ol><li><code>exit</code>：退出当前程序；</li><li><code>arraycopy</code>：复制数组元素，比较适合底层调用；</li><li><code>currentTimeMillens</code>:返回当前时间距离<code>1970-1-1</code>的毫秒数；</li><li><code>gc</code>：运行垃圾回收机制<code>System.gc()</code>；</li></ol><h2 id="九、大数处理：BigInteger和BigDecimal"><a href="#九、大数处理：BigInteger和BigDecimal" class="headerlink" title="九、大数处理：BigInteger和BigDecimal"></a>九、大数处理：BigInteger和BigDecimal</h2><h3 id="BigerIntege"><a href="#BigerIntege" class="headerlink" title="BigerIntege"></a>BigerIntege</h3><ol><li>创建大数：<code>BigInteger bigInteger = new BigInteger("999999999999999999999999999999");</code>(字符串形式)；</li><li>四则运算：不能直接用<code>+-*/</code>，需要用对应的方法操作：<ul><li><code>add()</code>：加；<code>subtract()</code>：减；<code>multiply()</code>：乘；<code>divide()</code>：除</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//大数处理</span><span class="token class-name">BigInteger</span> bigInteger1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">"999999999999999999999999999999"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">BigInteger</span> bigInteger2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"原："</span><span class="token operator">+</span>bigInteger1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//大数运算</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"加："</span><span class="token operator">+</span>bigInteger1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>bigInteger2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"减："</span><span class="token operator">+</span>bigInteger1<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>bigInteger2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"乘："</span><span class="token operator">+</span>bigInteger1<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>bigInteger2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"除："</span><span class="token operator">+</span>bigInteger1<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>bigInteger2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：原：999999999999999999999999999999加：1000000000000000000000000000099减：999999999999999999999999999899乘：99999999999999999999999999999900除：9999999999999999999999999999 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="BigDecimal"><a href="#BigDecimal" class="headerlink" title="BigDecimal"></a>BigDecimal</h3><ol><li><p>当我们需要保留一个精度很高的数时，<code>double</code>不够用，可以用<code>BigDecimal</code>;</p></li><li><p>创建精度高的小数：<code>BigDecimal bigDecimal = new BigDecimal("199.99999999999999999999999999");</code>(字符串形式)；</p></li><li><p>四则运算方法同<code>BigerIntege</code>，但进行除法运算时，若出现结果是<strong>无限小数</strong>时，会出现<code>ArithmeticException</code>异常，解决方法：在除法运算时，用<code>BigDecimal.ROUND_CEILING</code>指定精度即可，如下：</p><p><code>System.out.println("除："+bigDecimal1.divide(bigDecimal2,BigDecimal.ROUND_CEILING));</code>//若出现无限小数，则结果的精度为分子的精度</p></li></ol><h2 id="十、日期类"><a href="#十、日期类" class="headerlink" title="十、日期类"></a>十、日期类</h2><h3 id="第一代日期类-Date"><a href="#第一代日期类-Date" class="headerlink" title="第一代日期类(Date)"></a>第一代日期类(Date)</h3><ol><li><code>Date</code>：精确到毫秒，代表特定的瞬间；</li><li><code>SimpleDateFormat</code>：格式和解析日期的类,SimpleDateFormat 格式化和解析日期的具体类。它允许进行格式化（日期-&gt;文本）、解析（文本-&gt;日期）和规范化。</li><li>代码演示：</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">ParseException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ParseException</span> <span class="token punctuation">{</span><span class="token comment">//转换时抛出异常</span><span class="token comment">//1. 获取当前时间，默认格式是国外的，可根据需求转换,此处Data是java.util中的</span><span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前时间（默认格式）："</span><span class="token operator">+</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：当前时间（默认格式）：Tue Apr 05 11:04:23 CST 2022</span><span class="token comment">//2. 获取某个时间对应的毫秒数</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：1649128077124</span><span class="token comment">//3. 通过指定的毫秒数来获取时间</span><span class="token class-name">Date</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">36000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：Thu Jan 01 08:00:36 CST 1970</span><span class="token comment">//4. 格式转换</span><span class="token class-name">SimpleDateFormat</span> simpleDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月dd日 hh:mm:ss E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> format <span class="token operator">=</span> simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//format将日期转换成指定格式</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"格式转换后的时间："</span><span class="token operator">+</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：格式转换后的时间：2022年04月05日 11:15:51 周二</span><span class="token comment">//把一个字符串转换成对应的Date</span><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"1996年01月25日 10:20:31 星期四"</span><span class="token punctuation">;</span><span class="token class-name">Date</span> date2 <span class="token operator">=</span> simpleDateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//转换若字符串格式和指定格式不同时会抛出异常</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"字符串转日期(默认格式)："</span><span class="token operator">+</span>date2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：字符串转日期(默认格式)：Thu Jan 25 10:20:31 CST 1996</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"字符串转日期(修正格式)："</span><span class="token operator">+</span>simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：字符串转日期(修正格式)：1996年01月25日 10:20:31 周四</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="第二代日期类-Calendar"><a href="#第二代日期类-Calendar" class="headerlink" title="第二代日期类(Calendar)"></a>第二代日期类(Calendar)</h3><ol><li><p><code>Calendar</code>是一个抽象类，并且构造器是<code>protected</code>类，需要用<code>getInstance()</code>获取实例，如：<code>Calender c = Calender.getInstance();</code></p></li><li><p>直接输出<code>Calender</code>实例会输出一个含有一系列字段的字符串，可根据需求选取；</p></li><li><p><code>Calender</code>没有专门的格式化方法，可根据需求组合输出。</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Calendar</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//创建日历实例</span><span class="token class-name">Calendar</span> c <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：java.util.GregorianCalendar[time=1649129565436,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Asia/Shanghai",offset=28800000,dstSavings=0,useDaylight=false,transitions=29,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2022,MONTH=3,WEEK_OF_YEAR=15,WEEK_OF_MONTH=2,DAY_OF_MONTH=5,DAY_OF_YEAR=95,DAY_OF_WEEK=3,DAY_OF_WEEK_IN_MONTH=1,AM_PM=0,HOUR=11,HOUR_OF_DAY=11,MINUTE=32,SECOND=45,MILLISECOND=436,ZONE_OFFSET=28800000,DST_OFFSET=0]</span><span class="token comment">//获取某个字段</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"年："</span><span class="token operator">+</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//年：2022</span><span class="token comment">//月要 +1,因为Calender的月从0开始</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"月："</span><span class="token operator">+</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//月：4</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日："</span><span class="token operator">+</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//日：5</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"12进制小时："</span><span class="token operator">+</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>HOUR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//12进制小时：11</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"24进制小时："</span><span class="token operator">+</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>HOUR_OF_DAY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//24进制小时：11</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"分钟："</span><span class="token operator">+</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MINUTE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//分钟：32</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"秒："</span><span class="token operator">+</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//秒：45</span><span class="token comment">//Calender没有专门的格式化方法，可根据需求组合输出</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"年"</span><span class="token operator">+</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"月"</span><span class="token operator">+</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"日"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：2022年4月5日</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="第三代日期-LocalDateTime"><a href="#第三代日期-LocalDateTime" class="headerlink" title="第三代日期(LocalDateTime)"></a>第三代日期(LocalDateTime)</h3><ol><li><p>前面两代日期类的不足分析：</p><blockquote><p>JDK1.0中包含了一个java.util.Date类，但是它的大多数方法已经在JDK1.1引入Calendar类之后被弃用了。而Calendar也存在问题是：</p></blockquote><ul><li>可变性：像日期和时间这样的类应该是不可变的；</li><li>偏移性：Date中的年份是从1900开始的，而月份都从0开始；</li><li>格式化：格式化只对Date有用，Calendar则不行；</li><li>此外，它们也不是线程安全的；不能处理闰秒等（每隔2天，多出1s）；</li></ul></li><li><p>声明方式</p><ul><li><code>LocalDateTime ldt=LocalDateTime.now();</code>//获取年月日时分秒</li><li><code>LocalDateTime ldt = LocalDate.now();</code>//只能获取年月日</li><li><code>LocalDateTime ldt = LocalTime.now();</code>//只能获取时分秒</li></ul></li><li><p><code>DateTimeFormatter</code>格式化:类似于SimpleDateFormat:</p><p><code>DateTimeFormatter dtf = DateTimeFormatter.ofPattern("格式");</code></p><p><code>String str= dtf.format(日期对象);</code></p></li><li><p><code>Instant</code>时间戳:类似于Date，提供了一系列<code>DateTimeFormatter</code>和<code>Date</code>相互转换的方式：</p><ul><li><strong>Instant –&gt; Date:</strong><code>Date date = Date.from(instant);</code></li><li><strong>Date –&gt; Instant:</strong><code>Instant instant = date.toInstant();</code></li></ul></li><li><p><code>LocalDateTime</code>提供了<code>plus</code>和<code>minus</code>方法可以对当前时间进行加或者减；</p><ul><li><code>plusDay()、plusMonths()、plusHours()</code>等等；</li><li><code>minusDay()、minusMonths()、minusHours()</code>等等；</li></ul></li><li><p>代码演示</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//1. LocalDateTime演示</span><span class="token class-name">LocalDateTime</span> ldt<span class="token operator">=</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取年月日时分秒</span><span class="token comment">//LocalDateTime ldt = LocalDate.now();//只能获取年月日</span><span class="token comment">//LocalDateTime ldt = LocalTime.now();//只能获取时分秒</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ldt<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：2022-04-05T12:47:15.763112100</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"年="</span><span class="token operator">+</span>ldt<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//年=2022</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"月="</span><span class="token operator">+</span>ldt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//月=APRIL</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"月="</span><span class="token operator">+</span>ldt<span class="token punctuation">.</span><span class="token function">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//月=4</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"日="</span><span class="token operator">+</span>ldt<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//日=5</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"时="</span><span class="token operator">+</span>ldt<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//时=12</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"分="</span><span class="token operator">+</span>ldt<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//分=47</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"秒="</span><span class="token operator">+</span>ldt<span class="token punctuation">.</span><span class="token function">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//秒=15</span><span class="token comment">//2. plus 和 minus 演示</span><span class="token comment">//当前时间 +800 天后的时间</span><span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"800天后的时间："</span><span class="token operator">+</span>localDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：800天后的时间：2024-06-13T13:16:22.456071300</span><span class="token comment">//当前时间 -3 月后的时间</span><span class="token class-name">LocalDateTime</span> localDateTime2 <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">minusMonths</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"3个月前的时间："</span><span class="token operator">+</span>localDateTime2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：3个月前的时间：2022-01-05T13:17:28.344965</span><span class="token comment">//使用DateTimeFormatter进行格式化</span><span class="token comment">//类似于SimpleDateFormat</span><span class="token class-name">DateTimeFormatter</span> dtf <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月dd日 hh:mm:ss E"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> str<span class="token operator">=</span> dtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>ldt<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：2022年04月05日 01:03:06 周二</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Java学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 枚举 </tag>
            
            <tag> 注解 </tag>
            
            <tag> 异常 </tag>
            
            <tag> 常用类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java笔记（一）</title>
      <link href="posts/1.html"/>
      <url>posts/1.html</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="Java面向对象初级"><a href="#Java面向对象初级" class="headerlink" title="Java面向对象初级"></a>Java面向对象初级</h1><h2 id="一、方法的重载"><a href="#一、方法的重载" class="headerlink" title="一、方法的重载"></a>一、方法的重载</h2><ol><li><p>注意事项和使用细节</p><ul><li>方法名必须相同；</li><li>形参列表必须不同（形参类型、个数或顺序至少有一个不同，参数名无要求）；</li><li>返回类型无要求。</li></ul></li><li><p><strong>可变参数</strong>：<code>public int sum(int ... nums)</code> 表示可接收多个参数。</p><ul><li><p>可变参数本质为数组；</p></li><li><p>参数为0个或多个；</p></li><li><p>实参可以为数组；</p></li><li><p>可以与普通参数放在同一形参列表，但必须<strong>放在最后</strong>；</p></li><li><p>一个形参列表中只能有一个可变参数。</p></li></ul></li></ol><h2 id="二、作用域"><a href="#二、作用域" class="headerlink" title="二、作用域"></a>二、作用域</h2><ol><li>全局变量有默认值，可以不用赋值，局部变量无默认值，需要赋值。</li><li>属性可以与局部变重名，使用时遵循就近一致原则。</li></ol><h2 id="三、构造器"><a href="#三、构造器" class="headerlink" title="三、构造器"></a>三、构造器</h2><ol><li><p>构造器是初始化对象，并非创建对象。</p></li><li><p>一个类可以定义多个不同的构造器，即构造器重载。</p></li><li><p>对象创建流程：</p><ul><li><p>对于以下代码：</p>   <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span> <span class="token comment">//默认初始化</span>    <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">;</span> <span class="token comment">//显式初始化</span>    <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">// 构造器</span>    <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> n<span class="token punctuation">,</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//构造器初始化</span>    name <span class="token operator">=</span> n<span class="token punctuation">;</span>    age <span class="token operator">=</span> a<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token class-name">Preson</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"小倩"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ol><ul><li><p>加载Person类的信息（<code>Person.class</code>），只加载一次；</p></li><li><p>在堆中分配空间（地址）；</p><ul><li><p>完成对象初始化：</p></li><li><p>默认初始化(age=0,name=null)</p></li><li><p>显式初始化(age=90,name=null)</p></li><li><p>构造器初始化(age=20,name=小倩)</p></li></ul></li><li><p>把对象在堆中的地址返回给p1（引用）</p></li></ul><h2 id="四、封装"><a href="#四、封装" class="headerlink" title="四、封装"></a>四、封装</h2><h3 id="封装的作用"><a href="#封装的作用" class="headerlink" title="封装的作用"></a>封装的作用</h3><ol><li>提高代码的安全性；</li><li>提高代码的复用性；</li><li>“高内聚”：封装细节，便于修改内部代码，提高可维护性；</li><li>“低耦合”：简化外部调用，便于调用者使用，便于扩展和写作。</li></ol><h3 id="封装主要代码"><a href="#封装主要代码" class="headerlink" title="封装主要代码"></a>封装主要代码</h3><ol><li><code>get()</code>和<code>set()</code>函数，如下：</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        person p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"小明"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> person <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//数据校验</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"名字长度不符合要求，默认张三！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"张三"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//数据校验</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>age <span class="token operator">&gt;</span> <span class="token number">120</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"年龄不符合要求，默认18！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="封装与构造器"><a href="#封装与构造器" class="headerlink" title="封装与构造器"></a>封装与构造器</h3><ol><li>构造器可破解封装中的数据校验，所以可进行下列操作：</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span>      <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span><span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>   person p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"小明"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"**********************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token string">"小明"</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">class</span> person <span class="token punctuation">{</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token punctuation">}</span>      <span class="token keyword">public</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//破解了数据校验</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>   <span class="token comment">//修复（构造器中调用set函数）</span>   <span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">setAge</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>      <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">return</span> name<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//数据校验</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"名字长度不符合要求，默认张三！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"张三"</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">else</span> <span class="token punctuation">{</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">return</span> age<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//数据校验</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>age <span class="token operator">&gt;</span> <span class="token number">120</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"年龄不符合要求，默认18！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">else</span> <span class="token punctuation">{</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="五、继承"><a href="#五、继承" class="headerlink" title="五、继承"></a>五、继承</h2><ol><li><p>创建子类对象时，不论使用子类的那个构造器，默认情况下都会调用父类的无参构造器，若父类没有提供无参构造器，则必须在子类的构造器中用super去指定父类中的构造器（如<code>super(String name,int age);</code>）以完成父类的初始化，否则编译不通过。</p></li><li><p>若希望指定去调用父类的某个构造器时，需要显式的调用一下：<code>super(参数列表)</code>。</p></li><li><p><code>super()</code>在使用时，必须放在构造器第一行(<code>this()</code>也是)，故两方法不能共存于同一个构造器中。</p></li><li><p><code>super()</code>和<code>this()</code>的区别：</p><ul><li><p><code>super()</code>访问父类中和子类<strong>重名</strong>的属性，若不重名，则和<code>this()</code>功能一致。</p></li><li><p><code>super()</code>直接访问父类中的属性（方法），<code>this()</code>先在本类中找属性（方法），再去父类中找属性（方法）。</p></li></ul></li><li><p>方法重载<code>overload</code>和方法重载<code>override</code>的比较：</p><ul><li>重载发生在子类，方法名一样，形参类别、个数或顺序至少有一个不同，返回类型和修饰符无要求；</li><li>重写发生在父子类，方法名一样，形参类别、个数或顺序都相同，子类重写的方法的返回类型和父类返回类型一致或是其子类，子类的权限不能小于父类。</li></ul></li></ol><h2 id="六、多态"><a href="#六、多态" class="headerlink" title="六、多态"></a>六、多态</h2><h3 id="方法的多态"><a href="#方法的多态" class="headerlink" title="方法的多态"></a>方法的多态</h3><ul><li>方法的重载和重写。</li></ul><h3 id="对象的多态"><a href="#对象的多态" class="headerlink" title="对象的多态"></a>对象的多态</h3><ul><li>一个对象的编译类型(<code>"="左边</code>)和运行类型(<code>"="右边</code>)可以不一致。</li></ul><h3 id="多态的向上转型"><a href="#多态的向上转型" class="headerlink" title="多态的向上转型"></a>多态的向上转型</h3><ul><li><p>本质：父类的引用指向子类的对象；</p></li><li><p><strong>语法：父类类型  引用名 = new 子类类型();</strong></p></li><li><p>特点：编译看左边，运行看右边；</p></li><li><p><strong>不能调用子类特有的成员。</strong></p></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//向上转型</span><span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>animal<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//根据就近原则先去Animal中找相应的方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="多态的向下转型"><a href="#多态的向下转型" class="headerlink" title="多态的向下转型"></a>多态的向下转型</h3><ul><li><p><strong>语法：子类类型  引用名  =  (子类类型)  父类引用;</strong></p></li><li><p>只能强转父类的引用，不能强制父类的对象(对象创建后不再改变)；</p></li><li><p>当向下转型后，可以调用子类类型中的所有成员；</p></li><li><p>要求父类的当前引用必须指向的是当前目标类型的对象。</p></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此时animal是指向Cat类型的对象</span><span class="token class-name">Cat</span> cat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">)</span> animal<span class="token punctuation">;</span><span class="token comment">//编译类型和运行类型都是Cat</span><span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">)</span> animal<span class="token punctuation">;</span><span class="token comment">//编译通过，运行报错，违反要求：要求父类的当前引用必须指向的是当前目标类型的对象。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="属性的“重写”"><a href="#属性的“重写”" class="headerlink" title="属性的“重写”"></a>属性的“重写”</h3><ol><li>属性无“重写”之说，属性只看<strong>编译类型</strong>，即“=”左边。</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10（编译类型为A，找A的属性）</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> extend <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li><code>instenceof</code>比较操作符，用于判断对象的<strong>运行类型</strong>是否为xx类型或xx类型的子类型。</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运行类型为B</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>b instenceof <span class="token class-name">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>b instenceof <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span><span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运行类型为B</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>a instenceof <span class="token class-name">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>a instenceof <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span><span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运行类型为Object</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>obj instenceof <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> extend <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="动态绑定机制"><a href="#动态绑定机制" class="headerlink" title="动态绑定机制"></a>动态绑定机制</h3><ul><li><p>当调用对象方法时，该方法会与该对象的内存地址/<strong>运行类型</strong>绑定；</p><p>(即若调用的方法子类没有而父类有，则先找到父类方法执行，但此时在父类方法中又需要执行子类和父类都有的方法时，需要看该对象的运行类型是哪个类，就执行那个类中的方法。<em>重名的方法和对象的运行类型动态绑定</em>)</p></li><li><p>当调用对象属性时，没有动态绑定机制，哪里声明，哪里使用。</p></li></ul><h3 id="多态数组"><a href="#多态数组" class="headerlink" title="多态数组"></a>多态数组</h3><ul><li>调用共有方法</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Person</span><span class="token punctuation">[</span><span class="token punctuation">]</span> persons <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//创建一个Person对象数组</span>persons<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>persons<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>persons<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//循环遍历多态数组，调用say方法</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> persons<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//此时需要注意动态绑定机制，编译类型都为Person，运行类型根据实际情况看</span>    persons<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>调用特有方法(使用类型判断  +  向下转型)</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Person</span><span class="token punctuation">[</span><span class="token punctuation">]</span> persons <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//创建一个Person对象数组</span>persons<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>persons<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>persons<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//循环遍历多态数组，调用say方法</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> persons<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>persons<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">)</span>persons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//向下转型</span>    student<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//((Student)persons[i]).study();</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="多态参数"><a href="#多态参数" class="headerlink" title="多态参数"></a>多态参数</h3><ul><li>方法定义的形参参数类型为父类类型，实参类型可以为子类类型]</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Syudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">getName</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//实参为student(子类)</span><span class="token keyword">void</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token class-name">Person</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">//形参为Person(父类)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="七、Object类详解"><a href="#七、Object类详解" class="headerlink" title="七、Object类详解"></a>七、Object类详解</h2><h3 id="equals方法"><a href="#equals方法" class="headerlink" title="equals方法"></a><code>equals</code>方法</h3><ol><li><p><code>==</code>和<code>equals</code>的对比</p><ul><li><code>==</code>既可以判断基本类型，又可以判断引用类型；</li><li><code>==</code>若判断基本类型(如比较数值大小时)，判断的是值是否相等；</li><li><code>==</code>若判断引用类型(如比较两对象时)，判断的是地址是否相等，即判断是否为同一个对象；</li><li><code>equals</code>是Object类中的方法，只能判断引用类型；</li><li><code>equals</code>默认判断的是地址是否相等，子类中往往重写该方法，用于判断内容是否相等。</li></ul></li><li><p>举例：Person类中equals方法的重写</p><p><strong>Person类中的equals重写，判断两对象地址或属性是否一样</strong></p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//Person p2 = p1;</span>            <span class="token class-name">Person</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>   <span class="token punctuation">}</span>      <span class="token comment">//Person类中的equals重写，判断两对象地址或属性是否一样</span>   <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span>   <span class="token punctuation">{</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span>   <span class="token punctuation">{</span>   <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>   <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>   <span class="token keyword">return</span> p<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span>age <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="hashCode"><a href="#hashCode" class="headerlink" title="hashCode"></a><code>hashCode</code></h3><ol><li><code>hashCode</code>的几点小结<ul><li>提高具有哈希结构的容器的效率；</li><li>两个引用，如果指向的时同一个对象，则哈希值肯定是一样的，否则不一样；</li><li>哈希值主要根据地址号来来的，不能完全将哈希值等价于地址；</li><li><code>hashCode</code>也会重写。</li></ul></li></ol><h3 id="toString方法"><a href="#toString方法" class="headerlink" title="toString方法"></a><code>toString</code>方法</h3><ol><li>默认返回：全类名+@+哈希值的16进制，子类往往重写<code>toString</code>方法，用于返回对象的属性信息；</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出：demo.Person@49e4cb85 1239731077</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>重写<code>toString</code>方法，打印对象或者拼接对象时，都会自动调用该对象的<code>toString</code>形式；</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java">   <span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>p1<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//输出：Person{name='a', age=10} 1945604815</span>        <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token comment">//重写toString方法，输出对象的属性</span>      <span class="token annotation punctuation">@Override</span>   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//重写后，一般输出对象的属性值，当然也可以自己定制</span>   <span class="token keyword">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>   <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>   <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>   <span class="token string">'}'</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>当直接输出一个对象时，<code>toString方</code>法会被默认调用。(如：<code>System.out.println(Person);</code>就会默认调用<code>Person.toString()</code>)</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//等价于System.out.println(p1.toString());</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="Java面向对象高级"><a href="#Java面向对象高级" class="headerlink" title="Java面向对象高级"></a>Java面向对象高级</h1><h2 id="一、-类变量和类方法"><a href="#一、-类变量和类方法" class="headerlink" title="一、 类变量和类方法"></a>一、 类变量和类方法</h2><h3 id="类变量（静态变量）"><a href="#类变量（静态变量）" class="headerlink" title="类变量（静态变量）"></a>类变量（静态变量）</h3><ol><li><p>定义语法：<code>访问修饰符 static 数据类型 变量名</code>(推荐)或<code>static 访问修饰符 数据类型 变量名</code>；</p></li><li><p>访问方法：<code>类名.类变量名</code>(推荐)或者<code>对象名.类变量名</code>；</p></li><li><p>类变量是被类声明的所有对象共享的，实例对象是对象独有的；</p></li><li><p>类变量在类加载的时候生成，即对象未创建是也可使用；</p></li><li><p><strong>jdk8</strong>以前类变量存放在<strong>方法区</strong>，jdk8以后类变量放在<strong>堆</strong>里；</p></li></ol><h3 id="类方法（静态方法）"><a href="#类方法（静态方法）" class="headerlink" title="类方法（静态方法）"></a>类方法（静态方法）</h3><ol><li><p>定义语法：<code>访问修饰符 static 数据返回类型 方法名(){}</code>(推荐)或<code>static 访问修饰符 数据返回类型 方法名(){}</code>；</p></li><li><p>调用方法：<code>类名.类方法名</code>(推荐)或者<code>对象名.类方法名</code>；</p></li><li><p>使用场景：将一些通用的方法设计成静态类，可以不创建对象就调用相关方法，如<code>Math.sqrt()</code>；</p></li><li><p>类方法和普通方法都是随着类的加载而加载，将结构信息储存在方法区，但类方法中无<code>this()</code>，普通方法中隐含<code>this()</code>；</p></li><li><p>类方法不允许使用和对象有关的关键字，如<code>super()</code>和<code>this()</code>，普通方法可以；</p></li><li><p>静态方法只能访问静态成员，而普通成员方法，既可以访问普通变量(方法)，也可以访问静态变量(方法)。</p></li></ol><h2 id="二、main方法语法"><a href="#二、main方法语法" class="headerlink" title="二、main方法语法"></a>二、<code>main</code>方法语法</h2><ol><li><p>解释<code>main</code>方法的形式：<code>public static void main(String[] args){}</code></p><ul><li><code>main</code>方法是虚拟机调用；</li><li>Java虚拟机需要调用类的<code>main()</code>方法，所以该方法的访问权限必须是<code>public</code>；</li><li>Java虚拟机在执行<code>main()</code>方法时不必创建对象，所以方法必须是<code>static</code>；</li><li>该方法接收String类型的数组参数，该数组中保存执行Java命令时传递给所运行的类的参数，即<code>java 执行的程序 参数1 参数2 参数3 ...</code>。</li></ul><p>有以下代码：</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"第"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"个参数为："</span> <span class="token operator">+</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>   在命令行编译执行观察参数：</p><p>   <img src="https://gitee.com/gqd000/blogimage/raw/master/img/202204022018469.png" alt="image-20220322115013733"></p><h2 id="三、代码块"><a href="#三、代码块" class="headerlink" title="三、代码块"></a>三、代码块</h2><ol><li>代码块相当于另一种形式的构造器(对构造器的补充机制)，可做初始化的操作；</li><li>代码块先于构造器加载；</li><li>静态代码块只在类加载时执行一次，普通代码块每创建一次对象就执行一次；</li><li>当只使用某个类的静态成员(未创建该类对象)时，该类的普通代码块不会被执行，但只要加载类时，静态代码块都会执行一次；</li><li>类什么时候加载：<ul><li>创建对象实例时(new)</li><li>创建子类对象实例，父类会被加载，即先加载父类(及其代码块或构造器)，再加载子类(及其代码块或构造器)</li><li>使用类的静态成员时(静态属性、静态成员)</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">A</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token keyword">int</span> a<span class="token punctuation">;</span><span class="token class-name">String</span> b<span class="token punctuation">;</span><span class="token comment">//静态代码块</span><span class="token keyword">static</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"静态代码块只执行一次！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//普通代码块</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输出公共代码。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"代码块无论放在哪个位置，都优先加载。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"普通代码块每创建一次对象就执行一次！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//构造器</span><span class="token keyword">public</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//System.out.println("输出公共代码。");</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token class-name">String</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//System.out.println("输出公共代码。");</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：静态代码块只执行一次！输出公共代码。代码块无论放在哪个位置，都优先加载。普通代码块每创建一次对象就执行一次！12=======================输出公共代码。代码块无论放在哪个位置，都优先加载。普通代码块每创建一次对象就执行一次！Hello */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="四、类中调用的顺序-重点补充"><a href="#四、类中调用的顺序-重点补充" class="headerlink" title="四、类中调用的顺序(重点补充)"></a>四、类中调用的顺序(重点补充)</h2><ol><li>在继承的类中，构造器的前面其实隐含了<code>super()</code>和普通代码块，故调用顺序为<code>父类中的代码块-&gt;父类中的构造器-&gt;子类中的代码块-&gt;子类中的构造器</code>，示例如下：</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token comment">//父类Object</span><span class="token punctuation">{</span><span class="token comment">//super()</span><span class="token comment">//普通代码块</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"A的代码块被调用。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//构造器</span><span class="token keyword">public</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"A的构造器被调用。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token comment">//super() 即父类A</span><span class="token comment">//普通代码块</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B的普通代码块被调用。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//构造器</span><span class="token keyword">public</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B的构造器被调用。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：A的代码块被调用。A的构造器被调用。B的普通代码块被调用。B的构造器被调用。 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>创建一个对象时，在一个类中调用的顺序是：</p><ul><li>调用静态代码块和静态属性初始化(两者优先级相同，若有多个，则按照定义顺序调用)</li><li>普通代码块和普通属性的初始化(两者优先级相同，若有多个，则按照定义顺序调用)</li><li>调用构造器方法</li></ul></li><li><p><strong>创建一个子类对象时(继承关系)，调用顺序是：</strong></p><ul><li><strong>父类</strong>的静态代码块和静态属性(优先级一样，按定义顺序执行)</li><li><strong>子类</strong>的静态代码块和静态属性(优先级一样，按定义顺序执行)</li><li><strong>父类</strong>的普通代码块和普通属性(优先级一样，按定义顺序执行)</li><li><strong>父类</strong>的构造方法</li><li><strong>子类</strong>的普通代码块和普通属性(优先级一样，按定义顺序执行)</li><li><strong>子类</strong>的构造方法</li></ul></li><li><p><em>补充</em>：静态代码块只能调用静态成员(静态属性和静态方法)，普通代码块可以调用任意成员(包括静态成员)。</p></li></ol><h2 id="五、单例设计模式"><a href="#五、单例设计模式" class="headerlink" title="五、单例设计模式"></a>五、单例设计模式</h2><blockquote><p>设计模式：是在大量的实践中总结和理论化后优选的代码结构、编程风格以及解决问题的思考方式。</p></blockquote><hr><blockquote><p>单例设计模式：采取一定的方法保证在整个软件系统中，对某个类只能存在<strong>一个对象实例</strong>，并且该类只提供一个取得其对象实例的方法。</p><p>单例模式有两种方式：饿汉式和懒汉式(<strong>都要保证对象的唯一性</strong>)</p></blockquote><h3 id="饿汉式-线程安全"><a href="#饿汉式-线程安全" class="headerlink" title="饿汉式(线程安全)"></a>饿汉式(<strong>线程安全</strong>)</h3><ul><li>饿汉式在类加载时创建对象实例；</li><li>饿汉式是不论是否要用某个对象，先将该对象创建好，故可能会出现多余对象，造成资源的浪费；</li><li>饿汉式线程安全。</li></ul><h3 id="懒汉式-线程不安全"><a href="#懒汉式-线程不安全" class="headerlink" title="懒汉式(线程不安全)"></a>懒汉式(<strong>线程不安全</strong>)</h3><ul><li>懒汉式在使用对象时才会创建对象实例；</li><li>懒汉式是先定义唯一的对象，然后在调用对象时再创建对象，不会出现多余对象浪费资源的情况；</li><li>懒汉式线程不安全。</li></ul><p><strong>演示代码<code>SingleTon.java</code>：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">CodeBase<span class="token punctuation">.</span>SingleTon</span><span class="token punctuation">;</span><span class="token comment">//饿汉式</span><span class="token comment">/*步骤：    1.将构造器私有化    2.在类的内部直接创建对象(该对象是static)    3.提供一个公共的static方法，返回创建好的对象 */</span><span class="token keyword">class</span> <span class="token class-name">SingleTon_1</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//先创建一个私有的静态对象</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SingleTon_1</span> singleTon_1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleTon_1</span><span class="token punctuation">(</span><span class="token string">"饿汉式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//构造器私有</span>    <span class="token keyword">private</span> <span class="token class-name">SingleTon_1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//公共静态方法返回创建好的对象</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SingleTon_1</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> singleTon_1<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//懒汉式</span><span class="token comment">/*步骤：    1.构造器私有化    2.先定义一个static对象，但不创建    3.定义一个public的static方法，可以返回一个对象 */</span><span class="token keyword">class</span> <span class="token class-name">SingleTon_2</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//先定义一个对象</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SingleTon_2</span> singleTon_2<span class="token punctuation">;</span>    <span class="token comment">//构造器私有</span>    <span class="token keyword">private</span> <span class="token class-name">SingleTon_2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment">//定义返回对象的方法</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SingleTon_2</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>singleTon_2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            singleTon_2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleTon_2</span><span class="token punctuation">(</span><span class="token string">"懒汉式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> singleTon_2<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleTon</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=============正常情况下============"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SingleTon_Test</span> singleTon_test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleTon_Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        singleTon_test<span class="token punctuation">.</span><span class="token function">singleTon1_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=========================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        singleTon_test<span class="token punctuation">.</span><span class="token function">singleTon2_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//测试对象是否位唯一</span><span class="token keyword">class</span> <span class="token class-name">SingleTon_Test</span> <span class="token punctuation">{</span>    <span class="token comment">//测试饿汉式对象</span>    <span class="token keyword">void</span> <span class="token function">singleTon1_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">SingleTon_1</span> test_singleTon_1_1 <span class="token operator">=</span> <span class="token class-name">SingleTon_1</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SingleTon_1</span> test_singleTon_1_2 <span class="token operator">=</span> <span class="token class-name">SingleTon_1</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>test_singleTon_1_1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"饿汉式对象一地址："</span> <span class="token operator">+</span> test_singleTon_1_1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"饿汉式对象二地址："</span> <span class="token operator">+</span> test_singleTon_1_2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//测试懒汉式对象</span>    <span class="token keyword">void</span> <span class="token function">singleTon2_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">SingleTon_2</span> test_singleTon_2_1 <span class="token operator">=</span> <span class="token class-name">SingleTon_2</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SingleTon_2</span> test_singleTon_2_2 <span class="token operator">=</span> <span class="token class-name">SingleTon_2</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>test_singleTon_2_1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"懒汉式对象一地址："</span> <span class="token operator">+</span> test_singleTon_2_1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"懒汉式对象二地址："</span> <span class="token operator">+</span> test_singleTon_2_2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：    饿汉式    饿汉式对象一地址：CodeBase.SingleTon.SingleTon_1@22f71333    饿汉式对象二地址：CodeBase.SingleTon.SingleTon_1@22f71333    ==========================    懒汉式    懒汉式对象一地址：CodeBase.SingleTon.SingleTon_2@6aaa5eb0    懒汉式对象二地址：CodeBase.SingleTon.SingleTon_2@6aaa5eb0 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>###多线程情况下的饿汉式和懒汉式</p><p><strong>未加线程锁演示代码<code>Thread_SingleTon.java</code>：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">CodeBase<span class="token punctuation">.</span>SingleTon</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread_SingleTon</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=============多线程情况下============"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread_SingleTon_Test<span class="token punctuation">.</span>Thread_Test_SingleTon_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread_SingleTon_Test<span class="token punctuation">.</span>Thread_Test_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//多线程饿汉式</span><span class="token keyword">class</span> <span class="token class-name">Thread_SingleTon_1</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//让线程停一会方便观察</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 饿汉式："</span><span class="token operator">+</span> <span class="token class-name">SingleTon_1</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//多线程懒汉式</span><span class="token keyword">class</span> <span class="token class-name">Thread_SingleTon_2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 懒汉式："</span> <span class="token operator">+</span> <span class="token class-name">SingleTon_2</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Thread_SingleTon_Test</span><span class="token punctuation">{</span>    <span class="token comment">//为饿汉式创建2个线程</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">Thread_Test_SingleTon_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">Thread</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Thread_SingleTon_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> two <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Thread_SingleTon_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//开启线程</span>        one<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>        two<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//为懒汉式创建2个线程</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">Thread_Test_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">Thread</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Thread_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> two <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Thread_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//开启线程</span>        one<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>        two<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出(一种情况):饿汉式为同一个对象，懒汉式为不同的对象    =============多线程情况下============    Thread-1 饿汉式：CodeBase.SingleTon.SingleTon_1@3f58200d    Thread-0 饿汉式：CodeBase.SingleTon.SingleTon_1@3f58200d    Thread-2 懒汉式：CodeBase.SingleTon.SingleTon_2@59355dd6    Thread-3 懒汉式：CodeBase.SingleTon.SingleTon_2@61034766*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="多线程中懒汉式的改进"><a href="#多线程中懒汉式的改进" class="headerlink" title="多线程中懒汉式的改进"></a>多线程中懒汉式的改进</h3><ul><li>为每个对象设置一个“互斥锁”，这表明，在每一个时刻只有一个线程持有该互斥锁，而其他线程若要获得该互斥锁，必须等到该线程（持有互斥锁的线程）将其释放。</li><li>为了使用这个“互斥锁”，在JAVA语言中提供了<code>synchronized</code>关键字，这个关键字即可修饰函数，也可以修饰代码，实际上可以将其理解为就是一个锁，当一个线程执行该临界代码的时候，用<code>synchronized</code>给该线程先上锁，其它线程进不来，当线程代码执行完了的时候有释放该锁，只不过释放锁是隐式的不需要显示的指明，随代码的执行完毕，锁自动的被释放；</li><li><code>volatile</code>关键字可以禁止指令重排。</li></ul><p><strong>演示代码：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">CodeBase<span class="token punctuation">.</span>SingleTon</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread_SingleTon</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=============改进懒汉式=============="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread_SingleTon_Test<span class="token punctuation">.</span>Test_Fix_Thread_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//多线程懒汉式改进</span><span class="token keyword">class</span> <span class="token class-name">Fix_SingleTon_2</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//先定义一个对象</span>    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">static</span> <span class="token class-name">Fix_SingleTon_2</span> fix_singleTon_2<span class="token punctuation">;</span> <span class="token comment">//第二层锁，volatile关键字禁止指令重排</span>    <span class="token comment">//构造器私有</span>    <span class="token keyword">private</span> <span class="token class-name">Fix_SingleTon_2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment">//定义返回对象的方法</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Fix_SingleTon_2</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fix_singleTon_2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">//第一层检查，检查是否有引用指向对象，高并发情况下会有多个线程同时进入</span>        <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Fix_SingleTon_2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment">//双重检查，防止多个线程同时进入第一层检查(因单例模式只允许存在一个对象，故在创建对象之前无引用指向对象，所有线程均可进入第一层检查)</span>                <span class="token comment">//假设没有第二层检查，那么第一个线程创建完对象释放锁后，后面进入对象也会创建对象，会产生多个对象</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>fix_singleTon_2 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    fix_singleTon_2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fix_SingleTon_2</span><span class="token punctuation">(</span><span class="token string">"多线程懒汉式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> fix_singleTon_2<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//多线程改进懒汉式</span><span class="token keyword">class</span> <span class="token class-name">Fix_Thread_SingleTon_2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 改进懒汉式："</span> <span class="token operator">+</span> <span class="token class-name">Fix_SingleTon_2</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Thread_SingleTon_Test</span><span class="token punctuation">{</span>    <span class="token comment">//为改进后的懒汉式创建2个线程</span>     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">Test_Fix_Thread_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>         <span class="token class-name">Thread</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Fix_Thread_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token class-name">Thread</span> two <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Fix_Thread_SingleTon_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//开启线程</span>         one<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>         two<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//此时对象唯一</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="六、final关键字"><a href="#六、final关键字" class="headerlink" title="六、final关键字"></a>六、<code>final</code>关键字</h2><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><ul><li>不希望类被继承时；</li><li>不希望父类的某个方法被子类覆盖、重写时；</li><li>不希望类中某个属性的值被修改时；</li><li>不希望某个局部变量被修改时。</li></ul><h3 id="注意事项及细节讨论"><a href="#注意事项及细节讨论" class="headerlink" title="注意事项及细节讨论"></a>注意事项及细节讨论</h3><ul><li><p><code>final</code>修饰的属性又叫常量，一般用<code>XX_XX_XX</code>命名；</p></li><li><p><code>final</code>修饰的属性在定义是赋初值，并且不能再修改，赋值可以在下列位置：</p><ul><li>定义时：如<code>public final double TAX_RATE=0.08</code>；</li><li>在构造器中；</li><li>在代码块中。</li></ul></li><li><p>若<code>final</code>修饰的属性时<strong>静态</strong>的，则初始化的位置只能在<strong>定义时</strong>和在<strong>静态代码块中</strong>，不能在构造器中赋值；</p></li><li><p><code>final</code>类不能继承，但可以实例化对象；</p></li><li><p>如类不是<code>final</code>类，但类里有<code>final</code>方法，则该方法不能被重写，但类可以被继承；</p></li><li><p>一般来说，若一个类已经是<code>final</code>类，则不需要在此类中写<code>final</code>方法；</p></li><li><p><code>final</code>不能修饰构造器；</p></li><li><p><code>final</code>往往和<code>static</code>配合使用，效率更高，底层编译器做了优化：</p><blockquote><p>如下代码：</p><ul><li>直接访问<code>static final</code>定义的属性时，编译时就知道了a的值，所以直接访问不会初始化<code>Final</code>类，即<code>static</code>代码块不会被加载；</li><li>当<code>static final</code>定义的属性需要某个方法来获取时，编译时无法知道b的值，只有运行时才能知道，所以在访问b的值时，需要先初始化类，即<code>static</code>代码块会被加载。</li></ul></blockquote></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">demo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"直接访问static final定义的属性："</span><span class="token operator">+</span><span class="token class-name">Final</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"访问static final定义的方法："</span><span class="token operator">+</span><span class="token class-name">Final</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Final</span> <span class="token comment">//父类Object</span><span class="token punctuation">{</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Final类被加载。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：直接访问static final定义的属性：10=======================Final类被加载。访问static final定义的方法：20 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>包装类(<code>Integer,Double,Float,Boolean</code>)等都是<code>final</code>类，<code>String</code>也是<code>final</code>类。</li></ul><h2 id="七、抽象类和抽象方法"><a href="#七、抽象类和抽象方法" class="headerlink" title="七、抽象类和抽象方法"></a>七、抽象类和抽象方法</h2><h3 id="基本概述"><a href="#基本概述" class="headerlink" title="基本概述"></a>基本概述</h3><ul><li>形式：<code>abstract class A{}</code>和<code>public abstract void B()</code>；</li><li>当父类方法不确定时，考虑将该方法设计为抽象方法；</li><li>所谓抽象方法就是没有实现的方法，即没有方法体；</li><li>当一个类中存在抽象方法时，需要将该类声明为抽象方法；</li><li>一般来说，抽象类会被继承，由子类实现其抽象方法。</li></ul><h3 id="使用细节"><a href="#使用细节" class="headerlink" title="使用细节"></a>使用细节</h3><ul><li>抽象类不能被实例化；</li><li>抽象类不一定包含抽象方法。包含抽象方法的类必须为抽象类；</li><li><code>abstract</code>只能修饰方法和类；</li><li>抽象类可以有任意成员，如非抽象方法、构造器、静态属性等；</li><li>若一个类继承了抽象类，则它必须实现抽象类的所有抽象方法，除非它自己也声明为抽象类；</li><li>抽象方法不能用<code>private,final,static</code>修饰，因为这些关键字都是和重写相违背的。</li></ul><h2 id="八、接口"><a href="#八、接口" class="headerlink" title="八、接口"></a>八、接口</h2><h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><ul><li><p>接口相当于提供了一个规范；</p></li><li><p>接口就是给出一些没有实现的方法，封装到一起，到某个类要使用时，在实现这些方法。</p></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">interface</span> 接口名<span class="token punctuation">{</span><span class="token comment">//属性</span><span class="token comment">//方法</span><span class="token punctuation">}</span><span class="token keyword">class</span> 类名 <span class="token keyword">implements</span> 接口<span class="token punctuation">{</span><span class="token comment">//自己属性</span><span class="token comment">//自己方法</span><span class="token comment">//必须实现接口的抽象方法</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>在jdk7.0以前，接口中所有方法都没有方法体，都是抽象方法；jdk8.0后，接口中可以有静态方法(<code>static</code>)和默认方法(<code>default</code>)，即接口中可以有方法的具体实现。</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">interface</span> <span class="token class-name">A</span><span class="token punctuation">{</span>    <span class="token comment">//抽象方法可以省略abstract</span>    <span class="token keyword">void</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//静态方法</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"静态方法。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//默认方法</span>    <span class="token keyword">default</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"默认方法。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="使用细节-1"><a href="#使用细节-1" class="headerlink" title="使用细节"></a>使用细节</h3><ul><li>接口不能被实例化；</li><li>接口中所有方法都是<code>public</code>，接口中抽象方法可以不用使用<code>abstract</code>；</li><li>一个普通类实现接口，必须将接口中所有方法实现；</li><li>抽象类实现接口时，可以不用实现接口抽象方法；</li><li>一个类可以同时实现多个接口，逗号间隔两个接口(<code>class A implements IB,IC</code>)；</li><li>接口中的属性只能是<code>final</code>的，而且是<code>public final static</code>修饰的，如<code>int a = 1;</code>，实际上是<code>public final static int a = 1;</code>即必须初始化；</li><li>接口中的属性访问形式：<code>接口名.属性</code>(静态属性访问)；</li><li>一个接口不能继承其他的类，但能继承其他的接口：<code>interface A extend B,C{}</code>；</li><li>接口的修饰符只能是public和默认。</li></ul><h3 id="接口VS-继承"><a href="#接口VS-继承" class="headerlink" title="接口VS.继承"></a>接口VS.继承</h3><blockquote><ul><li>继承相当于<strong>父子关系</strong>，子类生来就有(自动拥有)父类的一些属性和方法；而接口相当于<strong>师徒关系</strong>，某个类若想拥有某个接口的方法，则必须去学习(实现接口中方法)。</li><li>如子类需要拓展功能，可以通过实现接口的方式，实现接口可以理解为对java单继承机制的一种补充。</li></ul></blockquote><ul><li>解决问题不同<ul><li>继承：主要提高代码的复用性和可拓展性；</li><li>接口：设计、设计好各种规范(方法)，让其他人去实现这些方法；</li></ul></li><li>接口比继承更加灵活<ul><li>继承满足<code>is-a</code>的关系，而接口只需要满足<code>like-a</code>的关系；</li></ul></li><li>接口在一定程度上实现代码解耦(即：接口规范性+动态绑定)，低耦合，高内聚。</li></ul><h3 id="接口多态特性"><a href="#接口多态特性" class="headerlink" title="接口多态特性"></a>接口多态特性</h3><ol><li>多态参数</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//接口的多态体现</span>   <span class="token comment">//接口类型的变量 if01 可以指向实现了接口的对象实例</span>   <span class="token class-name">IF</span> if01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   if01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//继承的多态体现</span>   <span class="token comment">//父类类型的变量 a 可以指向继承A的子类的对象实例</span>   <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span>   <span class="token keyword">interface</span> IF<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token keyword">implements</span> IF<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Bar</span> <span class="token keyword">implements</span> IF<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>多态数组</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*给Usb数组中，存放 Phone 和 Camera 对象，Phone 类还有一个特有的方法 call()，遍历 Usb 数组，如果是 Phone 对象，除了调用 Usb 接口定义的方法外，还要调用 Phone 特有的方法 call()。 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//多态数组-&gt; 接口类型数组</span><span class="token class-name">Usb</span> usb<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Usb</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>usb<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>usb<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Camera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> usb<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>usb<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//动态绑定</span><span class="token comment">//类型判断 （类型的向下转型）</span><span class="token keyword">if</span> <span class="token punctuation">(</span>usb<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Phone</span><span class="token punctuation">)</span> <span class="token comment">//判断运行类型是否为 Phone</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Phone</span><span class="token punctuation">)</span> usb<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//向下转型</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Usb</span><span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token keyword">implements</span> <span class="token class-name">Usb</span><span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机可以打电话。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机工作中。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Camera</span> <span class="token keyword">implements</span> <span class="token class-name">Usb</span><span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"相机工作中。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：手机工作中。手机可以打电话。相机工作中。 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="接口多态传递"><a href="#接口多态传递" class="headerlink" title="接口多态传递"></a>接口多态传递</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//多态传递演示</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">IG</span> ig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/* 如果 IG 继承了 IH 接口，而 Teacher 实现了　IG　接口，   那么相当于 Teacher 实现了　IH　接口，这就是多态的传递 */</span><span class="token class-name">IH</span> ih <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">interface</span> IH<span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> IG <span class="token keyword">extends</span> IH <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token keyword">implements</span> IG<span class="token punctuation">{</span><span class="token comment">//接口可以继承</span><span class="token comment">//当接口IH中有抽象方法时，IG也继承了该方法，故在　Teacher 类中也需要实现方法</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"工作中。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="九、内部类"><a href="#九、内部类" class="headerlink" title="九、内部类"></a>九、内部类</h2><blockquote><p>类的五大成员：属性、方法、构造器、代码块、内部类。</p><p>内部类最大特点就是可以访问私有属性。</p></blockquote><h3 id="内部类的分类"><a href="#内部类的分类" class="headerlink" title="内部类的分类"></a>内部类的分类</h3><ol><li><p>定义在外部类局部位置上(如方法内)</p><ul><li>局部内部类（有类名）</li><li><strong>匿名内部类（无类名）</strong></li></ul></li><li><p>定义在外部类的成员位置上</p><ul><li>成员内部类（无<code>static</code>修饰）</li><li>静态内部类（有<code>static</code>修饰）</li></ul></li></ol><h3 id="局部内部类"><a href="#局部内部类" class="headerlink" title="局部内部类"></a>局部内部类</h3><ol><li><p>局部内部类定义在<strong>方法中</strong>或<strong>代码块中</strong>，其本质仍是一个类；</p></li><li><p>可以直接访问外部类的所有成员，包括私有的；</p></li><li><p>不能添加访问修饰符，因为它的地位是一个局部变量，局部变量不能访问修饰符的，但可以使用<code>final</code>修饰，以保证其不被继承，因为局部变量也可以使用<code>final</code>;</p></li><li><p>作用域：仅在定义它的方法或代码块中；</p></li><li><p>局部内部类访问局部内部类成员：直接访问；</p></li><li><p>外部类(内部类之外的第一个类)的方法中访问局部内部类成员：创建对象，再访问；</p></li><li><p>外部其他类(外部类之外的类)不能访问局部内部类；</p></li><li><p>若外部类和局部内部类的成员重名时，默认遵循就近一致原则，如果向访问外部类的成员，使用<code>外部类.this.成员</code>去访问，如下代码演示。</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span> <span class="token comment">//外部其他类</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Outer</span> outer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>outer<span class="token punctuation">.</span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"outer对象的hashcode："</span><span class="token operator">+</span>outer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token comment">//外部类</span><span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//方法</span><span class="token punctuation">{</span><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Inner</span><span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"n1="</span><span class="token operator">+</span>n1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//就近一致原则，访问局部内部类的 n1=200</span><span class="token comment">//此时 Outer.this 相当于一个对象(调用m1方法的对象，此时为outer)</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"n1="</span><span class="token operator">+</span><span class="token class-name">Outer</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>n1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//访问外部类的 n1=100</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Outer.this对象的hashcode："</span><span class="token operator">+</span><span class="token class-name">Outer</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token class-name">Inner</span> inner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>inner<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：n1=200n1=100Outer.this对象的hashcode：demo.Outer@7a5d012couter对象的hashcode：demo.Outer@7a5d012c */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h3><ol><li><p>本质详解</p><blockquote><p>有两个需求：</p><ul><li>需求1：使用IA接口，实现接口内方法<br>传统方法：单独用类实现接口方法，并创建对象，如tiger1</li><li>需求2：Tiger类只使用一次，后面不再使用，单独定义一个类浪费资源<br>解决方法：使用匿名内部类简化，如tiger2</li></ul></blockquote><p>解决代码：</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Outer</span> outer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>outer<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token comment">//外部类</span><span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//方法</span><span class="token punctuation">{</span><span class="token comment">//需求1</span><span class="token class-name">Tiger</span> tiger1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tiger1<span class="token punctuation">.</span><span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//需求2：使用匿名类</span><span class="token class-name">IA</span> tiger2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">IA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"(匿名类)老虎叫。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//IA tiger2 = () -&gt; System.out.println("(匿名类)老虎叫。。。");</span>tiger2<span class="token punctuation">.</span><span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">interface</span> IA<span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//需求1</span><span class="token keyword">class</span> <span class="token class-name">Tiger</span> <span class="token keyword">implements</span> IA<span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"(实现接口)老虎叫。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：(实现接口)老虎叫。。。(匿名类)老虎叫。。。*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>分析： </p><ul><li><p>tiger2的的编译类型是IA，运行内存就是匿名内部类；</p></li><li><p>内部匿名类的底层：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Outer</span>$<span class="token number">1</span> <span class="token keyword">implements</span> IA <span class="token comment">//Outer$1是系统分配的名称</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"(匿名类)老虎叫。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p><code>Jdk</code>底层在创建匿名内部类 Outer$1后，立即创建了Outer$1实例，并把地址返回给tiger2;</p></li><li><p>匿名内部类只使用一次就不再使用(对象可以多次使用)。</p></li></ul></li></ul><ol start="2"><li><p>匿名内部类的使用</p><ul><li><p>基于类的匿名内部类</p><ul><li><p><code>father</code>编译类型是<code>Father</code>，运行类型是<code>Outer$1</code>(匿名内部类)；</p></li><li><p>底层会创建匿名内部类：</p></li><li><p>同时也直接返回了匿名内部类<code>Outer$1</code>的对象。</p></li></ul></li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Outer</span>$<span class="token number">1</span> extend <span class="token class-name">Father</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"匿名内部类重写 Father中speak方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如下代码演示：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"> <span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name">Outer</span> outer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> outer<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>  <span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token comment">//外部类</span> <span class="token punctuation">{</span> <span class="token keyword">private</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//方法</span> <span class="token punctuation">{</span> <span class="token comment">//基于类的匿名内部类</span> <span class="token class-name">Father</span> father <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//匿名内部类也可使用构造器，Jack传递给构造器</span> <span class="token annotation punctuation">@Override</span> <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"匿名内部类重写 Father中speak方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"father对象的运行类型："</span><span class="token operator">+</span>father<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> father<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//基于抽象类的匿名内部类</span> <span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@Override</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物吃东西。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> animal<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>  <span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token keyword">public</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"接收到的名字："</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">/* 输出： 接收到的名字：Jack father对象的运行类型：class demo.Outer$1 匿名内部类重写 Father中speak方法 动物吃东西。*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li><p>使用细节</p><ul><li><p>调用可以动态绑定调用，也可以直接调用，内部类本身就会返回对象;</p></li><li><p>可以访问外部类的所有成员，包括私有成员；</p><ul><li><p>匿名内部类访问外部类成员：直接访问；</p></li><li><p>外部其他类(外部类之外的类)不能访问局部内部类；</p></li><li><p>若外部类和局部内部类的成员重名时，默认遵循就近一致原则，如果向访问外部类的成员，使用<code>外部类.this.成员</code>去访问。</p></li></ul></li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//动态绑定调用</span><span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物吃"</span><span class="token operator">+</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>animal<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">"草"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//直接调用</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回对象</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物吃"</span><span class="token operator">+</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">"草"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li><p>应用场景</p><ul><li>当作实参直接传递，如下代码演示：</li></ul><p>代码演示：</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*需求：实现一个多功能闹钟，可以提醒不同事件解决方法：1. 接口实现：代码繁杂        2. 内部匿名类当作实参  */</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Outer</span> outer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>outer<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token comment">//外部类</span><span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//方法</span><span class="token punctuation">{</span><span class="token class-name">CellPhone</span> cellPhone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CellPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//内部类直接当实参传递</span><span class="token class-name"><span class="token namespace">cellPhone<span class="token punctuation">.</span></span>SmartClock</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"起床了。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name"><span class="token namespace">cellPhone<span class="token punctuation">.</span></span>SmartClock</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"上课了。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Clock</span><span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">CellPhone</span><span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">SmartClock</span><span class="token punctuation">(</span><span class="token class-name">Clock</span> clock<span class="token punctuation">)</span><span class="token punctuation">{</span>clock<span class="token punctuation">.</span><span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//动态绑定</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：起床了。上课了。 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="成员内部类"><a href="#成员内部类" class="headerlink" title="成员内部类"></a>成员内部类</h3><ol><li><p>定义在外部类的成员位置；</p></li><li><p>可以直接访问外部类的所有成员，包含私有的；</p></li><li><p>可以添加任意访问修饰符，因为它的地位就是类的一个成员；</p></li><li><p>作用域：和外部类的其他成员一样，作用域为整个外部类体；</p></li><li><p>成员内部类访问外部类：直接访问；</p></li><li><p>外部类访问内部类：创建对象再访问；</p></li><li><p>若外部类和局部内部类的成员重名时，默认遵循就近一致原则，如果向访问外部类的成员，使用<code>外部类.this.成员</code>去访问；</p></li><li><p>外部其他类访问成员内部类：</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*需求：外部其他类访问成员内部类成员 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//方法1：相当于把new Inner()当作是outer的成员</span><span class="token class-name">Outer</span> outer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Outer<span class="token punctuation">.</span>Inner</span> inner1 <span class="token operator">=</span> outer<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>inner1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//方法2：在外部类中，编写一个方法，可以返回Inner对象</span><span class="token class-name">Outer<span class="token punctuation">.</span>Inner</span> inner2 <span class="token operator">=</span> outer<span class="token punctuation">.</span><span class="token function">getInner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>inner2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token comment">//外部类</span><span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Inner</span> <span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"成员内部类输出。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//方法2中获取对象的方法</span><span class="token keyword">public</span> <span class="token class-name">Inner</span> <span class="token function">getInner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回Inner类型的方法</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：成员内部类输出。成员内部类输出。 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h3><ol><li><p>定义在外部类的成员位置，并且有<code>static</code>修饰；</p></li><li><p>可以直接访问外部类的所有静态成员，包含私有的，但不能直接访问非静态成员；</p></li><li><p>可以添加任意访问修饰符，因为它的地位就是类的一个成员；</p></li><li><p>作用域：和外部类的其他成员一样，作用域为整个外部类体；</p></li><li><p>静态内部类访问外部类：直接访问所有静态成员；</p></li><li><p>外部类访问静态内部类：创建对象再访问；</p></li><li><p>若外部类和局部内部类的成员重名时，默认遵循就近一致原则，如果向访问外部类的成员，使用<code>外部类.成员</code>去访问；</p></li><li><p>外部其他类访问静态内部类：</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*需求：外部其他类访问静态内部类成员 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> test1 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//方法1：静态成员可以直接通过 类名.成员 访问(满足访问权限时)</span><span class="token class-name">Outer</span> outer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Outer<span class="token punctuation">.</span>Inner</span> inner1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer<span class="token punctuation">.</span>Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>inner1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//方法2：在外部类中，编写一个方法，可以返回Inner对象实例</span><span class="token class-name">Outer<span class="token punctuation">.</span>Inner</span> inner2 <span class="token operator">=</span> outer<span class="token punctuation">.</span><span class="token function">getInner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>inner2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当getInner()为静态时，也可应直接用类名访问，如下</span><span class="token comment">//Outer.getInner().say();</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token comment">//外部类</span><span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token keyword">int</span> n1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Inner</span> <span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"静态内部类输出。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">//方法2中获取对象的方法</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Inner</span> <span class="token function">getInner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回Inner类型的方法</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*输出：静态内部类输出。静态内部类输出。 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Java学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java面向对象 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对多态的简单理解</title>
      <link href="posts/946c.html"/>
      <url>posts/946c.html</url>
      
        <content type="html"><![CDATA[<h1 id="对多态的简单理解"><a href="#对多态的简单理解" class="headerlink" title="对多态的简单理解"></a>对多态的简单理解</h1><blockquote><p><strong>多态不能对子类的属性起作用</strong></p></blockquote><p>通过代码了解：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">deom</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> 多态 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>多态 duo <span class="token operator">=</span> <span class="token keyword">new</span> 多态<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>duo<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Animals animals = new Dog(); 父类引用子类的对象，调用子类重写的父类的方法</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"***********"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>duo<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Animals animals = new Cat(); 父类引用子类的对象，调用子类重写的父类的方法</span><span class="token punctuation">}</span><span class="token comment">//使用多态时写的函数</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Animals</span> animals<span class="token punctuation">)</span><span class="token punctuation">{</span>animals<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>animals<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"age:"</span><span class="token operator">+</span>animals<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//多态不能对子类的属性起作用</span><span class="token punctuation">}</span><span class="token comment">//不使用多态时写的函数（实现相同功能）</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">{</span>dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">{</span>cat<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cat<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//由此可见，使用多态可以增加代码的复用性</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Animals</span><span class="token punctuation">{</span><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物吃东西。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动物叫。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animals</span><span class="token punctuation">{</span><span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"小猫吃鱼。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"喵喵喵！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animals</span><span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"小狗吃肉。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"汪汪汪！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">////输出：</span><span class="token comment">//小狗吃肉。</span><span class="token comment">//汪汪汪！</span><span class="token comment">//***********</span><span class="token comment">//小猫吃鱼。</span><span class="token comment">//喵喵喵！</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CodeBase </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu20.04的初体验</title>
      <link href="posts/8f7a.html"/>
      <url>posts/8f7a.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、预备工作"><a href="#一、预备工作" class="headerlink" title="一、预备工作"></a>一、预备工作</h1><h2 id="1-下载VMware并安装"><a href="#1-下载VMware并安装" class="headerlink" title="1. 下载VMware并安装"></a>1. 下载<a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html"><strong>VMware</strong></a>并安装</h2><p><del>(许可证：ZF3R0-FHED2-M80TY-8QYGC-NPKYF)</del></p><h2 id="2-下载Ubuntu镜像"><a href="#2-下载Ubuntu镜像" class="headerlink" title="2. 下载Ubuntu镜像"></a>2. 下载<a href="https://ubuntu.com/download/desktop">Ubuntu镜像</a></h2><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/v2-0528c3ad69dfe7d8567e5f4bc99bcc5b_1440w.jpg" alt="Ubuntu20.04"></p><h1 id="二、-新系统调整"><a href="#二、-新系统调整" class="headerlink" title="二、 新系统调整"></a>二、 新系统调整</h1><h2 id="1-软件换源"><a href="#1-软件换源" class="headerlink" title="1. 软件换源"></a>1. 软件换源</h2><ul><li><p>在换源之前，要先对原来的源进行备份，在Ubuntu中，软件源存在/etc/apt/sources.list中，用以下命令备份：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>打卡文件 <code>/etc/apt/sources.list</code>：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> gedit /etc/apt/sources.list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>删除文件里的内容，并复制要换的源（如阿里源）：</p><pre class="line-numbers language-none"><code class="language-none"># 阿里源deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># 网易源deb http://mirrors.163.com/ubuntu/ wily main restricted universe multiversedeb http://mirrors.163.com/ubuntu/ wily-security main restricted universe multiversedeb http://mirrors.163.com/ubuntu/ wily-updates main restricted universe multiversedeb http://mirrors.163.com/ubuntu/ wily-proposed main restricted universe multiversedeb http://mirrors.163.com/ubuntu/ wily-backports main restricted universe multiversedeb-src http://mirrors.163.com/ubuntu/ wily main restricted universe multiversedeb-src http://mirrors.163.com/ubuntu/ wily-security main restricted universe multiversedeb-src http://mirrors.163.com/ubuntu/ wily-updates main restricted universe multiversedeb-src http://mirrors.163.com/ubuntu/ wily-proposed main restricted universe multiversedeb-src http://mirrors.163.com/ubuntu/ wily-backports main restricted universe multiverse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># 清华源deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiversedeb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>更新源</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>更新软件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> upgrade<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>大功告成！</p></li></ul><h1 id="三、番外篇"><a href="#三、番外篇" class="headerlink" title="三、番外篇"></a>三、番外篇</h1><h2 id="1-VMware的完全卸载"><a href="#1-VMware的完全卸载" class="headerlink" title="1. VMware的完全卸载"></a>1. VMware的完全卸载</h2><blockquote><p>Vmware卸载后会有残余，这会导致我们再次安装后出现各种问题，非常麻烦，于是以下是Vmware完全卸载的方法。</p></blockquote><ul><li><p>将Vmware相关的服务停止，如下：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210915225708434.png" alt="image-20210915225708434"></p></li><li><p>删除注册表</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210915231814731.png" alt="image-20210915231814731"></p></li><li><p>在任务管理器结束Vmware相关的进程</p></li><li><p>卸载Vmware程序</p></li><li><p>结束！</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux相关 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何优雅地用IDEA刷LeetCode</title>
      <link href="posts/ad0e.html"/>
      <url>posts/ad0e.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何优雅地用IDEA刷LeetCode"><a href="#如何优雅地用IDEA刷LeetCode" class="headerlink" title="如何优雅地用IDEA刷LeetCode"></a>如何优雅地用IDEA刷LeetCode</h1><ol><li><p>点击右上角<code>文件-&gt;设置-&gt;Plugins</code>，搜索leetcode，找到leetcode editor并安装，如下图：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210415210517555.png" alt="image-20210415210517555"></p></li><li><p>在IDEA右侧边点击leetcode，打开插件主界面后打开设置：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210415211241139.png" alt="image-20210415211241139"></p></li><li><p>CodeFileName处填：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">P</span>$<span class="token operator">!</span><span class="token punctuation">{</span>question<span class="token punctuation">.</span>frontendQuestionId<span class="token punctuation">}</span>$<span class="token operator">!</span>velocityTool<span class="token punctuation">.</span><span class="token function">camelCaseName</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>titleSlug<span class="token punctuation">}</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>CodeTemplate处填：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token keyword">package</span> <span class="token namespace">leetcode<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>cn</span><span class="token punctuation">;</span> <span class="token comment">// 此处不要改</span><span class="token comment">//Java：${question.title}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">P</span>$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>frontendQuestionId<span class="token punctuation">}</span>$<span class="token operator">!</span>velocityTool<span class="token punctuation">.</span><span class="token function">camelCaseName</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>titleSlug<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Solution</span> solution <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">P</span>$<span class="token operator">!</span><span class="token punctuation">{</span>question<span class="token punctuation">.</span>frontendQuestionId<span class="token punctuation">}</span>$<span class="token operator">!</span>velocityTool<span class="token punctuation">.</span><span class="token function">camelCaseName</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>titleSlug<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// TO TEST</span>    <span class="token punctuation">}</span>    $<span class="token punctuation">{</span>question<span class="token punctuation">.</span>code<span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>填完之后点应用，确定。</p></li><li><p>然后点如下操作：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210415211744092.png" alt="image-20210415211744092"></p></li><li><p>大功告成，去刷题吧。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java自定义排序以及lambda表达</title>
      <link href="posts/3456.html"/>
      <url>posts/3456.html</url>
      
        <content type="html"><![CDATA[<h1 id="Java的自定义排序以及lambda表达"><a href="#Java的自定义排序以及lambda表达" class="headerlink" title="Java的自定义排序以及lambda表达"></a>Java的自定义排序以及lambda表达</h1><p><em>以数组某个元素的大小排序为例：</em></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span><span class="token punctuation">;</span><span class="token comment">//将大数组中的小数组按照右端点元素大小升序排序</span><span class="token keyword">public</span> <span class="token keyword">class</span> 自定义排序 <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>普通写法 result1 <span class="token operator">=</span> <span class="token keyword">new</span> 普通写法<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>result1<span class="token punctuation">.</span><span class="token function">zipai</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"普通写法输出："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>lambda表达 result2 <span class="token operator">=</span> <span class="token keyword">new</span> lambda表达<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>result2<span class="token punctuation">.</span><span class="token function">zipai</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"lambda表达写法输出："</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> 普通写法<span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">zipai</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> o1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> o2<span class="token punctuation">)</span> <span class="token comment">//使用Comparator时需要有compare函数</span><span class="token punctuation">{</span><span class="token keyword">return</span> o1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>o2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//升序</span><span class="token comment">// return o2[1]-o1[1]; //降序</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> lambda表达<span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">zipai</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>o2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//比较负数会越界</span>        <span class="token comment">// Arrays.sort(a,(o1, o2) -&gt; o1[1]&gt;o2[1]?1:-1); 完整写法</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CodeBase </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决git push速度慢的问题</title>
      <link href="posts/3a4c.html"/>
      <url>posts/3a4c.html</url>
      
        <content type="html"><![CDATA[<h1 id="解决git-push速度慢的问题"><a href="#解决git-push速度慢的问题" class="headerlink" title="解决git push速度慢的问题"></a>解决git push速度慢的问题</h1><blockquote><p>今天更新一篇文章，内容比较多，所以在部署的过程中遇到了push速度慢的问题，即使kx上网全局也无济于事，最后通过查阅一些文章找到了解决方法。</p></blockquote><p>开始时，我用git协议部署，即使kx上网全局也会卡在Writing objects上：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413224633524.png" alt="image-20210413224633524"></p><p>后来查阅资料发现，git可以使用代理，但Windows配置git协议的代理比较麻烦，所以用了https协议来部署（https协议的代理比较容易配置<span class="github-emoji"><span>😂</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>）：<img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413224940881.png" alt="image-20210413224940881"></p><p>现在可以愉快的配置代理了:(</p><pre class="line-numbers language-none"><code class="language-none"># 端口号根据自身情况决定# 需要鉴权git config http.proxy http://username:password@127.0.0.1:1080 # 需要鉴权# 非全局代理git config http.proxy http://127.0.0.1:1080# 全局代理（所有项目）git config --global http.proxy http://127.0.0.1:1080# 查看全局代理git config --get --global http.proxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>好了，问题解决了，享受这丝滑吧！<span class="github-emoji"><span>😹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f639.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413225625508.png" alt="image-20210413225625508"></p>]]></content>
      
      
      <categories>
          
          <category> 搭建博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Github Pages+Vercel搭建博客(详细)</title>
      <link href="posts/c7e2.html"/>
      <url>posts/c7e2.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-Github-Pages-Vercel搭建博客-详细"><a href="#Hexo-Github-Pages-Vercel搭建博客-详细" class="headerlink" title="Hexo+Github Pages+Vercel搭建博客(详细)"></a>Hexo+Github Pages+Vercel搭建博客(详细)</h1><blockquote><p>本篇文章主要写一些我搭建这个博客的详细过程以及一些踩坑记录。</p><p><strong>持续更新中~~</strong></p></blockquote><h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>此博客是采用用<a href="https://hexo.io/zh-cn/">Hexo</a>博客框架搭建的。Hexo是一个由Node.js驱动的快速，简单且功能强大的静态博客框架。它能快速生成由<strong>MarkDown</strong>等渲染的文章，总有数百个主题和插件可供使用，并且支持<strong>一键部署</strong>到Github Pages上。<br>而本博客就是部署到Github Pages上并用<a href="https://vercel.com/">Vercel</a>加速国内访问的(后面会详细说明)，采用了<a href="https://github.com/blinkfox/hexo-theme-matery">Matery</a>主题。</p><h1 id="二、准备工作"><a href="#二、准备工作" class="headerlink" title="二、准备工作"></a>二、准备工作</h1><h2 id="1-Node-js环境配置"><a href="#1-Node-js环境配置" class="headerlink" title="1. Node.js环境配置"></a>1. Node.js环境配置</h2><ul><li><p>①首先去<a href="https://nodejs.org/en/download/">Node.js官网</a>下载安装程序，一路默认即可(路径可根据自己的需求更改)，然后安装。</p></li><li><p>②测试是否安装成功及环境变量是否正确。在cmd命令行输入：<code>node -v</code>查看效果。若出现：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413160808990.png" alt="image-20210413160808990"></p><p>则说明环境变量添加完成，进行下一步。如果报错，则需要手动添加环境变量：右击点击我的电脑 -&gt; 属性 -&gt; 高级系统设置 -&gt; 环境变量，在系统变量下找到名为 path 的变量名，双击Path，点击添加，将node.js的安装复制进去即可。</p></li><li><p>③改npm的源(将npm的源改为国内镜像了提高访问和下载速度)</p><pre class="line-numbers language-none"><code class="language-none"># 查看npm的配置npm config list# 默认源npm config set registry https://registry.npmjs.org# 临时改变镜像源npm --registry=https://registry.npm.taobao.org# 永久设置为淘宝镜像源npm config set registry https://registry.npm.taobao.org<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="2-Git的安装及配置"><a href="#2-Git的安装及配置" class="headerlink" title="2.Git的安装及配置"></a>2.Git的安装及配置</h2><ul><li>①首先去<a href="https://git-scm.com/">Git官网</a>下载安装程序，一路默认Next(有特殊需求可改一些配置)，安装。</li><li>②安装完成后右键桌面会出现两个和Git相关的选项，表示安装成功。</li></ul><h2 id="3-Git连接Github以及配置SSH连接"><a href="#3-Git连接Github以及配置SSH连接" class="headerlink" title="3.Git连接Github以及配置SSH连接"></a>3.Git连接Github以及配置SSH连接</h2><ul><li><p>①Git账户邮箱配置。在桌面点击鼠标右键，点击 <code>Git Bash Here</code>，并分别输入以下命令并回车：</p><pre class="line-numbers language-none"><code class="language-none">git config --global user.name "此处填写你Github的用户名"git config --global user.email "此处填写你Github的邮箱"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>②SSH连接。在桌面点击鼠标右键，点击 <code>Git Bash Here</code>。输入以下代码并一直回车：</p><pre class="line-numbers language-none"><code class="language-none">ssh-keygen -t rsa -C “your_email@example.com” # 引号里填你的Github注册邮箱<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>③提交SSH私钥。在 C:/Users/[Windows用户名] 目录下找到名为.ssh 的文件夹，找到并用记事本打开<code>id_rsa.pub</code>，复制里面的内容。然后到GitHub上点击右上角头像，进入settings：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413161348594.png" alt="image-20210413161348594"></p></li><li><p>④新建SSH密钥：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413161538670.png" alt="image-20210413161538670"></p></li><li><p>⑤添加密钥：<img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413161824201.png" alt="image-20210413161824201"></p></li></ul><h2 id="4-测试是否连成功"><a href="#4-测试是否连成功" class="headerlink" title="4. 测试是否连成功"></a>4. 测试是否连成功</h2><ul><li>在<code>Git Bush</code>或者<code>cmd</code>输入<code>ssh -T git@github.com</code>，如果出现以下语句则说明连接成功：<img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413180723039.png" alt="image-20210413180723039"></li></ul><p><strong>注意事项：</strong></p><ol><li><p>仓库名称尽量命名为**(example).github.io**(example)为GitHub账户名，方便Hexo部署；</p></li><li><p>建完仓库后如果分支不是master，则需新建master分支：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413164650054.png" alt="image-20210413164650054"></p></li><li><p>点击仓库的Settings，进入Pages：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413164208605.png" alt="image-20210413164208605"></p></li><li><p>将默认分支设置为master：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413165433792.png" alt="image-20210413165433792"></p></li><li><p>将Page指向master分支后save：</p><p><img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413164758578.png" alt="image-20210413164208605"></p></li><li><p>此时以及可以通过：<code>https://example.github.io</code>(example为GitHub用户名)访问网页了，如果有<code>readme</code>文档则显示<code>readme</code>文档内容，否则显示<strong>404 File not found</strong><span class="github-emoji"><span>😂</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>。至此，GitHub Pages页面创建完成。</p></li></ol><h1 id="三、开始搭建博客"><a href="#三、开始搭建博客" class="headerlink" title="三、开始搭建博客"></a>三、开始搭建博客</h1><h2 id="1-建立本地博客站点文件夹"><a href="#1-建立本地博客站点文件夹" class="headerlink" title="1.建立本地博客站点文件夹"></a>1.建立本地博客站点文件夹</h2><ul><li><p>①选定一个磁盘，新建文件夹（如：example），在该文件夹所在目录（不是example文件夹里）右键<code>Git Bush Here</code>,然后依次输入以下命令并等待执行完毕：</p><pre class="line-numbers language-none"><code class="language-none"># hexo框架的安装npm install -g hexo-cli# 等上一个命令完成后，在输入下面的命令hexo init example #（新建文件夹的名称）初始化文件夹cd example #（新建文件夹的名称）npm install  # 安装博客所需要的依赖文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>②执行完毕后进入站点文件夹（example），此时已初始化完成，包含一些文件。右键<code>Git Bush Here</code>,执行以下命令：</p><pre class="line-numbers language-none"><code class="language-none">hexo ghexo s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>然后打开浏览器，输入：<code>http://localhost:4000</code>或<code>127.0.0.1:4000</code>即可看到博客在本地的运行。</p></li></ul><h2 id="2-本地博客部署到GitHub上"><a href="#2-本地博客部署到GitHub上" class="headerlink" title="2. 本地博客部署到GitHub上"></a>2. 本地博客部署到GitHub上</h2><ul><li><p>①安装部署插件，在站点文件夹（example）中执行；</p><pre class="line-numbers language-none"><code class="language-none">npm install hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>②修改配置文件。把<code>_config.yml</code>用代码编辑器（如Vscode）打开，修改站点主要的属性：</p><pre class="line-numbers language-none"><code class="language-none">title: 你的博客名subtitle: 博客的副标题，有些主题支持description: 博客描述keywords: 博客关键词author: 作者，在文章中显示language: 博客语言语种，简体中文为：zh-CN   timezone: 时区（可不用填，hexo默认使用电脑时区）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改url：<img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413220354674.png" alt="image-20210413220354674"></p><p>拉到文件最底部，在 deploy 下面添加一个 repo 项：<img src="https://gitee.com/gqd000/blogimage/raw/master/img/image-20210413220753293.png" alt="image-20210413220753293"></p></li><li><p>③部署到GitHub 上。运行以下命令：</p><pre class="line-numbers language-none"><code class="language-none"># Hexo会根据配置文件渲染出一套静态页面hexo g# 将上一步渲染出的一系列文件上传至至Github Pageshexo d# 也可以直接输入此命令，直接完成渲染和上传hexo g -d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>至此，已经可以通过<code>https://&lt;用户名&gt;.github.io</code>访问博客啦！<span class="github-emoji"><span>🎉</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最简易的贪心算法</title>
      <link href="posts/7974.html"/>
      <url>posts/7974.html</url>
      
        <content type="html"><![CDATA[<h1 id="最简易的贪心算法"><a href="#最简易的贪心算法" class="headerlink" title="最简易的贪心算法"></a>最简易的贪心算法</h1><blockquote><p>参考资料：<a href="https://github.com/gqd000/Leetcode-note/blob/main/%E8%B0%B7%E6%AD%8C%E9%AB%98%E7%95%85Leetcode%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0.pdf"><strong>谷歌高畅Leetcode刷题笔记</strong></a>。</p><p>题目网址：<a href="https://leetcode-cn.com/"><strong>LeetCode</strong></a>。</p></blockquote><h2 id="算法解释"><a href="#算法解释" class="headerlink" title="算法解释"></a>算法解释</h2><p>顾名思义，贪心算法或贪心思想采用贪心的策略，保证每次操作都是<strong>局部最优的</strong>，从而使最后得到的结果是<strong>全局最优的</strong>。全局最优结果是局部最优结果的和，且局部结果<strong>互不相干</strong>！</p><h2 id="例题及题解"><a href="#例题及题解" class="headerlink" title="例题及题解"></a>例题及题解</h2><h3 id="分配问题"><a href="#分配问题" class="headerlink" title="分配问题"></a>分配问题</h3><h4 id="455-分发饼干-（简单）"><a href="#455-分发饼干-（简单）" class="headerlink" title="455.分发饼干 （简单）"></a><strong><a href="https://leetcode-cn.com/problems/assign-cookies/">455.分发饼干</a></strong> （简单）</h4><p><strong>题目大意：</strong></p><blockquote><p>给我们一堆饼干和一群孩子，要求我们把饼干分给孩子，每个孩子有一个饥饿值，每个饼干有一个饱腹值，且每个孩子只能分一个饼干，要求我们求出最多能吃饱的孩子数量。</p></blockquote><p><strong>解题思路：</strong></p><blockquote><p>首先可以分别将孩子饥饿值的数组和饼干饱腹值的数组升序排序，然后<strong>饥饿值最小</strong>的孩子吃<strong>饱腹值最少</strong>的饼   干，这样依次取值即可满足局部最优，局部最优加和即全局最优。</p></blockquote><p><strong>解题代码：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findContentChildren</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> g<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> g<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>i<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span>j<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> i<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="135-分发糖果（困难）"><a href="#135-分发糖果（困难）" class="headerlink" title="135. 分发糖果（困难）"></a>135. <a href="https://leetcode-cn.com/problems/candy/">分发糖果</a>（困难）</h4><p><strong>题目大意：</strong></p><blockquote><p>一群孩子站成一排，每个孩子有自己的评分，现在要求我们给这些孩子分发糖果，要求：</p><ul><li>1.每个孩子至少分配一个糖果。</li><li>2.评分高于两侧的孩子得到的糖果数量必须高于两侧孩子得到的糖果数量。</li><li>求出至少需要准备的糖果数。</li></ul></blockquote><p><strong>解题思路：</strong></p><blockquote><p>这道题我们不再需要排序，只需要<strong>左右两次遍历</strong>即可，设数组cano记录每个孩子分得的糖果数量，数组ratings记录孩子的评分。首先我们初始化cano数组为<strong>1</strong>（即初始为糖果总数最小值），然后对数组ratings<strong>从左向右（左条件）</strong>进行遍历，当<code>ratings[i+1]&gt;ratings[i]</code>时，<code>cano[i+1]+1</code>；最后对ratings进行<strong>从右向左（右条件）</strong>遍历，与左边不同的是，此次遍历不能直接更新数组cano的值，需要取更新值和原值中大的值，即:<br>$$<br>cano(i+1)= max(cano(i),cano(i+1))。<br>$$<br>这样做即可同时满足左条件和右条件。</p></blockquote><p><strong>解题代码：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">candy</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ratings<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">int</span> ct <span class="token operator">=</span> ratings<span class="token punctuation">.</span>length<span class="token punctuation">,</span>cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>cano <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>ct<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> ct<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cano<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> ct <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ratings<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> ratings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> cano<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>cano<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> ct <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token comment">//满足左规则后右规则可能会更新数据，因此取最大值保证同时满足左右规则</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ratings<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> ratings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> cano<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>cano<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>cano<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> it<span class="token operator">:</span>cano<span class="token punctuation">)</span><span class="token punctuation">{</span>cnt<span class="token operator">+=</span>it<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> cnt<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="区间问题"><a href="#区间问题" class="headerlink" title="区间问题"></a>区间问题</h3><h4 id="435-无重叠区间（中等）"><a href="#435-无重叠区间（中等）" class="headerlink" title="435. 无重叠区间（中等）"></a><a href="https://leetcode-cn.com/problems/non-overlapping-intervals/">435. 无重叠区间</a>（中等）</h4><p><strong>题目大意：</strong></p><blockquote><p>给定一个区间的集合，找到需要移除区间的最小数量，使剩余区间互不重叠。<strong>注意：</strong></p><ol><li>可以认为区间的终点总是大于它的起点。</li><li>区间 [1,2] 和 [2,3] 的边界相互“接触”，但没有相互重叠。</li></ol></blockquote><p><strong>解题思路：</strong></p><blockquote><p>这个区间的尾元素总是大于首元素，要保证最优，需要起始区间的尾元素最小，这样才能容纳最多的区间。所以首先需要根据区间的尾元素按照升序排序（此处用到<a href="https://www.hexoblog.gq/posts/3456.html">自定义排序</a>），然后设定一个起始数begin =  intervals[0][1]；再遍历排序完成的区间数组，比较起始区间尾元素和第i（i = 1,2,3,…,intervals.length）个区间的首元素的大小，若：<br>$$<br>begin&gt;intervals[i][0]<br>$$<br>则说明第i个区间与初始区间重合，故计数cnt++；反之满足不重合条件，不计数，<strong>并更新初始区间尾元素为：</strong>begin = intervals[i][1]，最后返回cnt即可。</p></blockquote><p><strong>解题代码：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">eraseOverlapIntervals</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intervals<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>intervals<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> intervals<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>intervals<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span>o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>o2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//自定义排序</span>        <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> begin <span class="token operator">=</span> intervals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> intervals<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>begin <span class="token operator">&gt;</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                cnt<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>             <span class="token keyword">else</span><span class="token punctuation">{</span>                begin <span class="token operator">=</span> intervals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> cnt<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>注：<a href="https://www.hexoblog.gq/posts/3456.html">自定义排序</a></p></blockquote><h4 id="452-用最少数量的箭引爆气球"><a href="#452-用最少数量的箭引爆气球" class="headerlink" title="452. 用最少数量的箭引爆气球"></a><a href="https://leetcode-cn.com/problems/minimum-number-of-arrows-to-burst-balloons/">452. 用最少数量的箭引爆气球</a></h4><p><strong>题目大意：</strong></p><blockquote><p>给定一个数组points，包含<code>points.length</code>个区间，求不重叠区间的个数。</p></blockquote><p><strong>解题思路：</strong></p><blockquote><p>该题与上文中<a href="https://leetcode-cn.com/problems/non-overlapping-intervals/">435. 无重叠区间</a>有点类似，也可用lambda表达写，但有个坑：测试用例：<code>[[-2147483646,-2147483645],[2147483646,2147483647]]</code>，若直接用：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>intervals<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span>o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>o2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>排序，相减会溢出，导致排序错误，所以应该这样写：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>o2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>排序后和435题类似，先定义一个<code>begin = points[0][1]</code>，然后开始遍历，更新begin值。不同的是，要注意区间长度的影响，如测试用例：<code>[[1,2],[4,5],[1,5]]</code>，若排序为：</p><ul><li>[1,5]</li><li>[1,2]</li><li>[4,5]</li></ul><p>则计算出只需一箭就可射完，但实际需要两箭。解决方法：只需在判断<code>begin &gt; ponits[i][0]</code>后再判断是否<code>begin &gt; points[i][1]</code>，若是，则更新begin的值为<code>points[i][1]</code>，相当于缩小区间。</p></blockquote><p><strong>解题代码：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findMinArrowShots</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> points<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>points<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> points <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>o2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> begin <span class="token operator">=</span> points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> points<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> begin<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                cnt<span class="token operator">++</span><span class="token punctuation">;</span>                begin <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> begin<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                begin <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> cnt<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="763-划分字母区间"><a href="#763-划分字母区间" class="headerlink" title="763. 划分字母区间"></a><a href="https://leetcode-cn.com/problems/partition-labels/">763. 划分字母区间</a></h4><p><strong>题目大意：</strong></p><blockquote><p>字符串 <code>S</code> 由小写字母组成。我们要把这个字符串划分为尽可能多的片段，同一字母最多出现在一个片段中。返回一个表示每个字符串片段的长度的列表。如：</p><blockquote><p>输入：S = “ababcbacadefegdehijhklij”<br>输出：[9,7,8]<br>解释：<br>划分结果为 “ababcbaca”, “defegde”, “hijhklij”。<br>每个字母最多出现在一个片段中。<br>像 “ababcbacadefegde”, “hijhklij” 的划分是错误的，因为划分的片段数较少。</p></blockquote></blockquote><p><strong>解题思路：</strong></p><blockquote><p>首先我们可以将某个区间内所有出现的字母<strong>最后出现（需要不断更新）</strong>的位置用数组<code>n</code>记录，然后设一个<code>begin</code>和<code>end</code>分别表示取出的区间的首位和末尾的位置，然后遍历所有字母，每遇到一个字母，就更新<code>end</code>的值，end要求取最后出现该字母的位置，即数组<code>n</code>中对应字母下标的值（总是取最大），即：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span>n<span class="token punctuation">[</span><span class="token class-name">S</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当某一段字母遍历结束时（即<code>i == end</code>），<code>end-begin+1</code>就是该段字母中字母的数量，存入结果数组<code>result</code>，然后更新<code>begin</code>的值为<code>begin=end+1</code>。</p></blockquote><p><strong>解题代码：</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">partitionLabels</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">S</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token class-name">S</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            n<span class="token punctuation">[</span><span class="token class-name">S</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> begin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token class-name">List</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token class-name">S</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span>n<span class="token punctuation">[</span><span class="token class-name">S</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> end<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>end<span class="token operator">-</span>begin<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                begin<span class="token operator">=</span>end<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Leetcode-算法题解 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 贪心算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="posts/5220.html"/>
      <url>posts/5220.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><p><a href="www.baidu.com">sdsd</a>,</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> test </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
